{"version":3,"file":"js/bundle.js","mappings":"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","sources":["webpack://thelounge/webpack/runtime/chunk loaded","webpack://thelounge/./client/components/MessageTypes/ sync nonrecursive \\.vue$","webpack://thelounge/./client/js/commands/ sync \\.ts$","webpack://thelounge/./client/js/auth.ts","webpack://thelounge/./client/js/commands/collapse.ts","webpack://thelounge/./client/js/commands/expand.ts","webpack://thelounge/./client/js/commands/index.ts","webpack://thelounge/./client/js/commands/join.ts","webpack://thelounge/./client/js/commands/search.ts","webpack://thelounge/./client/js/constants.ts","webpack://thelounge/./client/js/eventbus.ts","webpack://thelounge/./client/js/helpers/distance.ts","webpack://thelounge/./client/js/helpers/friendlysize.ts","webpack://thelounge/./client/js/helpers/isChannelCollapsed.ts","webpack://thelounge/./client/js/helpers/isIgnoredKeybind.ts","webpack://thelounge/./client/js/helpers/localetime.ts","webpack://thelounge/./client/js/localStorage.ts","webpack://thelounge/./client/js/location.ts","webpack://thelounge/./client/components/Windows/SignIn.vue","webpack://thelounge/./client/components/RevealPassword.vue","webpack://thelounge/./client/components/RevealPassword.vue?c069","webpack://thelounge/./client/components/Windows/SignIn.vue?15cf","webpack://thelounge/./client/components/NetworkForm.vue","webpack://thelounge/./client/components/SidebarToggle.vue","webpack://thelounge/./client/components/SidebarToggle.vue?5dae","webpack://thelounge/./client/components/NetworkForm.vue?97fe","webpack://thelounge/./client/components/Windows/Connect.vue","webpack://thelounge/./client/components/Windows/Connect.vue?3910","webpack://thelounge/./client/components/Windows/Settings.vue","webpack://thelounge/./client/components/Settings/Navigation.vue","webpack://thelounge/./client/components/Settings/SettingTabItem.vue","webpack://thelounge/./client/components/Settings/SettingTabItem.vue?8598","webpack://thelounge/./client/components/Settings/Navigation.vue?538b","webpack://thelounge/./client/components/Windows/Settings.vue?b26a","webpack://thelounge/./client/components/Windows/Help.vue","webpack://thelounge/./client/components/VersionChecker.vue","webpack://thelounge/./client/components/VersionChecker.vue?f024","webpack://thelounge/./client/components/Windows/Help.vue?3de4","webpack://thelounge/./client/components/Windows/Changelog.vue","webpack://thelounge/./client/components/Windows/Changelog.vue?eb05","webpack://thelounge/./client/components/Windows/NetworkEdit.vue","webpack://thelounge/./client/components/Windows/NetworkEdit.vue?3546","webpack://thelounge/./client/components/Windows/SearchResults.vue","webpack://thelounge/./client/components/Message.vue","webpack://thelounge/./client/components/LinkPreview.vue","webpack://thelounge/./client/components/LinkPreview.vue?77b7","webpack://thelounge/./client/components/MessageTypes/index.ts","webpack://thelounge/./client/components/Message.vue?dd80","webpack://thelounge/./client/components/MessageSearchForm.vue","webpack://thelounge/./client/components/MessageSearchForm.vue?6f16","webpack://thelounge/./client/components/DateMarker.vue","webpack://thelounge/./client/components/DateMarker.vue?205b","webpack://thelounge/./client/components/Windows/SearchResults.vue?abb7","webpack://thelounge/./client/components/Chat.vue","webpack://thelounge/./client/components/MessageList.vue","webpack://thelounge/./client/components/MessageCondensed.vue","webpack://thelounge/./client/components/MessageCondensed.vue?0c2b","webpack://thelounge/./client/js/clipboard.ts","webpack://thelounge/./client/components/MessageList.vue?f60d","webpack://thelounge/./client/components/ChatInput.vue","webpack://thelounge/./client/js/autocompletion.ts","webpack://thelounge/./client/components/ChatInput.vue?83df","webpack://thelounge/./client/components/ChatUserList.vue","webpack://thelounge/./client/components/ChatUserList.vue?ef74","webpack://thelounge/./client/components/Special/ListBans.vue","webpack://thelounge/./client/components/Special/ListBans.vue?e125","webpack://thelounge/./client/components/Special/ListInvites.vue","webpack://thelounge/./client/components/Special/ListInvites.vue?3ace","webpack://thelounge/./client/components/Special/ListChannels.vue","webpack://thelounge/./client/components/Special/ListChannels.vue?727e","webpack://thelounge/./client/components/Special/ListIgnored.vue","webpack://thelounge/./client/components/Special/ListIgnored.vue?78d6","webpack://thelounge/./client/components/Chat.vue?9f2a","webpack://thelounge/./client/components/RoutedChat.vue","webpack://thelounge/./client/components/RoutedChat.vue?f310","webpack://thelounge/./client/components/Settings/Appearance.vue","webpack://thelounge/./client/components/Settings/Appearance.vue?aba1","webpack://thelounge/./client/components/Settings/General.vue","webpack://thelounge/./client/components/Settings/General.vue?e603","webpack://thelounge/./client/components/Settings/Account.vue","webpack://thelounge/./client/components/Session.vue","webpack://thelounge/./client/components/Session.vue?1e0d","webpack://thelounge/./client/components/Settings/Account.vue?8037","webpack://thelounge/./client/components/Settings/Notifications.vue","webpack://thelounge/./client/components/Settings/Notifications.vue?6626","webpack://thelounge/./client/js/router.ts","webpack://thelounge/./client/js/socket.ts","webpack://thelounge/./client/js/settings.ts","webpack://thelounge/./client/js/store-settings.ts","webpack://thelounge/./client/js/store.ts","webpack://thelounge/./client/js/upload.ts","webpack://thelounge/./client/js/socket-events/connection.ts","webpack://thelounge/./client/js/socket-events/auth.ts","webpack://thelounge/./client/js/socket-events/init.ts","webpack://thelounge/./client/js/socket-events/commands.ts","webpack://thelounge/./client/js/helpers/parseIrcUri.ts","webpack://thelounge/./client/js/socket-events/join.ts","webpack://thelounge/./client/js/socket-events/more.ts","webpack://thelounge/./client/js/socket-events/msg.ts","webpack://thelounge/./client/js/socket-events/msg_preview.ts","webpack://thelounge/./client/js/socket-events/msg_special.ts","webpack://thelounge/./client/js/socket-events/names.ts","webpack://thelounge/./client/js/socket-events/network.ts","webpack://thelounge/./client/js/socket-events/nick.ts","webpack://thelounge/./client/js/socket-events/open.ts","webpack://thelounge/./client/js/socket-events/part.ts","webpack://thelounge/./client/js/socket-events/quit.ts","webpack://thelounge/./client/js/socket-events/sync_sort.ts","webpack://thelounge/./client/js/socket-events/topic.ts","webpack://thelounge/./client/js/socket-events/users.ts","webpack://thelounge/./client/js/socket-events/sign_out.ts","webpack://thelounge/./client/js/socket-events/sessions_list.ts","webpack://thelounge/./client/js/socket-events/configuration.ts","webpack://thelounge/./client/js/socket-events/changelog.ts","webpack://thelounge/./client/js/socket-events/setting.ts","webpack://thelounge/./client/js/socket-events/history_clear.ts","webpack://thelounge/./client/js/socket-events/mentions.ts","webpack://thelounge/./client/js/socket-events/search.ts","webpack://thelounge/./client/js/socket-events/mute_changed.ts","webpack://thelounge/./client/js/keybinds.ts","webpack://thelounge/./client/js/helpers/listenForTwoFingerSwipes.ts","webpack://thelounge/./client/js/vue.ts","webpack://thelounge/./client/js/webpush.ts","webpack://thelounge/./shared/irc.ts","webpack://thelounge/./client/components/App.vue","webpack://thelounge/./client/components/Sidebar.vue","webpack://thelounge/./client/components/NetworkList.vue","webpack://thelounge/./client/components/Draggable.vue","webpack://thelounge/./client/components/Draggable.vue?a413","webpack://thelounge/./client/components/NetworkLobby.vue","webpack://thelounge/./client/js/helpers/collapseNetwork.ts","webpack://thelounge/./client/js/helpers/roundBadgeNumber.ts","webpack://thelounge/./client/components/ChannelWrapper.vue","webpack://thelounge/./client/components/ChannelWrapper.vue?8bb7","webpack://thelounge/./client/components/NetworkLobby.vue?7d17","webpack://thelounge/./client/components/Channel.vue","webpack://thelounge/./client/js/hooks/use-close-channel.ts","webpack://thelounge/./client/components/Channel.vue?19d6","webpack://thelounge/./client/components/JoinChannel.vue","webpack://thelounge/./client/components/JoinChannel.vue?d18e","webpack://thelounge/./client/components/NetworkList.vue?403b","webpack://thelounge/./client/components/Sidebar.vue?9985","webpack://thelounge/./client/components/ImageViewer.vue","webpack://thelounge/./client/components/ImageViewer.vue?2dfc","webpack://thelounge/./client/js/helpers/contextMenu.ts","webpack://thelounge/./client/components/ContextMenu.vue","webpack://thelounge/./client/components/ContextMenu.vue?fdba","webpack://thelounge/./client/components/ConfirmDialog.vue","webpack://thelounge/./client/components/ConfirmDialog.vue?36a8","webpack://thelounge/./client/components/Mentions.vue","webpack://thelounge/./client/components/Mentions.vue?dcdf","webpack://thelounge/./client/components/App.vue?37fa","webpack://thelounge/./client/components/MessageTypes/away.vue","webpack://thelounge/./client/components/MessageTypes/away.vue?c451","webpack://thelounge/./client/components/MessageTypes/back.vue","webpack://thelounge/./client/components/MessageTypes/back.vue?a43b","webpack://thelounge/./client/components/MessageTypes/chghost.vue","webpack://thelounge/./client/components/MessageTypes/chghost.vue?ab01","webpack://thelounge/./client/components/MessageTypes/ctcp.vue","webpack://thelounge/./client/components/MessageTypes/ctcp.vue?cacf","webpack://thelounge/./client/components/MessageTypes/ctcp_request.vue","webpack://thelounge/./client/components/MessageTypes/ctcp_request.vue?2dcb","webpack://thelounge/./client/components/MessageTypes/error.vue","webpack://thelounge/./client/components/MessageTypes/error.vue?3d38","webpack://thelounge/./client/components/MessageTypes/invite.vue","webpack://thelounge/./client/components/MessageTypes/invite.vue?0d58","webpack://thelounge/./client/components/MessageTypes/join.vue","webpack://thelounge/./client/components/MessageTypes/join.vue?8f48","webpack://thelounge/./client/components/MessageTypes/kick.vue","webpack://thelounge/./client/components/MessageTypes/kick.vue?24a1","webpack://thelounge/./client/components/MessageTypes/mode.vue","webpack://thelounge/./client/components/MessageTypes/mode.vue?86d9","webpack://thelounge/./client/components/MessageTypes/mode_channel.vue","webpack://thelounge/./client/components/MessageTypes/mode_channel.vue?8348","webpack://thelounge/./client/components/MessageTypes/mode_user.vue","webpack://thelounge/./client/components/MessageTypes/mode_user.vue?70f4","webpack://thelounge/./client/components/MessageTypes/monospace_block.vue","webpack://thelounge/./client/components/MessageTypes/monospace_block.vue?5357","webpack://thelounge/./client/components/MessageTypes/nick.vue","webpack://thelounge/./client/components/MessageTypes/nick.vue?d15a","webpack://thelounge/./client/components/MessageTypes/part.vue","webpack://thelounge/./client/components/MessageTypes/part.vue?e2a6","webpack://thelounge/./client/components/MessageTypes/quit.vue","webpack://thelounge/./client/components/MessageTypes/quit.vue?6cc8","webpack://thelounge/./client/components/MessageTypes/raw.vue","webpack://thelounge/./client/components/MessageTypes/raw.vue?56b1","webpack://thelounge/./client/components/MessageTypes/topic.vue","webpack://thelounge/./client/components/MessageTypes/topic.vue?2f75","webpack://thelounge/./client/components/MessageTypes/topic_set_by.vue","webpack://thelounge/./client/components/MessageTypes/topic_set_by.vue?2f65","webpack://thelounge/./client/components/MessageTypes/whois.vue","webpack://thelounge/./client/components/MessageTypes/whois.vue?a6be","webpack://thelounge/./client/js/helpers/ircmessageparser/parseStyle.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findChannels.ts","webpack://thelounge/./shared/linkify.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findEmoji.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findNames.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/anyIntersection.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/merge.ts","webpack://thelounge/./client/components/LinkPreviewToggle.vue","webpack://thelounge/./client/components/LinkPreviewToggle.vue?bfed","webpack://thelounge/./client/components/LinkPreviewFileSize.vue","webpack://thelounge/./client/components/LinkPreviewFileSize.vue?6888","webpack://thelounge/./client/components/InlineChannel.vue","webpack://thelounge/./client/components/InlineChannel.vue?b1e5","webpack://thelounge/./client/js/helpers/parse.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/fill.ts","webpack://thelounge/./client/components/ParsedMessage.vue?11f7","webpack://thelounge/./client/components/ParsedMessage.vue","webpack://thelounge/./client/components/Username.vue","webpack://thelounge/./client/js/helpers/colorClass.ts","webpack://thelounge/./client/components/Username.vue?2f83","webpack://thelounge/webpack/bootstrap","webpack://thelounge/webpack/runtime/compat get default export","webpack://thelounge/webpack/runtime/define property getters","webpack://thelounge/webpack/runtime/global","webpack://thelounge/webpack/runtime/hasOwnProperty shorthand","webpack://thelounge/webpack/runtime/make namespace object","webpack://thelounge/webpack/runtime/jsonp chunk loading","webpack://thelounge/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var map = {\n\t\"./away.vue\": 4509,\n\t\"./back.vue\": 5381,\n\t\"./chghost.vue\": 3089,\n\t\"./ctcp.vue\": 4878,\n\t\"./ctcp_request.vue\": 7052,\n\t\"./error.vue\": 3576,\n\t\"./invite.vue\": 6502,\n\t\"./join.vue\": 1770,\n\t\"./kick.vue\": 2501,\n\t\"./mode.vue\": 7393,\n\t\"./mode_channel.vue\": 1686,\n\t\"./mode_user.vue\": 1267,\n\t\"./monospace_block.vue\": 6258,\n\t\"./nick.vue\": 5169,\n\t\"./part.vue\": 3397,\n\t\"./quit.vue\": 9561,\n\t\"./raw.vue\": 7928,\n\t\"./topic.vue\": 6096,\n\t\"./topic_set_by.vue\": 4886,\n\t\"./whois.vue\": 801\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1039;","var map = {\n\t\"./collapse.ts\": 1329,\n\t\"./expand.ts\": 102,\n\t\"./index.ts\": 3805,\n\t\"./join.ts\": 7301,\n\t\"./search.ts\": 960\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2664;","import storage from \"./localStorage\";\nimport location from \"./location\";\n\nexport default class Auth {\n\tstatic signout() {\n\t\tstorage.clear();\n\t\tlocation.reload();\n\t}\n}\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nfunction input() {\n\tif (!store.state.activeChannel) {\n\t\treturn;\n\t}\n\n\tconst messageIds: number[] = [];\n\n\tfor (const message of store.state.activeChannel.channel.messages) {\n\t\tlet toggled = false;\n\n\t\tfor (const preview of message.previews) {\n\t\t\tif (preview.shown) {\n\t\t\t\tpreview.shown = false;\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (toggled) {\n\t\t\tmessageIds.push(message.id);\n\t\t}\n\t}\n\n\t// Tell the server we're toggling so it remembers at page reload\n\tif (!document.body.classList.contains(\"public\") && messageIds.length > 0) {\n\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\ttarget: store.state.activeChannel?.channel.id,\n\t\t\tmessageIds: messageIds,\n\t\t\tshown: false,\n\t\t});\n\t}\n\n\treturn true;\n}\n\nexport default {input};\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nfunction input() {\n\tif (!store.state.activeChannel) {\n\t\treturn;\n\t}\n\n\tconst messageIds: number[] = [];\n\n\tfor (const message of store.state.activeChannel.channel.messages) {\n\t\tlet toggled = false;\n\n\t\tfor (const preview of message.previews) {\n\t\t\tif (!preview.shown) {\n\t\t\t\tpreview.shown = true;\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (toggled) {\n\t\t\tmessageIds.push(message.id);\n\t\t}\n\t}\n\n\t// Tell the server we're toggling so it remembers at page reload\n\tif (!document.body.classList.contains(\"public\") && messageIds.length > 0) {\n\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\ttarget: store.state.activeChannel?.channel.id,\n\t\t\tmessageIds: messageIds,\n\t\t\tshown: true,\n\t\t});\n\t}\n\n\treturn true;\n}\n\nexport default {input};\n","// Taken from views/index.js\n\n// This creates a version of `require()` in the context of the current\n// directory, so we iterate over its content, which is a map statically built by\n// Webpack.\n// Second argument says it's recursive, third makes sure we only load javascript.\nconst commands = require.context(\"./\", true, /\\.ts$/);\n\nexport default commands.keys().reduce<Record<string, unknown>>((acc, path) => {\n\tconst command = path.substring(2, path.length - 3);\n\n\tif (command === \"index\") {\n\t\treturn acc;\n\t}\n\n\tacc[command] = commands(path).default;\n\n\treturn acc;\n}, {});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nfunction input(args: string[]) {\n\tif (args.length > 0) {\n\t\tlet channels = args[0];\n\n\t\tif (channels.length > 0) {\n\t\t\tconst chanTypes = store.state.activeChannel?.network.serverOptions.CHANTYPES;\n\t\t\tconst channelList = args[0].split(\",\");\n\n\t\t\tif (chanTypes && chanTypes.length > 0) {\n\t\t\t\tfor (let c = 0; c < channelList.length; c++) {\n\t\t\t\t\tif (!chanTypes.includes(channelList[c][0])) {\n\t\t\t\t\t\tchannelList[c] = chanTypes[0] + channelList[c];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchannels = channelList.join(\",\");\n\n\t\t\tconst chan = store.getters.findChannelOnCurrentNetwork(channels);\n\n\t\t\tif (chan) {\n\t\t\t\tswitchToChannel(chan);\n\t\t\t} else {\n\t\t\t\tif (store.state.activeChannel) {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttext: `/join ${channels} ${args.length > 1 ? args[1] : \"\"}`,\n\t\t\t\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} else if (store.state.activeChannel?.channel.type === \"channel\") {\n\t\t// If `/join` command is used without any arguments, re-join current channel\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\ttext: `/join ${store.state.activeChannel.channel.name}`,\n\t\t});\n\n\t\treturn true;\n\t}\n}\n\nexport default {input};\n","import {store} from \"../store\";\nimport {router} from \"../router\";\n\nfunction input(args: string[]) {\n\tif (!store.state.settings.searchEnabled) {\n\t\treturn false;\n\t}\n\n\trouter\n\t\t.push({\n\t\t\tname: \"SearchResults\",\n\t\t\tparams: {\n\t\t\t\tid: store.state.activeChannel?.channel.id,\n\t\t\t},\n\t\t\tquery: {\n\t\t\t\tq: args.join(\" \"),\n\t\t\t},\n\t\t})\n\t\t.catch((e: Error) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(`Failed to push SearchResults route: ${e.message}`);\n\t\t});\n\n\treturn true;\n}\n\nexport default {input};\n","const colorCodeMap = [\n\t[\"00\", \"White\"],\n\t[\"01\", \"Black\"],\n\t[\"02\", \"Blue\"],\n\t[\"03\", \"Green\"],\n\t[\"04\", \"Red\"],\n\t[\"05\", \"Brown\"],\n\t[\"06\", \"Magenta\"],\n\t[\"07\", \"Orange\"],\n\t[\"08\", \"Yellow\"],\n\t[\"09\", \"Light Green\"],\n\t[\"10\", \"Cyan\"],\n\t[\"11\", \"Light Cyan\"],\n\t[\"12\", \"Light Blue\"],\n\t[\"13\", \"Pink\"],\n\t[\"14\", \"Grey\"],\n\t[\"15\", \"Light Grey\"],\n];\n\nconst timeFormats = {\n\tmsgDefault: \"HH:mm\",\n\tmsgWithSeconds: \"HH:mm:ss\",\n\tmsg12h: \"hh:mm A\",\n\tmsg12hWithSeconds: \"hh:mm:ss A\",\n};\n\nexport default {\n\tcolorCodeMap,\n\tcommands: [] as string[],\n\ttimeFormats,\n\t// Same value as media query in CSS that forces sidebars to become overlays\n\tmobileViewportPixels: 768,\n};\n","const events = new Map();\n\nclass EventBus {\n\t/**\n\t * Register an event handler for the given type.\n\t *\n\t * @param  {String} type    Type of event to listen for.\n\t * @param  {Function} handler Function to call in response to given event.\n\t */\n\ton(type: string, handler: (...evt: any[]) => void) {\n\t\tif (events.has(type)) {\n\t\t\tevents.get(type).push(handler);\n\t\t} else {\n\t\t\tevents.set(type, [handler]);\n\t\t}\n\t}\n\n\t/**\n\t * Remove an event handler for the given type.\n\t *\n\t * @param  {String} type    Type of event to unregister `handler` from.\n\t * @param  {Function} handler Handler function to remove.\n\t */\n\toff(type: string, handler: (...evt: any[]) => void) {\n\t\tif (events.has(type)) {\n\t\t\tevents.set(\n\t\t\t\ttype,\n\t\t\t\tevents.get(type).filter((item: (...evt: any[]) => void) => item !== handler)\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Invoke all handlers for the given type.\n\t *\n\t * @param {String} type  The event type to invoke.\n\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler.\n\t */\n\temit(type: string, ...evt: any) {\n\t\tif (events.has(type)) {\n\t\t\tevents\n\t\t\t\t.get(type)\n\t\t\t\t.slice()\n\t\t\t\t.map((handler: (...evts: any[]) => void) => {\n\t\t\t\t\thandler(...evt);\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport default new EventBus();\n","function distance([x1, y1]: [number, number], [x2, y2]: [number, number]) {\n\treturn Math.hypot(x1 - x2, y1 - y2);\n}\n\nexport default distance;\n","const sizes = [\"Bytes\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\"];\n\nexport default (size: number) => {\n\t// Loosely inspired from https://stackoverflow.com/a/18650828/1935861\n\tconst i = size > 0 ? Math.floor(Math.log(size) / Math.log(1024)) : 0;\n\tconst fixedSize = parseFloat((size / Math.pow(1024, i)).toFixed(1));\n\treturn `${fixedSize} ${sizes[i]}`;\n};\n","import {store} from \"../store\";\n\nexport default (network, channel) => {\n\tif (!network.isCollapsed || channel.highlight || channel.type === \"lobby\") {\n\t\treturn false;\n\t}\n\n\tif (store.state.activeChannel && channel === store.state.activeChannel.channel) {\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n","export default (event: MouseEvent | Mousetrap.ExtendedKeyboardEvent) => {\n\tif (\n\t\t(event.target as HTMLElement).tagName !== \"TEXTAREA\" &&\n\t\t(event.target as HTMLElement).tagName !== \"INPUT\"\n\t) {\n\t\treturn false;\n\t}\n\n\t// If focus is in a textarea, do not handle keybinds if user has typed anything\n\t// This is done to prevent keyboard layout binds conflicting with ours\n\t// For example alt+shift+left on macos selects a word\n\treturn !!(event.target as any).value;\n};\n","import dayjs from \"dayjs\";\n\nexport default (time: Date | number) => dayjs(time).format(\"D MMMM YYYY, HH:mm:ss\");\n","// This is a simple localStorage wrapper because browser can throw errors\n// in different situations, including:\n// - Unable to store data if storage is full\n// - Local storage is blocked if \"third-party cookies and site data\" is disabled\n//\n// For more details, see:\n// https://stackoverflow.com/q/14555347/1935861\n// https://github.com/thelounge/thelounge/issues/2699\n// https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n\nexport default {\n\tset(key: string, value: string) {\n\t\ttry {\n\t\t\twindow.localStorage.setItem(key, value);\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n\tget(key: string) {\n\t\ttry {\n\t\t\treturn window.localStorage.getItem(key);\n\t\t} catch (e) {\n\t\t\t// Return null as if data is not set\n\t\t\treturn null;\n\t\t}\n\t},\n\tremove(key: string) {\n\t\ttry {\n\t\t\twindow.localStorage.removeItem(key);\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n\tclear() {\n\t\ttry {\n\t\t\twindow.localStorage.clear();\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n};\n","// This is a thin wrapper around `window.location`, in order to contain the\n// side-effects. Do not add logic to it as it cannot be tested, only mocked.\nexport default {\n\treload() {\n\t\twindow.location.reload();\n\t},\n};\n","<template>\n\t<div id=\"sign-in\" class=\"window\" role=\"tabpanel\" aria-label=\"Sign-in\">\n\t\t<form class=\"container\" method=\"post\" action=\"\" @submit=\"onSubmit\">\n\t\t\t<img\n\t\t\t\tsrc=\"img/logo-vertical-transparent-bg.svg\"\n\t\t\t\tclass=\"logo\"\n\t\t\t\talt=\"The Lounge\"\n\t\t\t\twidth=\"256\"\n\t\t\t\theight=\"170\"\n\t\t\t/>\n\t\t\t<img\n\t\t\t\tsrc=\"img/logo-vertical-transparent-bg-inverted.svg\"\n\t\t\t\tclass=\"logo-inverted\"\n\t\t\t\talt=\"The Lounge\"\n\t\t\t\twidth=\"256\"\n\t\t\t\theight=\"170\"\n\t\t\t/>\n\n\t\t\t<label for=\"signin-username\">Username</label>\n\t\t\t<input\n\t\t\t\tid=\"signin-username\"\n\t\t\t\tv-model=\"username\"\n\t\t\t\tclass=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"username\"\n\t\t\t\tautocapitalize=\"none\"\n\t\t\t\tautocorrect=\"off\"\n\t\t\t\tautocomplete=\"username\"\n\t\t\t\trequired\n\t\t\t\tautofocus\n\t\t\t/>\n\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"signin-password\">Password</label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"signin-password\"\n\t\t\t\t\t\tv-model=\"password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tautocapitalize=\"none\"\n\t\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"errorShown\" class=\"error\">Authentication failed.</div>\n\n\t\t\t<button :disabled=\"inFlight\" type=\"submit\" class=\"btn\">Sign in</button>\n\t\t</form>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport storage from \"../../js/localStorage\";\nimport socket from \"../../js/socket\";\nimport RevealPassword from \"../RevealPassword.vue\";\nimport {defineComponent, onBeforeUnmount, onMounted, ref} from \"vue\";\n\nexport default defineComponent({\n\tname: \"SignIn\",\n\tcomponents: {\n\t\tRevealPassword,\n\t},\n\tsetup() {\n\t\tconst inFlight = ref(false);\n\t\tconst errorShown = ref(false);\n\n\t\tconst username = ref(storage.get(\"user\") || \"\");\n\t\tconst password = ref(\"\");\n\n\t\tconst onAuthFailed = () => {\n\t\t\tinFlight.value = false;\n\t\t\terrorShown.value = true;\n\t\t};\n\n\t\tconst onSubmit = (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!username.value || !password.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinFlight.value = true;\n\t\t\terrorShown.value = false;\n\n\t\t\tconst values = {\n\t\t\t\tuser: username.value,\n\t\t\t\tpassword: password.value,\n\t\t\t};\n\n\t\t\tstorage.set(\"user\", values.user);\n\n\t\t\tsocket.emit(\"auth:perform\", values);\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tsocket.on(\"auth:failed\", onAuthFailed);\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tsocket.off(\"auth:failed\", onAuthFailed);\n\t\t});\n\n\t\treturn {\n\t\t\tinFlight,\n\t\t\terrorShown,\n\t\t\tusername,\n\t\t\tpassword,\n\t\t\tonSubmit,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div>\n\t\t<slot :is-visible=\"isVisible\" />\n\t\t<span\n\t\t\tref=\"revealButton\"\n\t\t\ttype=\"button\"\n\t\t\t:class=\"[\n\t\t\t\t'reveal-password tooltipped tooltipped-n tooltipped-no-delay',\n\t\t\t\t{'reveal-password-visible': isVisible},\n\t\t\t]\"\n\t\t\t:aria-label=\"isVisible ? 'Hide password' : 'Show password'\"\n\t\t\t@click=\"onClick\"\n\t\t>\n\t\t\t<span :aria-label=\"isVisible ? 'Hide password' : 'Show password'\" />\n\t\t</span>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\n\nexport default defineComponent({\n\tname: \"RevealPassword\",\n\tsetup() {\n\t\tconst isVisible = ref(false);\n\n\t\tconst onClick = () => {\n\t\t\tisVisible.value = !isVisible.value;\n\t\t};\n\n\t\treturn {\n\t\t\tisVisible,\n\t\t\tonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./RevealPassword.vue?vue&type=template&id=5df695c1&ts=true\"\nimport script from \"./RevealPassword.vue?vue&type=script&lang=ts\"\nexport * from \"./RevealPassword.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SignIn.vue?vue&type=template&id=05aa7d22&ts=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=ts\"\nexport * from \"./SignIn.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"connect\" class=\"window\" role=\"tabpanel\" aria-label=\"Connect\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<form class=\"container\" method=\"post\" action=\"\" @submit.prevent=\"onSubmit\">\n\t\t\t<h1 class=\"title\">\n\t\t\t\t<template v-if=\"defaults.uuid\">\n\t\t\t\t\t<input v-model=\"defaults.uuid\" type=\"hidden\" name=\"uuid\" />\n\t\t\t\t\tEdit {{ defaults.name }}\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\tConnect\n\t\t\t\t\t<template\n\t\t\t\t\t\tv-if=\"config?.lockNetwork && store?.state.serverConfiguration?.public\"\n\t\t\t\t\t>\n\t\t\t\t\t\tto {{ defaults.name }}\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</h1>\n\t\t\t<template v-if=\"!config?.lockNetwork\">\n\t\t\t\t<h2>Network settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:name\">Name</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:name\"\n\t\t\t\t\t\tv-model.trim=\"defaults.name\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:host\">Server</label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:host\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.host\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tname=\"host\"\n\t\t\t\t\t\t\taria-label=\"Server address\"\n\t\t\t\t\t\t\tmaxlength=\"255\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span id=\"connect:portseparator\">:</span>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:port\"\n\t\t\t\t\t\t\tv-model=\"defaults.port\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\tmax=\"65535\"\n\t\t\t\t\t\t\tname=\"port\"\n\t\t\t\t\t\t\taria-label=\"Server port\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RevealPassword>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label></label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"defaults.tls\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"tls\"\n\t\t\t\t\t\t\t\t:disabled=\"defaults.hasSTSPolicy\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tUse secure connection (TLS)\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tv-if=\"defaults.hasSTSPolicy\"\n\t\t\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\t\t\taria-label=\"This network has a strict transport security policy, you will be unable to disable TLS\"\n\t\t\t\t\t\t\t\t> STS</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"defaults.rejectUnauthorized\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"rejectUnauthorized\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tOnly allow trusted certificates\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<h2>Proxy Settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label></label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<label for=\"connect:proxyEnabled\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyEnabled\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyEnabled\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"proxyEnabled\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tEnable Proxy\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"defaults.proxyEnabled\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyHost\">SOCKS Address</label>\n\t\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyHost\"\n\t\t\t\t\t\t\t\tv-model.trim=\"defaults.proxyHost\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\tname=\"proxyHost\"\n\t\t\t\t\t\t\t\taria-label=\"Proxy host\"\n\t\t\t\t\t\t\t\tmaxlength=\"255\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span id=\"connect:proxyPortSeparator\">:</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyPort\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyPort\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\tmax=\"65535\"\n\t\t\t\t\t\t\t\tname=\"proxyPort\"\n\t\t\t\t\t\t\t\taria-label=\"SOCKS port\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyUsername\">Proxy username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:proxyUsername\"\n\t\t\t\t\t\t\tref=\"proxyUsernameInput\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.proxyUsername\"\n\t\t\t\t\t\t\tclass=\"input username\"\n\t\t\t\t\t\t\tname=\"proxyUsername\"\n\t\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t\t\tplaceholder=\"Proxy username\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyPassword\">Proxy password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyPassword\"\n\t\t\t\t\t\t\t\tref=\"proxyPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyPassword\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tplaceholder=\"Proxy password\"\n\t\t\t\t\t\t\t\tname=\"proxyPassword\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"config.lockNetwork && !store.state.serverConfiguration?.public\">\n\t\t\t\t<h2>Network settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:name\">Name</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:name\"\n\t\t\t\t\t\tv-model.trim=\"defaults.name\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RevealPassword>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<h2>User preferences</h2>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:nick\">Nick</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:nick\"\n\t\t\t\t\tv-model=\"defaults.nick\"\n\t\t\t\t\tclass=\"input nick\"\n\t\t\t\t\tname=\"nick\"\n\t\t\t\t\tpattern=\"[^\\s:!@]+\"\n\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\trequired\n\t\t\t\t\t@input=\"onNickChanged\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<template v-if=\"!config?.useHexIp\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:username\">Username</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:username\"\n\t\t\t\t\t\tref=\"usernameInput\"\n\t\t\t\t\t\tv-model.trim=\"defaults.username\"\n\t\t\t\t\t\tclass=\"input username\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:realname\">Real name</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:realname\"\n\t\t\t\t\tv-model.trim=\"defaults.realname\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tname=\"realname\"\n\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:leaveMessage\">Leave message</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:leaveMessage\"\n\t\t\t\t\tv-model.trim=\"defaults.leaveMessage\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tname=\"leaveMessage\"\n\t\t\t\t\tplaceholder=\"The Lounge - https://thelounge.chat\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<template v-if=\"defaults.uuid && !store.state.serverConfiguration?.public\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:commands\">\n\t\t\t\t\t\tCommands\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"tooltipped tooltipped-ne tooltipped-no-delay\"\n\t\t\t\t\t\t\taria-label=\"One /command per line.\nEach command will be executed in\nthe server tab on new connection\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid=\"connect:commands\"\n\t\t\t\t\t\tref=\"commandsInput\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t:value=\"defaults.commands ? defaults.commands.join('\\n') : ''\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"commands\"\n\t\t\t\t\t\t@input=\"resizeCommandsInput\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"!defaults.uuid\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:channels\">Channels</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:channels\"\n\t\t\t\t\t\tv-model.trim=\"defaults.join\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"join\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"store.state.serverConfiguration?.public\">\n\t\t\t\t<template v-if=\"config?.lockNetwork\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t\t<input v-model=\"displayPasswordField\" type=\"checkbox\" />\n\t\t\t\t\t\t\t\tI have a password\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"displayPasswordField\" class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\t\tref=\"publicPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<h2 id=\"label-auth\">Authentication</h2>\n\t\t\t\t<div class=\"connect-row connect-auth\" role=\"group\" aria-labelledby=\"label-auth\">\n\t\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"!defaults.sasl\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tNo authentication\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"defaults.sasl === 'plain'\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"plain\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('plain')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tUsername + password (SASL PLAIN)\n\t\t\t\t\t</label>\n\t\t\t\t\t<label\n\t\t\t\t\t\tv-if=\"!store.state.serverConfiguration?.public && defaults.tls\"\n\t\t\t\t\t\tclass=\"opt\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"defaults.sasl === 'external'\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"external\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('external')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tClient certificate (SASL EXTERNAL)\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<template v-if=\"defaults.sasl === 'plain'\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:username\">Account</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:saslAccount\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.saslAccount\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tname=\"saslAccount\"\n\t\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:saslPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.saslPassword\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tname=\"saslPassword\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-else-if=\"defaults.sasl === 'external'\" class=\"connect-sasl-external\">\n\t\t\t\t\t<p>The Lounge automatically generates and manages the client certificate.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tOn the IRC server, you will need to tell the services to attach the\n\t\t\t\t\t\tcertificate fingerprint (certfp) to your account, for example:\n\t\t\t\t\t</p>\n\t\t\t\t\t<pre><code>/msg NickServ CERT ADD</code></pre>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\" class=\"btn\" :disabled=\"disabled ? true : false\">\n\t\t\t\t\t<template v-if=\"defaults.uuid\">Save network</template>\n\t\t\t\t\t<template v-else>Connect</template>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</template>\n\n<style>\n#connect .connect-auth {\n\tdisplay: block;\n\tmargin-bottom: 10px;\n}\n\n#connect .connect-auth .opt {\n\tdisplay: block;\n\twidth: 100%;\n}\n\n#connect .connect-auth input {\n\tmargin: 3px 10px 0 0;\n}\n\n#connect .connect-sasl-external {\n\tpadding: 10px;\n\tborder-radius: 2px;\n\tbackground-color: #d9edf7;\n\tcolor: #31708f;\n}\n\n#connect .connect-sasl-external pre {\n\tmargin: 0;\n\tuser-select: text;\n}\n</style>\n\n<script lang=\"ts\">\nimport RevealPassword from \"./RevealPassword.vue\";\nimport SidebarToggle from \"./SidebarToggle.vue\";\nimport {defineComponent, nextTick, PropType, ref, watch} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientNetwork} from \"../js/types\";\n\nexport type NetworkFormDefaults = Partial<ClientNetwork> & {\n\tjoin?: string;\n};\n\nexport default defineComponent({\n\tname: \"NetworkForm\",\n\tcomponents: {\n\t\tRevealPassword,\n\t\tSidebarToggle,\n\t},\n\tprops: {\n\t\thandleSubmit: {\n\t\t\ttype: Function as PropType<(network: ClientNetwork) => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaults: {\n\t\t\ttype: Object as PropType<NetworkFormDefaults>,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst config = ref(store.state.serverConfiguration);\n\t\tconst previousUsername = ref(props.defaults?.username);\n\t\tconst displayPasswordField = ref(false);\n\n\t\tconst publicPassword = ref<HTMLInputElement | null>(null);\n\n\t\twatch(displayPasswordField, (newValue) => {\n\t\t\tif (newValue) {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\tpublicPassword.value?.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tconst commandsInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst resizeCommandsInput = () => {\n\t\t\tif (!commandsInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Reset height first so it can down size\n\t\t\tcommandsInput.value.style.height = \"\";\n\n\t\t\t// 2 pixels to account for the border\n\t\t\tcommandsInput.value.style.height = `${Math.ceil(\n\t\t\t\tcommandsInput.value.scrollHeight + 2\n\t\t\t)}px`;\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.defaults?.commands,\n\t\t\t() => {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\tresizeCommandsInput();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.defaults?.tls,\n\t\t\t(isSecureChecked) => {\n\t\t\t\tconst ports = [6667, 6697];\n\t\t\t\tconst newPort = isSecureChecked ? 0 : 1;\n\n\t\t\t\t// If you disable TLS and current port is 6697,\n\t\t\t\t// set it to 6667, and vice versa\n\t\t\t\tif (props.defaults?.port === ports[newPort]) {\n\t\t\t\t\tprops.defaults.port = ports[1 - newPort];\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tconst setSaslAuth = (type: string) => {\n\t\t\tif (props.defaults) {\n\t\t\t\tprops.defaults.sasl = type;\n\t\t\t}\n\t\t};\n\n\t\tconst usernameInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst onNickChanged = (event: Event) => {\n\t\t\tif (!usernameInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst usernameRef = usernameInput.value;\n\n\t\t\tif (!usernameRef.value || usernameRef.value === previousUsername.value) {\n\t\t\t\tusernameRef.value = (event.target as HTMLInputElement)?.value;\n\t\t\t}\n\n\t\t\tpreviousUsername.value = (event.target as HTMLInputElement)?.value;\n\t\t};\n\n\t\tconst onSubmit = (event: Event) => {\n\t\t\tconst formData = new FormData(event.target as HTMLFormElement);\n\t\t\tconst data: Partial<ClientNetwork> = {};\n\n\t\t\tformData.forEach((value, key) => {\n\t\t\t\tdata[key] = value;\n\t\t\t});\n\n\t\t\tprops.handleSubmit(data as ClientNetwork);\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tconfig,\n\t\t\tdisplayPasswordField,\n\t\t\tpublicPassword,\n\t\t\tcommandsInput,\n\t\t\tresizeCommandsInput,\n\t\t\tsetSaslAuth,\n\t\t\tusernameInput,\n\t\t\tonNickChanged,\n\t\t\tonSubmit,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<button class=\"lt\" aria-label=\"Toggle channel list\" @click=\"store.commit('toggleSidebar')\" />\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"SidebarToggle\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./SidebarToggle.vue?vue&type=template&id=5256e772&ts=true\"\nimport script from \"./SidebarToggle.vue?vue&type=script&lang=ts\"\nexport * from \"./SidebarToggle.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkForm.vue?vue&type=template&id=7d6ce570&ts=true\"\nimport script from \"./NetworkForm.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkForm.vue?vue&type=script&lang=ts\"\n\nimport \"./NetworkForm.vue?vue&type=style&index=0&id=7d6ce570&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<NetworkForm :handle-submit=\"handleSubmit\" :defaults=\"defaults\" :disabled=\"disabled\" />\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\n\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport NetworkForm, {NetworkFormDefaults} from \"../NetworkForm.vue\";\n\nexport default defineComponent({\n\tname: \"Connect\",\n\tcomponents: {\n\t\tNetworkForm,\n\t},\n\tprops: {\n\t\tqueryParams: Object,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst disabled = ref(false);\n\n\t\tconst handleSubmit = (data: Record<string, any>) => {\n\t\t\tdisabled.value = true;\n\t\t\tsocket.emit(\"network:new\", data);\n\t\t};\n\n\t\tconst parseOverrideParams = (params?: Record<string, string>) => {\n\t\t\tif (!params) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst parsedParams: Record<string, any> = {};\n\n\t\t\tfor (let key of Object.keys(params)) {\n\t\t\t\tlet value = params[key];\n\n\t\t\t\t// Param can contain multiple values in an array if its supplied more than once\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue = value[0];\n\t\t\t\t}\n\n\t\t\t\t// Support `channels` as a compatibility alias with other clients\n\t\t\t\tif (key === \"channels\") {\n\t\t\t\t\tkey = \"join\";\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!Object.prototype.hasOwnProperty.call(\n\t\t\t\t\t\tstore.state.serverConfiguration?.defaults,\n\t\t\t\t\t\tkey\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// When the network is locked, URL overrides should not affect disabled fields\n\t\t\t\tif (\n\t\t\t\t\tstore.state.serverConfiguration?.lockNetwork &&\n\t\t\t\t\t[\"name\", \"host\", \"port\", \"tls\", \"rejectUnauthorized\"].includes(key)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (key === \"join\") {\n\t\t\t\t\tvalue = value\n\t\t\t\t\t\t.split(\",\")\n\t\t\t\t\t\t.map((chan) => {\n\t\t\t\t\t\t\tif (!chan.match(/^[#&!+]/)) {\n\t\t\t\t\t\t\t\treturn `#${chan}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn chan;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(\", \");\n\t\t\t\t}\n\n\t\t\t\t// Override server provided defaults with parameters passed in the URL if they match the data type\n\t\t\t\tswitch (typeof store.state.serverConfiguration?.defaults[key]) {\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tif (value === \"0\" || value === \"false\") {\n\t\t\t\t\t\t\tparsedParams[key] = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsedParams[key] = !!value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\tparsedParams[key] = Number(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tparsedParams[key] = String(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn parsedParams;\n\t\t};\n\n\t\tconst defaults = ref<Partial<NetworkFormDefaults>>(\n\t\t\tObject.assign(\n\t\t\t\t{},\n\t\t\t\tstore.state.serverConfiguration?.defaults,\n\t\t\t\tparseOverrideParams(props.queryParams)\n\t\t\t)\n\t\t);\n\n\t\treturn {\n\t\t\tdefaults,\n\t\t\tdisabled,\n\t\t\thandleSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Connect.vue?vue&type=template&id=3ec80d95&ts=true\"\nimport script from \"./Connect.vue?vue&type=script&lang=ts\"\nexport * from \"./Connect.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"settings\" class=\"window\" role=\"tabpanel\" aria-label=\"Settings\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<Navigation />\n\n\t\t<div class=\"container\">\n\t\t\t<form ref=\"settingsForm\" autocomplete=\"off\" @change=\"onChange\" @submit.prevent>\n\t\t\t\t<router-view></router-view>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport Navigation from \"../Settings/Navigation.vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"Settings\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tNavigation,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst onChange = (event: Event) => {\n\t\t\tconst ignore = [\"old_password\", \"new_password\", \"verify_password\"];\n\n\t\t\tconst name = (event.target as HTMLInputElement).name;\n\n\t\t\tif (ignore.includes(name)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet value: boolean | string;\n\n\t\t\tif ((event.target as HTMLInputElement).type === \"checkbox\") {\n\t\t\t\tvalue = (event.target as HTMLInputElement).checked;\n\t\t\t} else {\n\t\t\t\tvalue = (event.target as HTMLInputElement).value;\n\t\t\t}\n\n\t\t\tvoid store.dispatch(\"settings/update\", {name, value, sync: true});\n\t\t};\n\n\t\treturn {\n\t\t\tonChange,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<!-- 220px is the width of the sidebar, and we add 100px to allow for the text -->\n\t<aside class=\"settings-menu\">\n\t\t<h2>Settings</h2>\n\t\t<ul role=\"navigation\" aria-label=\"Settings tabs\">\n\t\t\t<SettingTabItem name=\"General\" class-name=\"general\" to=\"\" />\n\t\t\t<SettingTabItem name=\"Appearance\" class-name=\"appearance\" to=\"appearance\" />\n\t\t\t<SettingTabItem name=\"Notifications\" class-name=\"notifications\" to=\"notifications\" />\n\t\t\t<SettingTabItem name=\"Account\" class-name=\"account\" to=\"account\" />\n\t\t</ul>\n\t</aside>\n</template>\n\n<style>\n.settings-menu {\n\tposition: fixed;\n\t/* top: Header + (padding bottom of h2 - border) */\n\ttop: calc(45px + 5px);\n\t/* Mid page minus width of container and 30 pixels for padding */\n\tmargin-left: calc(50% - 480px - 30px);\n}\n\n/** The calculation is mobile +  2/3 of container width. Fairly arbitrary. */\n@media screen and (max-width: calc(768px + 320px)) {\n\t.settings-menu {\n\t\tposition: static;\n\t\twidth: min(480px, 100%);\n\t\talign-self: center;\n\t\tmargin: 0 auto;\n\t\tpadding: 0 15px;\n\t}\n}\n\n.settings-menu ul {\n\tpadding: 0;\n}\n\n.settings-menu li {\n\tfont-size: 18px;\n\tlist-style: none;\n}\n\n.settings-menu button {\n\tcolor: var(--body-color-muted);\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: inline-block;\n\ttext-align: left;\n}\n\n.settings-menu li:not(:last-of-type) button {\n\tmargin-bottom: 8px;\n}\n\n.settings-menu button::before {\n\twidth: 18px;\n\theight: 18px;\n\tdisplay: inline-block;\n\tcontent: \"\";\n\tmargin-right: 8px;\n}\n\n.settings-menu .appearance::before {\n\tcontent: \"\\f108\"; /* http://fontawesome.io/icon/desktop/ */\n}\n\n.settings-menu .account::before {\n\tcontent: \"\\f007\"; /* http://fontawesome.io/icon/user/ */\n}\n\n.settings-menu .messages::before {\n\tcontent: \"\\f0e0\"; /* http://fontawesome.io/icon/envelope/ */\n}\n\n.settings-menu .notifications::before {\n\tcontent: \"\\f0f3\"; /* http://fontawesome.io/icon/bell/ */\n}\n\n.settings-menu .general::before {\n\tcontent: \"\\f013\"; /* http://fontawesome.io/icon/cog/ */\n}\n\n.settings-menu button:hover,\n.settings-menu button.active {\n\tcolor: var(--body-color);\n}\n\n.settings-menu button.active {\n\tcursor: default;\n}\n</style>\n\n<script lang=\"ts\">\nimport SettingTabItem from \"./SettingTabItem.vue\";\nimport {defineComponent} from \"vue\";\n\nexport default defineComponent({\n\tname: \"SettingsTabs\",\n\tcomponents: {\n\t\tSettingTabItem,\n\t},\n});\n</script>\n","<template>\n\t<li :aria-label=\"name\" role=\"tab\" :aria-selected=\"route.name === name\" aria-controls=\"settings\">\n\t\t<router-link v-slot:default=\"{navigate, isExactActive}\" :to=\"'/settings/' + to\" custom>\n\t\t\t<button\n\t\t\t\t:class=\"['icon', className, {active: isExactActive}]\"\n\t\t\t\t@click=\"navigate\"\n\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t>\n\t\t\t\t{{ name }}\n\t\t\t</button>\n\t\t</router-link>\n\t</li>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useRoute} from \"vue-router\";\n\nexport default defineComponent({\n\tname: \"SettingTabListItem\",\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tto: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\n\t\treturn {\n\t\t\troute,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./SettingTabItem.vue?vue&type=template&id=3df3582f&ts=true\"\nimport script from \"./SettingTabItem.vue?vue&type=script&lang=ts\"\nexport * from \"./SettingTabItem.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Navigation.vue?vue&type=template&id=29a7cecc&ts=true\"\nimport script from \"./Navigation.vue?vue&type=script&lang=ts\"\nexport * from \"./Navigation.vue?vue&type=script&lang=ts\"\n\nimport \"./Navigation.vue?vue&type=style&index=0&id=29a7cecc&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Settings.vue?vue&type=template&id=7dcb681f&ts=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"help\" class=\"window\" role=\"tabpanel\" aria-label=\"Help\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<h1 class=\"title\">Help</h1>\n\n\t\t\t<h2 class=\"help-version-title\">\n\t\t\t\t<span>About The Lounge</span>\n\t\t\t\t<small>\n\t\t\t\t\tv{{ store.state.serverConfiguration?.version }} (<router-link\n\t\t\t\t\t\tid=\"view-changelog\"\n\t\t\t\t\t\tto=\"/changelog\"\n\t\t\t\t\t\t>release notes</router-link\n\t\t\t\t\t>)\n\t\t\t\t</small>\n\t\t\t</h2>\n\n\t\t\t<div class=\"about\">\n\t\t\t\t<VersionChecker />\n\n\t\t\t\t<template v-if=\"store.state.serverConfiguration?.gitCommit\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThe Lounge is running from source (<a\n\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/tree/${store.state.serverConfiguration?.gitCommit}`\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>commit <code>{{ store.state.serverConfiguration?.gitCommit }}</code></a\n\t\t\t\t\t\t>).\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tCompare\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/compare/${store.state.serverConfiguration?.gitCommit}...master`\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>between\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.gitCommit }}</code> and\n\t\t\t\t\t\t\t\t<code>master</code></a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto see what you are missing\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tCompare\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/compare/${store.state.serverConfiguration?.version}...${store.state.serverConfiguration?.gitCommit}`\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>between\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.version }}</code> and\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.gitCommit }}</code></a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto see your local changes\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</template>\n\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://thelounge.chat/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"website-link\"\n\t\t\t\t\t\t>Website</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://thelounge.chat/docs/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"documentation-link\"\n\t\t\t\t\t\t>Documentation</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://github.com/thelounge/thelounge/issues/new\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"report-issue-link\"\n\t\t\t\t\t\t>Report an issue</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<h2 v-if=\"isTouch\">Gestures</h2>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Single-Finger Swipe Left</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Hide sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Single-Finger Swipe Right</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Show sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Two-Finger Swipe Left</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Two-Finger Swipe Right</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Keyboard Shortcuts</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next lobby in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous lobby in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Collapse current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Expand current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Ctrl</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next window with unread messages in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Ctrl</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous window with unread messages in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>A</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>A</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the first window with unread messages.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>S</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>S</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>U</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>U</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle channel user list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>J</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>J</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle jump to channel switcher.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>M</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>M</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle recent mentions popup.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>/</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>/</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the help menu.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span><kbd>Esc</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tClose current contextual window (context menu, image viewer, topic edit,\n\t\t\t\t\t\tetc) and remove focus from input.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Formatting Shortcuts</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>K</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>K</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark any text typed after this shortcut to be colored. After hitting this\n\t\t\t\t\t\tshortcut, enter an integer in the range\n\t\t\t\t\t\t<code>015</code> to select the desired color, or use the autocompletion\n\t\t\t\t\t\tmenu to choose a color name (see below).\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBackground color can be specified by putting a comma and another integer in\n\t\t\t\t\t\tthe range <code>015</code> after the foreground color number\n\t\t\t\t\t\t(autocompletion works too).\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tA color reference can be found\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://modern.ircdocs.horse/formatting.html#colors\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>here</a\n\t\t\t\t\t\t>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>B</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>B</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-bold\">bold</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>U</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>U</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-underline\">underlined</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>I</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>I</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-italic\">italics</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>S</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>S</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-strikethrough\">struck through</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>M</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>M</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-monospace\">monospaced</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>O</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>O</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut to be reset to its original\n\t\t\t\t\t\tformatting.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Autocompletion</h2>\n\n\t\t\t<p>\n\t\t\t\tTo auto-complete nicknames, channels, commands, and emoji, type one of the\n\t\t\t\tcharacters below to open a suggestion list. Use the <kbd></kbd> and\n\t\t\t\t<kbd></kbd> keys to highlight an item, and insert it by pressing <kbd>Tab</kbd> or\n\t\t\t\t<kbd>Enter</kbd> (or by clicking the desired item).\n\t\t\t</p>\n\t\t\t<p>Autocompletion can be disabled in settings.</p>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>@</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Nickname</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>#</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Channel</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Commands (see list of commands below)</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>:</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tEmoji (note: requires two search characters, to avoid conflicting with\n\t\t\t\t\t\tcommon emoticons like <code>:)</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Commands</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/away [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Mark yourself as away with an optional message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/back</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Remove your away status (set with <code>/away</code>).</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ban nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBan (<code>+b</code>) a user from the current channel. This can be a\n\t\t\t\t\t\tnickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/banlist</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Load the banlist for the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/collapse</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tCollapse all previews in the current channel (opposite of\n\t\t\t\t\t\t<code>/expand</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/connect host [port]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tConnect to a new IRC network. If <code>port</code> starts with a\n\t\t\t\t\t\t<code>+</code> sign, the connection will be made secure using TLS.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Alias: <code>/server</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ctcp target cmd [args]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend a <abbr title=\"Client-to-client protocol\">CTCP</abbr>\n\t\t\t\t\t\trequest. Read more about this on\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://en.wikipedia.org/wiki/Client-to-client_protocol\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>the dedicated Wikipedia article</a\n\t\t\t\t\t\t>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/deop nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tRemove op (<code>-o</code>) from one or several users in the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/devoice nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tRemove voice (<code>-v</code>) from one or several users in the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/disconnect [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Disconnect from the current network with an optionally-provided message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/expand</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tExpand all previews in the current channel (opposite of\n\t\t\t\t\t\t<code>/collapse</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/invite nick [channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tInvite a user to the specified channel. If\n\t\t\t\t\t\t<code>channel</code> is omitted, user will be invited to the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ignore nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBlock any messages from the specified user on the current network. This can\n\t\t\t\t\t\tbe a nickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ignorelist</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Load the list of ignored users for the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/join channel [password]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tJoin a channel. Password is only needed in protected channels and can\n\t\t\t\t\t\tusually be omitted.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/kick nick [reason]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Kick a user from the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/kickban nick [reason]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tKick and ban (<code>+b</code>) a user from the current channel. Unlike\n\t\t\t\t\t\t<code>/ban</code>, only nicknames (and not host masks) can be used.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/list</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Retrieve a list of available channels on this network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/me message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend an action message to the current channel. The Lounge will display it\n\t\t\t\t\t\tinline, as if the message was posted in the third person.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/mode flags [args]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSet the given flags to the current channel if the active window is a\n\t\t\t\t\t\tchannel, another user if the active window is a private message window, or\n\t\t\t\t\t\tyourself if the current window is a server window.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/msg channel message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a message to the specified channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/mute [...channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tPrevent messages from generating any feedback for a channel. This turns off\n\t\t\t\t\t\tthe highlight indicator, hides mentions and inhibits push notifications.\n\t\t\t\t\t\tMuting a network lobby mutes the entire network. Not specifying any channel\n\t\t\t\t\t\ttarget mutes the current channel. Revert with <code>/unmute</code>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/nick newnick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Change your nickname on the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/notice channel message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Sends a notice message to the specified channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/op nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Give op (<code>+o</code>) to one or several users in the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/part [channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tClose the specified channel or private message window, or the current\n\t\t\t\t\t\tchannel if <code>channel</code> is omitted.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Aliases: <code>/close</code>, <code>/leave</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/rejoin</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tLeave and immediately rejoin the current channel. Useful to quickly get op\n\t\t\t\t\t\tfrom ChanServ in an empty channel, for example.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Alias: <code>/cycle</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/query nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a private message to the specified user.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/quit [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Disconnect from the current network with an optional message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/raw message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a raw message to the current IRC network.</p>\n\t\t\t\t\t<p>Aliases: <code>/quote</code>, <code>/send</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/slap nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Slap someone in the current channel with a trout!</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"store.state.settings.searchEnabled\" class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/search query</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Search for messages in the current channel / user</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/topic [newtopic]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tGet the topic in the current channel. If <code>newtopic</code> is specified,\n\t\t\t\t\t\tsets the topic in the current channel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unban nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUnban (<code>-b</code>) a user from the current channel. This can be a\n\t\t\t\t\t\tnickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unignore nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUnblock messages from the specified user on the current network. This can be\n\t\t\t\t\t\ta nickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unmute [...channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUn-mutes the given channel(s) or the current channel if no channel is\n\t\t\t\t\t\tprovided. See <code>/mute</code> for more information.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/voice nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tGive voice (<code>+v</code>) to one or several users in the current channel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/whois nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Retrieve information about the given user on the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport VersionChecker from \"../VersionChecker.vue\";\n\nexport default defineComponent({\n\tname: \"Help\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tVersionChecker,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst isApple = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) || false;\n\t\tconst isTouch = navigator.maxTouchPoints > 0;\n\n\t\treturn {\n\t\t\tisApple,\n\t\t\tisTouch,\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div id=\"version-checker\" :class=\"[store.state.versionStatus]\">\n\t\t<p v-if=\"store.state.versionStatus === 'loading'\">Checking for updates</p>\n\t\t<p v-if=\"store.state.versionStatus === 'new-version'\">\n\t\t\tThe Lounge <b>{{ store.state.versionData?.latest.version }}</b>\n\t\t\t<template v-if=\"store.state.versionData?.latest.prerelease\"> (pre-release) </template>\n\t\t\tis now available.\n\t\t\t<br />\n\n\t\t\t<a :href=\"store.state.versionData?.latest.url\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\tRead more on GitHub\n\t\t\t</a>\n\t\t</p>\n\t\t<p v-if=\"store.state.versionStatus === 'new-packages'\">\n\t\t\tThe Lounge is up to date, but there are out of date packages Run\n\t\t\t<code>thelounge upgrade</code> on the server to upgrade packages.\n\t\t</p>\n\t\t<template v-if=\"store.state.versionStatus === 'up-to-date'\">\n\t\t\t<p>The Lounge is up to date!</p>\n\n\t\t\t<button\n\t\t\t\tv-if=\"store.state.versionDataExpired\"\n\t\t\t\tid=\"check-now\"\n\t\t\t\tclass=\"btn btn-small\"\n\t\t\t\t@click=\"checkNow\"\n\t\t\t>\n\t\t\t\tCheck now\n\t\t\t</button>\n\t\t</template>\n\t\t<template v-if=\"store.state.versionStatus === 'error'\">\n\t\t\t<p>Information about latest release could not be retrieved.</p>\n\n\t\t\t<button id=\"check-now\" class=\"btn btn-small\" @click=\"checkNow\">Try again</button>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted} from \"vue\";\nimport socket from \"../js/socket\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"VersionChecker\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst checkNow = () => {\n\t\t\tstore.commit(\"versionData\", null);\n\t\t\tstore.commit(\"versionStatus\", \"loading\");\n\t\t\tsocket.emit(\"changelog\");\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (!store.state.versionData) {\n\t\t\t\tcheckNow();\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tcheckNow,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./VersionChecker.vue?vue&type=template&id=522019e6&ts=true\"\nimport script from \"./VersionChecker.vue?vue&type=script&lang=ts\"\nexport * from \"./VersionChecker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Help.vue?vue&type=template&id=6c125efa&ts=true\"\nimport script from \"./Help.vue?vue&type=script&lang=ts\"\nexport * from \"./Help.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"changelog\" class=\"window\" aria-label=\"Changelog\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<router-link id=\"back-to-help\" to=\"/help\"> Help</router-link>\n\n\t\t\t<template\n\t\t\t\tv-if=\"store.state.versionData?.current && store.state.versionData?.current.version\"\n\t\t\t>\n\t\t\t\t<h1 class=\"title\">\n\t\t\t\t\tRelease notes for {{ store.state.versionData.current.version }}\n\t\t\t\t</h1>\n\n\t\t\t\t<template v-if=\"store.state.versionData.current.changelog\">\n\t\t\t\t\t<h3>Introduction</h3>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"changelog\"\n\t\t\t\t\t\tclass=\"changelog-text\"\n\t\t\t\t\t\tv-html=\"store.state.versionData.current.changelog\"\n\t\t\t\t\t></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<p>Unable to retrieve changelog for current release from GitHub.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-if=\"store.state.serverConfiguration?.version\"\n\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/releases/tag/v${store.state.serverConfiguration?.version}`\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>View release notes for this version on GitHub</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</p>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<p v-else>Loading changelog</p>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted, onUpdated, ref} from \"vue\";\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\n\nexport default defineComponent({\n\tname: \"Changelog\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst changelog = ref<HTMLDivElement | null>(null);\n\n\t\tconst patchChangelog = () => {\n\t\t\tif (!changelog.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst links = changelog.value.querySelectorAll(\"a\");\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\t// Make sure all links will open a new tab instead of exiting the application\n\t\t\t\tlink.setAttribute(\"target\", \"_blank\");\n\t\t\t\tlink.setAttribute(\"rel\", \"noopener\");\n\n\t\t\t\tif (link.querySelector(\"img\")) {\n\t\t\t\t\t// Add required metadata to image links, to support built-in image viewer\n\t\t\t\t\tlink.classList.add(\"toggle-thumbnail\");\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (!store.state.versionData) {\n\t\t\t\tsocket.emit(\"changelog\");\n\t\t\t}\n\n\t\t\tpatchChangelog();\n\t\t});\n\n\t\tonUpdated(() => {\n\t\t\tpatchChangelog();\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Changelog.vue?vue&type=template&id=cdf28376&ts=true\"\nimport script from \"./Changelog.vue?vue&type=script&lang=ts\"\nexport * from \"./Changelog.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<NetworkForm\n\t\tv-if=\"networkData\"\n\t\t:handle-submit=\"handleSubmit\"\n\t\t:defaults=\"networkData\"\n\t\t:disabled=\"disabled\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted, ref, watch} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {switchToChannel} from \"../../js/router\";\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport NetworkForm, {NetworkFormDefaults} from \"../NetworkForm.vue\";\n\nexport default defineComponent({\n\tname: \"NetworkEdit\",\n\tcomponents: {\n\t\tNetworkForm,\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\t\tconst store = useStore();\n\n\t\tconst disabled = ref(false);\n\t\tconst networkData = ref<NetworkFormDefaults | null>(null);\n\n\t\tconst setNetworkData = () => {\n\t\t\tsocket.emit(\"network:get\", String(route.params.uuid || \"\"));\n\t\t\tnetworkData.value = store.getters.findNetwork(String(route.params.uuid || \"\"));\n\t\t};\n\n\t\tconst handleSubmit = (data: {uuid: string; name: string}) => {\n\t\t\tdisabled.value = true;\n\t\t\tsocket.emit(\"network:edit\", data);\n\n\t\t\t// TODO: move networks to vuex and update state when the network info comes in\n\t\t\tconst network = store.getters.findNetwork(data.uuid);\n\n\t\t\tif (network) {\n\t\t\t\tnetwork.name = network.channels[0].name = data.name;\n\n\t\t\t\tswitchToChannel(network.channels[0]);\n\t\t\t}\n\t\t};\n\n\t\twatch(\n\t\t\t() => route.params.uuid,\n\t\t\t(newValue) => {\n\t\t\t\tsetNetworkData();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\tsetNetworkData();\n\t\t});\n\n\t\treturn {\n\t\t\tdisabled,\n\t\t\tnetworkData,\n\t\t\thandleSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./NetworkEdit.vue?vue&type=template&id=7e54a048&ts=true\"\nimport script from \"./NetworkEdit.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkEdit.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"chat-container\" class=\"window\">\n\t\t<div\n\t\t\tid=\"chat\"\n\t\t\t:class=\"{\n\t\t\t\t'time-seconds': store.state.settings.showSeconds,\n\t\t\t\t'time-12h': store.state.settings.use12hClock,\n\t\t\t}\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"chat-view\"\n\t\t\t\tdata-type=\"search-results\"\n\t\t\t\taria-label=\"Search results\"\n\t\t\t\trole=\"tabpanel\"\n\t\t\t>\n\t\t\t\t<div v-if=\"network && channel\" class=\"header\">\n\t\t\t\t\t<SidebarToggle />\n\t\t\t\t\t<span class=\"title\"\n\t\t\t\t\t\t>Searching in <span class=\"channel-name\">{{ channel.name }}</span> for</span\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"topic\">{{ route.query.q }}</span>\n\t\t\t\t\t<MessageSearchForm :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"close\"\n\t\t\t\t\t\taria-label=\"Close search window\"\n\t\t\t\t\t\ttitle=\"Close search window\"\n\t\t\t\t\t\t@click=\"closeSearch\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"network && channel\" class=\"chat-content\">\n\t\t\t\t\t<div ref=\"chat\" class=\"chat\" tabindex=\"-1\">\n\t\t\t\t\t\t<div v-show=\"moreResultsAvailable\" class=\"show-more\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tref=\"loadMoreButton\"\n\t\t\t\t\t\t\t\t:disabled=\"\n\t\t\t\t\t\t\t\t\t!!store.state.messageSearchPendingQuery ||\n\t\t\t\t\t\t\t\t\t!store.state.isConnected\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t\t@click=\"onShowMoreClick\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span v-if=\"store.state.messageSearchPendingQuery\">Loading</span>\n\t\t\t\t\t\t\t\t<span v-else>Show older messages</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"store.state.messageSearchPendingQuery && !offset\"\n\t\t\t\t\t\t\tclass=\"search-status\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSearching\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else-if=\"!messages.length && !offset\" class=\"search-status\">\n\t\t\t\t\t\t\tNo results found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"messages\"\n\t\t\t\t\t\t\trole=\"log\"\n\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t\taria-relevant=\"additions\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-for=\"(message, id) in messages\"\n\t\t\t\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t\t\t\tclass=\"result\"\n\t\t\t\t\t\t\t\t@click=\"jump(message, id)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DateMarker\n\t\t\t\t\t\t\t\t\tv-if=\"shouldDisplayDateMarker(message, id)\"\n\t\t\t\t\t\t\t\t\t:key=\"message.id + '-date'\"\n\t\t\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t\t\t:data-id=\"message.id\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n.channel-name {\n\tfont-weight: 700;\n}\n</style>\n\n<script lang=\"ts\">\nimport socket from \"../../js/socket\";\nimport eventbus from \"../../js/eventbus\";\n\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport Message from \"../Message.vue\";\nimport MessageSearchForm from \"../MessageSearchForm.vue\";\nimport DateMarker from \"../DateMarker.vue\";\nimport {watch, computed, defineComponent, nextTick, ref, onMounted, onUnmounted} from \"vue\";\nimport type {ClientMessage} from \"../../js/types\";\n\nimport {useStore} from \"../../js/store\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport {switchToChannel} from \"../../js/router\";\nimport {SearchQuery} from \"../../../server/plugins/messageStorage/types\";\n\nexport default defineComponent({\n\tname: \"SearchResults\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tMessage,\n\t\tDateMarker,\n\t\tMessageSearchForm,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst route = useRoute();\n\t\tconst router = useRouter();\n\n\t\tconst chat = ref<HTMLDivElement>();\n\n\t\tconst loadMoreButton = ref<HTMLButtonElement>();\n\n\t\tconst offset = ref(0);\n\t\tconst moreResultsAvailable = ref(false);\n\t\tconst oldScrollTop = ref(0);\n\t\tconst oldChatHeight = ref(0);\n\n\t\tconst messages = computed(() => {\n\t\t\tconst results = store.state.messageSearchResults?.results;\n\n\t\t\tif (!results) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn results;\n\t\t});\n\n\t\tconst chan = computed(() => {\n\t\t\tconst chanId = parseInt(String(route.params.id || \"\"), 10);\n\t\t\treturn store.getters.findChannel(chanId);\n\t\t});\n\n\t\tconst network = computed(() => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn chan.value.network;\n\t\t});\n\n\t\tconst channel = computed(() => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn chan.value.channel;\n\t\t});\n\n\t\tconst setActiveChannel = () => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstore.commit(\"activeChannel\", chan.value);\n\t\t};\n\n\t\tconst closeSearch = () => {\n\t\t\tif (!channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitchToChannel(channel.value);\n\t\t};\n\n\t\tconst shouldDisplayDateMarker = (message: ClientMessage, id: number) => {\n\t\t\tconst previousMessage = messages.value[id - 1];\n\n\t\t\tif (!previousMessage) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn new Date(previousMessage.time).getDay() !== new Date(message.time).getDay();\n\t\t};\n\n\t\tconst clearSearchState = () => {\n\t\t\toffset.value = 0;\n\t\t\tstore.commit(\"messageSearchResults\", null);\n\t\t\tstore.commit(\"messageSearchPendingQuery\", null);\n\t\t};\n\n\t\tconst doSearch = () => {\n\t\t\tif (!network.value || !channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearSearchState(); // this is a new search, so we need to clear anything before that\n\t\t\tconst query: SearchQuery = {\n\t\t\t\tnetworkUuid: network.value.uuid,\n\t\t\t\tchannelName: channel.value.name,\n\t\t\t\tsearchTerm: String(route.query.q || \"\"),\n\t\t\t\toffset: offset.value,\n\t\t\t};\n\t\t\tstore.commit(\"messageSearchPendingQuery\", query);\n\t\t\tsocket.emit(\"search\", query);\n\t\t};\n\n\t\tconst onShowMoreClick = () => {\n\t\t\tif (!chat.value || !network.value || !channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\toffset.value += 100;\n\n\t\t\toldScrollTop.value = chat.value.scrollTop;\n\t\t\toldChatHeight.value = chat.value.scrollHeight;\n\n\t\t\tconst query: SearchQuery = {\n\t\t\t\tnetworkUuid: network.value.uuid,\n\t\t\t\tchannelName: channel.value.name,\n\t\t\t\tsearchTerm: String(route.query.q || \"\"),\n\t\t\t\toffset: offset.value,\n\t\t\t};\n\t\t\tstore.commit(\"messageSearchPendingQuery\", query);\n\t\t\tsocket.emit(\"search\", query);\n\t\t};\n\n\t\tconst jumpToBottom = async () => {\n\t\t\tawait nextTick();\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tel.scrollTop = el.scrollHeight;\n\t\t};\n\n\t\tconst jump = (message: ClientMessage, id: number) => {\n\t\t\t// TODO: Implement jumping to messages!\n\t\t\t// This is difficult because it means client will need to handle a potentially nonlinear message set\n\t\t\t// (loading IntersectionObserver both before AND after the messages)\n\t\t};\n\n\t\twatch(\n\t\t\t() => route.params.id,\n\t\t\t() => {\n\t\t\t\tdoSearch();\n\t\t\t\tsetActiveChannel();\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => route.query,\n\t\t\t() => {\n\t\t\t\tdoSearch();\n\t\t\t\tsetActiveChannel();\n\t\t\t}\n\t\t);\n\n\t\twatch(messages, async () => {\n\t\t\tmoreResultsAvailable.value = !!(\n\t\t\t\tmessages.value.length && !(messages.value.length % 100)\n\t\t\t);\n\n\t\t\tif (!offset.value) {\n\t\t\t\tawait jumpToBottom();\n\t\t\t} else {\n\t\t\t\tawait nextTick();\n\n\t\t\t\tconst el = chat.value;\n\n\t\t\t\tif (!el) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentChatHeight = el.scrollHeight;\n\t\t\t\tel.scrollTop = oldScrollTop.value + currentChatHeight - oldChatHeight.value;\n\t\t\t}\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsetActiveChannel();\n\t\t\tdoSearch();\n\n\t\t\teventbus.on(\"escapekey\", closeSearch);\n\t\t\teventbus.on(\"re-search\", doSearch);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", closeSearch);\n\t\t\teventbus.off(\"re-search\", doSearch);\n\t\t\tclearSearchState();\n\t\t});\n\n\t\treturn {\n\t\t\tchat,\n\t\t\tloadMoreButton,\n\t\t\tmessages,\n\t\t\tmoreResultsAvailable,\n\t\t\tnetwork,\n\t\t\tchannel,\n\t\t\troute,\n\t\t\toffset,\n\t\t\tstore,\n\t\t\tsetActiveChannel,\n\t\t\tcloseSearch,\n\t\t\tshouldDisplayDateMarker,\n\t\t\tdoSearch,\n\t\t\tonShowMoreClick,\n\t\t\tjumpToBottom,\n\t\t\tjump,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\t:id=\"'msg-' + message.id\"\n\t\t:class=\"[\n\t\t\t'msg',\n\t\t\t{\n\t\t\t\tself: message.self,\n\t\t\t\thighlight: message.highlight || focused,\n\t\t\t\t'previous-source': isPreviousSource,\n\t\t\t},\n\t\t]\"\n\t\t:data-type=\"message.type\"\n\t\t:data-command=\"message.command\"\n\t\t:data-from=\"message.from && message.from.nick\"\n\t>\n\t\t<span\n\t\t\taria-hidden=\"true\"\n\t\t\t:aria-label=\"messageTimeLocale\"\n\t\t\tclass=\"time tooltipped tooltipped-e\"\n\t\t\t>{{ `${messageTime}&#32;` }}\n\t\t</span>\n\t\t<template v-if=\"message.type === 'unhandled'\">\n\t\t\t<span class=\"from\">[{{ message.command }}]</span>\n\t\t\t<span class=\"content\">\n\t\t\t\t<span v-for=\"(param, id) in message.params\" :key=\"id\">{{\n\t\t\t\t\t`&#32;${param}&#32;`\n\t\t\t\t}}</span>\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else-if=\"isAction()\">\n\t\t\t<span class=\"from\"><span class=\"only-copy\">***&nbsp;</span></span>\n\t\t\t<component :is=\"messageComponent\" :network=\"network\" :message=\"message\" />\n\t\t</template>\n\t\t<template v-else-if=\"message.type === 'action'\">\n\t\t\t<span class=\"from\"><span class=\"only-copy\">*&nbsp;</span></span>\n\t\t\t<span class=\"content\" dir=\"auto\">\n\t\t\t\t<Username\n\t\t\t\t\t:user=\"message.from\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\tdir=\"auto\"\n\t\t\t\t/>&#32;<ParsedMessage :message=\"message\" />\n\t\t\t\t<LinkPreview\n\t\t\t\t\tv-for=\"preview in message.previews\"\n\t\t\t\t\t:key=\"preview.link\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:link=\"preview\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<span v-if=\"message.type === 'message'\" class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">&lt;</span>\n\t\t\t\t\t<Username :user=\"message.from\" :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">&gt;&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span v-else-if=\"message.type === 'plugin'\" class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">[</span>\n\t\t\t\t\t{{ message.from.nick }}\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">]&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span v-else class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">-</span>\n\t\t\t\t\t<Username :user=\"message.from\" :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">-&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span class=\"content\" dir=\"auto\">\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"message.showInActive\"\n\t\t\t\t\taria-label=\"This message was shown in your active channel\"\n\t\t\t\t\tclass=\"msg-shown-in-active tooltipped tooltipped-e\"\n\t\t\t\t\t><span></span\n\t\t\t\t></span>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"message.statusmsgGroup\"\n\t\t\t\t\t:aria-label=\"`This message was only shown to users with ${message.statusmsgGroup} mode`\"\n\t\t\t\t\tclass=\"msg-statusmsg tooltipped tooltipped-e\"\n\t\t\t\t\t><span>{{ message.statusmsgGroup }}</span></span\n\t\t\t\t>\n\t\t\t\t<ParsedMessage :network=\"network\" :message=\"message\" />\n\t\t\t\t<LinkPreview\n\t\t\t\t\tv-for=\"preview in message.previews\"\n\t\t\t\t\t:key=\"preview.link\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:link=\"preview\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport dayjs from \"dayjs\";\n\nimport constants from \"../js/constants\";\nimport localetime from \"../js/helpers/localetime\";\nimport Username from \"./Username.vue\";\nimport LinkPreview from \"./LinkPreview.vue\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport MessageTypes from \"./MessageTypes\";\n\nimport type {ClientChan, ClientMessage, ClientNetwork} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nMessageTypes.ParsedMessage = ParsedMessage;\nMessageTypes.LinkPreview = LinkPreview;\nMessageTypes.Username = Username;\n\nexport default defineComponent({\n\tname: \"Message\",\n\tcomponents: MessageTypes,\n\tprops: {\n\t\tmessage: {type: Object as PropType<ClientMessage>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tkeepScrollPosition: Function as PropType<() => void>,\n\t\tisPreviousSource: Boolean,\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst timeFormat = computed(() => {\n\t\t\tlet format: keyof typeof constants.timeFormats;\n\n\t\t\tif (store.state.settings.use12hClock) {\n\t\t\t\tformat = store.state.settings.showSeconds ? \"msg12hWithSeconds\" : \"msg12h\";\n\t\t\t} else {\n\t\t\t\tformat = store.state.settings.showSeconds ? \"msgWithSeconds\" : \"msgDefault\";\n\t\t\t}\n\n\t\t\treturn constants.timeFormats[format];\n\t\t});\n\n\t\tconst messageTime = computed(() => {\n\t\t\treturn dayjs(props.message.time).format(timeFormat.value);\n\t\t});\n\n\t\tconst messageTimeLocale = computed(() => {\n\t\t\treturn localetime(props.message.time);\n\t\t});\n\n\t\tconst messageComponent = computed(() => {\n\t\t\treturn \"message-\" + props.message.type;\n\t\t});\n\n\t\tconst isAction = () => {\n\t\t\treturn typeof MessageTypes[\"message-\" + props.message.type] !== \"undefined\";\n\t\t};\n\n\t\treturn {\n\t\t\ttimeFormat,\n\t\t\tmessageTime,\n\t\t\tmessageTimeLocale,\n\t\t\tmessageComponent,\n\t\t\tisAction,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\tv-if=\"link.shown\"\n\t\tv-show=\"link.sourceLoaded || link.type === 'link'\"\n\t\tref=\"container\"\n\t\tclass=\"preview\"\n\t\tdir=\"ltr\"\n\t>\n\t\t<div\n\t\t\tref=\"content\"\n\t\t\t:class=\"['toggle-content', 'toggle-type-' + link.type, {opened: isContentShown}]\"\n\t\t>\n\t\t\t<template v-if=\"link.type === 'link'\">\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"link.thumb\"\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\tclass=\"toggle-thumbnail\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t@click=\"onThumbnailClick\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\t:src=\"link.thumb\"\n\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tclass=\"thumb\"\n\t\t\t\t\t\t@error=\"onThumbnailError\"\n\t\t\t\t\t\t@abort=\"onThumbnailError\"\n\t\t\t\t\t\t@load=\"onPreviewReady\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t<div class=\"toggle-text\" dir=\"auto\">\n\t\t\t\t\t<div class=\"head\">\n\t\t\t\t\t\t<div class=\"overflowable\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\t\t\t\t:title=\"link.head\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>{{ link.head }}</a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"showMoreButton\"\n\t\t\t\t\t\t\t:aria-expanded=\"isContentShown\"\n\t\t\t\t\t\t\t:aria-label=\"moreButtonLabel\"\n\t\t\t\t\t\t\tdir=\"auto\"\n\t\t\t\t\t\t\tclass=\"more\"\n\t\t\t\t\t\t\t@click=\"onMoreClick\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"more-caret\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"body overflowable\">\n\t\t\t\t\t\t<a :href=\"link.link\" :title=\"link.body\" target=\"_blank\" rel=\"noopener\">{{\n\t\t\t\t\t\t\tlink.body\n\t\t\t\t\t\t}}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'image'\">\n\t\t\t\t<a\n\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\tclass=\"toggle-thumbnail\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t@click=\"onThumbnailClick\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\t\t:src=\"link.thumb\"\n\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t@load=\"onPreviewReady\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'video'\">\n\t\t\t\t<video\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\tcontrols\n\t\t\t\t\t@canplay=\"onPreviewReady\"\n\t\t\t\t>\n\t\t\t\t\t<source :src=\"link.media\" :type=\"link.mediaType\" />\n\t\t\t\t</video>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'audio'\">\n\t\t\t\t<audio\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\tcontrols\n\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\t@canplay=\"onPreviewReady\"\n\t\t\t\t>\n\t\t\t\t\t<source :src=\"link.media\" :type=\"link.mediaType\" />\n\t\t\t\t</audio>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'error'\">\n\t\t\t\t<em v-if=\"link.error === 'image-too-big'\">\n\t\t\t\t\tThis image is larger than {{ imageMaxSize }} and cannot be previewed.\n\t\t\t\t\t<a :href=\"link.link\" target=\"_blank\" rel=\"noopener\">Click here</a>\n\t\t\t\t\tto open it in a new window.\n\t\t\t\t</em>\n\t\t\t\t<template v-else-if=\"link.error === 'message'\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<em>\n\t\t\t\t\t\t\tA preview could not be loaded.\n\t\t\t\t\t\t\t<a :href=\"link.link\" target=\"_blank\" rel=\"noopener\">Click here</a>\n\t\t\t\t\t\t\tto open it in a new window.\n\t\t\t\t\t\t</em>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<pre class=\"prefetch-error\">{{ link.message }}</pre>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\t:aria-expanded=\"isContentShown\"\n\t\t\t\t\t\t:aria-label=\"moreButtonLabel\"\n\t\t\t\t\t\tclass=\"more\"\n\t\t\t\t\t\t@click=\"onMoreClick\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"more-caret\" />\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {\n\tcomputed,\n\tdefineComponent,\n\tinject,\n\tnextTick,\n\tonBeforeUnmount,\n\tonMounted,\n\tonUnmounted,\n\tPropType,\n\tref,\n\twatch,\n} from \"vue\";\nimport {onBeforeRouteUpdate} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport friendlysize from \"../js/helpers/friendlysize\";\nimport {useStore} from \"../js/store\";\nimport type {ClientChan, ClientLinkPreview} from \"../js/types\";\nimport {imageViewerKey} from \"./App.vue\";\n\nexport default defineComponent({\n\tname: \"LinkPreview\",\n\tprops: {\n\t\tlink: {\n\t\t\ttype: Object as PropType<ClientLinkPreview>,\n\t\t\trequired: true,\n\t\t},\n\t\tkeepScrollPosition: {\n\t\t\ttype: Function as PropType<() => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst showMoreButton = ref(false);\n\t\tconst isContentShown = ref(false);\n\t\tconst imageViewer = inject(imageViewerKey);\n\n\t\tonBeforeRouteUpdate((to, from, next) => {\n\t\t\t// cancel the navigation if the user is trying to close the image viewer\n\t\t\tif (imageViewer?.value?.link) {\n\t\t\t\timageViewer.value.closeViewer();\n\t\t\t\treturn next(false);\n\t\t\t}\n\n\t\t\tnext();\n\t\t});\n\n\t\tconst content = ref<HTMLDivElement | null>(null);\n\t\tconst container = ref<HTMLDivElement | null>(null);\n\n\t\tconst moreButtonLabel = computed(() => {\n\t\t\treturn isContentShown.value ? \"Less\" : \"More\";\n\t\t});\n\n\t\tconst imageMaxSize = computed(() => {\n\t\t\tif (!props.link.maxSize) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn friendlysize(props.link.maxSize);\n\t\t});\n\n\t\tconst handleResize = () => {\n\t\t\tnextTick(() => {\n\t\t\t\tif (!content.value || !container.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tshowMoreButton.value = content.value.offsetWidth >= container.value.offsetWidth;\n\t\t\t}).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(\"Error in LinkPreview.handleResize\", e);\n\t\t\t});\n\t\t};\n\n\t\tconst onPreviewReady = () => {\n\t\t\tprops.link.sourceLoaded = true;\n\n\t\t\tprops.keepScrollPosition();\n\n\t\t\tif (props.link.type === \"link\") {\n\t\t\t\thandleResize();\n\t\t\t}\n\t\t};\n\n\t\tconst onPreviewUpdate = () => {\n\t\t\t// Don't display previews while they are loading on the server\n\t\t\tif (props.link.type === \"loading\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Error does not have any media to render\n\t\t\tif (props.link.type === \"error\") {\n\t\t\t\tonPreviewReady();\n\t\t\t}\n\n\t\t\t// If link doesn't have a thumbnail, render it\n\t\t\tif (props.link.type === \"link\") {\n\t\t\t\thandleResize();\n\t\t\t\tprops.keepScrollPosition();\n\t\t\t}\n\t\t};\n\n\t\tconst onThumbnailError = () => {\n\t\t\t// If thumbnail fails to load, hide it and show the preview without it\n\t\t\tprops.link.thumb = \"\";\n\t\t\tonPreviewReady();\n\t\t};\n\n\t\tconst onThumbnailClick = (e: MouseEvent) => {\n\t\t\te.preventDefault();\n\n\t\t\tif (!imageViewer?.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\timageViewer.value.channel = props.channel;\n\t\t\timageViewer.value.link = props.link;\n\t\t};\n\n\t\tconst onMoreClick = () => {\n\t\t\tisContentShown.value = !isContentShown.value;\n\t\t\tprops.keepScrollPosition();\n\t\t};\n\n\t\tconst updateShownState = () => {\n\t\t\t// User has manually toggled the preview, do not apply default\n\t\t\tif (props.link.shown !== null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet defaultState = false;\n\n\t\t\tswitch (props.link.type) {\n\t\t\t\tcase \"error\":\n\t\t\t\t\t// Collapse all errors by default unless its a message about image being too big\n\t\t\t\t\tif (props.link.error === \"image-too-big\") {\n\t\t\t\t\t\tdefaultState = store.state.settings.media;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"link\":\n\t\t\t\t\tdefaultState = store.state.settings.links;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdefaultState = store.state.settings.media;\n\t\t\t}\n\n\t\t\tprops.link.shown = defaultState;\n\t\t};\n\n\t\tupdateShownState();\n\n\t\twatch(\n\t\t\t() => props.link.type,\n\t\t\t() => {\n\t\t\t\tupdateShownState();\n\t\t\t\tonPreviewUpdate();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"resize\", handleResize);\n\n\t\t\tonPreviewUpdate();\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"resize\", handleResize);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\t// Let this preview go through load/canplay events again,\n\t\t\t// Otherwise the browser can cause a resize on video elements\n\t\t\tprops.link.sourceLoaded = false;\n\t\t});\n\n\t\treturn {\n\t\t\tmoreButtonLabel,\n\t\t\timageMaxSize,\n\t\t\tonThumbnailClick,\n\t\t\tonThumbnailError,\n\t\t\tonMoreClick,\n\t\t\tonPreviewReady,\n\t\t\tonPreviewUpdate,\n\t\t\tshowMoreButton,\n\t\t\tisContentShown,\n\t\t\tcontent,\n\t\t\tcontainer,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreview.vue?vue&type=template&id=66dae5b1&ts=true\"\nimport script from \"./LinkPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreview.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// This creates a version of `require()` in the context of the current\n// directory, so we iterate over its content, which is a map statically built by\n// Webpack.\n// Second argument says it's recursive, third makes sure we only load templates.\nconst requireViews = require.context(\".\", false, /\\.vue$/);\n\nexport default requireViews.keys().reduce((acc: Record<string, any>, path) => {\n\tacc[\"message-\" + path.substring(2, path.length - 4)] = requireViews(path).default;\n\n\treturn acc;\n}, {});\n","import { render } from \"./Message.vue?vue&type=template&id=6a83360a&ts=true\"\nimport script from \"./Message.vue?vue&type=script&lang=ts\"\nexport * from \"./Message.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form :class=\"['message-search', {opened: searchOpened}]\" @submit.prevent=\"searchMessages\">\n\t\t<div class=\"input-wrapper\">\n\t\t\t<input\n\t\t\t\tref=\"searchInputField\"\n\t\t\t\tv-model=\"searchInput\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tname=\"search\"\n\t\t\t\tclass=\"input\"\n\t\t\t\tplaceholder=\"Search messages\"\n\t\t\t\t@blur=\"closeSearch\"\n\t\t\t\t@keyup.esc=\"closeSearch\"\n\t\t\t/>\n\t\t</div>\n\t\t<button\n\t\t\tv-if=\"!onSearchPage\"\n\t\t\tclass=\"search\"\n\t\t\ttype=\"button\"\n\t\t\taria-label=\"Search messages in this channel\"\n\t\t\t@mousedown.prevent=\"toggleSearch\"\n\t\t/>\n\t</form>\n</template>\n\n<style>\nform.message-search {\n\tdisplay: flex;\n}\n\nform.message-search .input-wrapper {\n\tdisplay: flex;\n}\n\nform.message-search input {\n\twidth: 100%;\n\theight: auto !important;\n\tmargin: 7px 0;\n\tborder: 0;\n\tcolor: inherit;\n\tbackground-color: #fafafa;\n\tappearance: none;\n}\n\nform.message-search input::placeholder {\n\tcolor: rgba(0, 0, 0, 0.35);\n}\n\n@media (min-width: 480px) {\n\tform.message-search input {\n\t\tmin-width: 140px;\n\t}\n\n\tform.message-search input:focus {\n\t\tmin-width: 220px;\n\t}\n}\n\nform.message-search .input-wrapper {\n\tposition: absolute;\n\ttop: 45px;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1;\n\theight: 0;\n\toverflow: hidden;\n\tbackground: var(--window-bg-color);\n}\n\nform.message-search .input-wrapper input {\n\tmargin: 7px;\n}\n\nform.message-search.opened .input-wrapper {\n\theight: 50px;\n}\n\n#chat form.message-search button {\n\tdisplay: flex;\n\tcolor: #607992;\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, onMounted, PropType, ref, watch} from \"vue\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageSearchForm\",\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst searchOpened = ref(false);\n\t\tconst searchInput = ref(\"\");\n\t\tconst router = useRouter();\n\t\tconst route = useRoute();\n\n\t\tconst searchInputField = ref<HTMLInputElement | null>(null);\n\n\t\tconst onSearchPage = computed(() => {\n\t\t\treturn route.name === \"SearchResults\";\n\t\t});\n\n\t\twatch(route, (newValue) => {\n\t\t\tif (newValue.query.q) {\n\t\t\t\tsearchInput.value = String(newValue.query.q);\n\t\t\t}\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsearchInput.value = String(route.query.q || \"\");\n\t\t\tsearchOpened.value = onSearchPage.value;\n\n\t\t\tif (searchInputField.value && !searchInput.value && searchOpened.value) {\n\t\t\t\tsearchInputField.value.focus();\n\t\t\t}\n\t\t});\n\n\t\tconst closeSearch = () => {\n\t\t\tif (!onSearchPage.value) {\n\t\t\t\tsearchInput.value = \"\";\n\t\t\t\tsearchOpened.value = false;\n\t\t\t}\n\t\t};\n\n\t\tconst toggleSearch = () => {\n\t\t\tif (searchOpened.value) {\n\t\t\t\tsearchInputField.value?.blur();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsearchOpened.value = true;\n\t\t\tsearchInputField.value?.focus();\n\t\t};\n\n\t\tconst searchMessages = (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!searchInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trouter\n\t\t\t\t.push({\n\t\t\t\t\tname: \"SearchResults\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tid: props.channel.id,\n\t\t\t\t\t},\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tq: searchInput.value,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tif (err.name === \"NavigationDuplicated\") {\n\t\t\t\t\t\t// Search for the same query again\n\t\t\t\t\t\teventbus.emit(\"re-search\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tsearchOpened,\n\t\t\tsearchInput,\n\t\t\tsearchInputField,\n\t\t\tcloseSearch,\n\t\t\ttoggleSearch,\n\t\t\tsearchMessages,\n\t\t\tonSearchPage,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./MessageSearchForm.vue?vue&type=template&id=7f7156c0&ts=true\"\nimport script from \"./MessageSearchForm.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageSearchForm.vue?vue&type=script&lang=ts\"\n\nimport \"./MessageSearchForm.vue?vue&type=style&index=0&id=7f7156c0&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div :aria-label=\"localeDate\" class=\"date-marker-container tooltipped tooltipped-s\">\n\t\t<div class=\"date-marker\">\n\t\t\t<span :aria-label=\"friendlyDate()\" class=\"date-marker-text\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport dayjs from \"dayjs\";\nimport calendar from \"dayjs/plugin/calendar\";\nimport {computed, defineComponent, onBeforeUnmount, onMounted, PropType} from \"vue\";\nimport eventbus from \"../js/eventbus\";\nimport type {ClientMessage} from \"../js/types\";\n\ndayjs.extend(calendar);\n\nexport default defineComponent({\n\tname: \"DateMarker\",\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst localeDate = computed(() => dayjs(props.message.time).format(\"D MMMM YYYY\"));\n\n\t\tconst hoursPassed = () => {\n\t\t\treturn (Date.now() - Date.parse(props.message.time.toString())) / 3600000;\n\t\t};\n\n\t\tconst dayChange = () => {\n\t\t\tif (hoursPassed() >= 48) {\n\t\t\t\teventbus.off(\"daychange\", dayChange);\n\t\t\t}\n\t\t};\n\n\t\tconst friendlyDate = () => {\n\t\t\t// See http://momentjs.com/docs/#/displaying/calendar-time/\n\t\t\treturn dayjs(props.message.time).calendar(null, {\n\t\t\t\tsameDay: \"[Today]\",\n\t\t\t\tlastDay: \"[Yesterday]\",\n\t\t\t\tlastWeek: \"D MMMM YYYY\",\n\t\t\t\tsameElse: \"D MMMM YYYY\",\n\t\t\t});\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (hoursPassed() < 48) {\n\t\t\t\teventbus.on(\"daychange\", dayChange);\n\t\t\t}\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"daychange\", dayChange);\n\t\t});\n\n\t\treturn {\n\t\t\tlocaleDate,\n\t\t\tfriendlyDate,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./DateMarker.vue?vue&type=template&id=97dda32c&ts=true\"\nimport script from \"./DateMarker.vue?vue&type=script&lang=ts\"\nexport * from \"./DateMarker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SearchResults.vue?vue&type=template&id=f577812e&ts=true\"\nimport script from \"./SearchResults.vue?vue&type=script&lang=ts\"\nexport * from \"./SearchResults.vue?vue&type=script&lang=ts\"\n\nimport \"./SearchResults.vue?vue&type=style&index=0&id=f577812e&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"chat-container\" class=\"window\" :data-current-channel=\"channel.name\" lang=\"\">\n\t\t<div\n\t\t\tid=\"chat\"\n\t\t\t:class=\"{\n\t\t\t\t'hide-motd': !store.state.settings.motd,\n\t\t\t\t'time-seconds': store.state.settings.showSeconds,\n\t\t\t\t'time-12h': store.state.settings.use12hClock,\n\t\t\t\t'colored-nicks': true, // TODO temporarily fixes themes, to be removed in next major version\n\t\t\t}\"\n\t\t>\n\t\t\t<div\n\t\t\t\t:id=\"'chan-' + channel.id\"\n\t\t\t\tclass=\"chat-view\"\n\t\t\t\t:data-type=\"channel.type\"\n\t\t\t\t:aria-label=\"channel.name\"\n\t\t\t\trole=\"tabpanel\"\n\t\t\t>\n\t\t\t\t<div class=\"header\">\n\t\t\t\t\t<SidebarToggle />\n\t\t\t\t\t<span class=\"title\" :aria-label=\"'Currently open ' + channel.type\">{{\n\t\t\t\t\t\tchannel.name\n\t\t\t\t\t}}</span>\n\t\t\t\t\t<div v-if=\"channel.editTopic === true\" class=\"topic-container\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref=\"topicInput\"\n\t\t\t\t\t\t\t:value=\"channel.topic\"\n\t\t\t\t\t\t\tclass=\"topic-input\"\n\t\t\t\t\t\t\tplaceholder=\"Set channel topic\"\n\t\t\t\t\t\t\tenterkeyhint=\"done\"\n\t\t\t\t\t\t\t@keyup.enter=\"saveTopic\"\n\t\t\t\t\t\t\t@keyup.esc=\"channel.editTopic = false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span aria-label=\"Save topic\" class=\"save-topic\" @click=\"saveTopic\">\n\t\t\t\t\t\t\t<span type=\"button\" aria-label=\"Save topic\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:title=\"channel.topic\"\n\t\t\t\t\t\t:class=\"{topic: true, empty: !channel.topic}\"\n\t\t\t\t\t\t@dblclick=\"editTopic\"\n\t\t\t\t\t\t><ParsedMessage\n\t\t\t\t\t\t\tv-if=\"channel.topic\"\n\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t:text=\"channel.topic\"\n\t\t\t\t\t/></span>\n\t\t\t\t\t<MessageSearchForm\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tstore.state.settings.searchEnabled &&\n\t\t\t\t\t\t\t['channel', 'query'].includes(channel.type)\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"mentions\"\n\t\t\t\t\t\taria-label=\"Open your mentions\"\n\t\t\t\t\t\t@click=\"openMentions\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"menu\"\n\t\t\t\t\t\taria-label=\"Open the context menu\"\n\t\t\t\t\t\t@click=\"openContextMenu\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"channel.type === 'channel'\"\n\t\t\t\t\t\tclass=\"rt-tooltip tooltipped tooltipped-w\"\n\t\t\t\t\t\taria-label=\"Toggle user list\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"rt\"\n\t\t\t\t\t\t\taria-label=\"Toggle user list\"\n\t\t\t\t\t\t\t@click=\"store.commit('toggleUserlist')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"channel.type === 'special'\" class=\"chat-content\">\n\t\t\t\t\t<div class=\"chat\">\n\t\t\t\t\t\t<div class=\"messages\">\n\t\t\t\t\t\t\t<div class=\"msg\">\n\t\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t\t:is=\"specialComponent\"\n\t\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"chat-content\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t'scroll-down tooltipped tooltipped-w tooltipped-no-touch',\n\t\t\t\t\t\t\t{'scroll-down-shown': !channel.scrolledToBottom},\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\taria-label=\"Jump to recent messages\"\n\t\t\t\t\t\t@click=\"messageList?.jumpToBottom()\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"scroll-down-arrow\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChatUserList v-if=\"channel.type === 'channel'\" :channel=\"channel\" />\n\t\t\t\t\t<MessageList\n\t\t\t\t\t\tref=\"messageList\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t:focused=\"focused\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-if=\"store.state.currentUserVisibleError\"\n\t\t\tid=\"user-visible-error\"\n\t\t\t@click=\"hideUserVisibleError\"\n\t\t>\n\t\t\t{{ store.state.currentUserVisibleError }}\n\t\t</div>\n\t\t<ChatInput :network=\"network\" :channel=\"channel\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport socket from \"../js/socket\";\nimport eventbus from \"../js/eventbus\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport MessageList from \"./MessageList.vue\";\nimport ChatInput from \"./ChatInput.vue\";\nimport ChatUserList from \"./ChatUserList.vue\";\nimport SidebarToggle from \"./SidebarToggle.vue\";\nimport MessageSearchForm from \"./MessageSearchForm.vue\";\nimport ListBans from \"./Special/ListBans.vue\";\nimport ListInvites from \"./Special/ListInvites.vue\";\nimport ListChannels from \"./Special/ListChannels.vue\";\nimport ListIgnored from \"./Special/ListIgnored.vue\";\nimport {defineComponent, PropType, ref, computed, watch, nextTick, onMounted, Component} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"Chat\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tMessageList,\n\t\tChatInput,\n\t\tChatUserList,\n\t\tSidebarToggle,\n\t\tMessageSearchForm,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t\tfocused: Number,\n\t},\n\temits: [\"channel-changed\"],\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\n\t\tconst messageList = ref<typeof MessageList>();\n\t\tconst topicInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst specialComponent = computed(() => {\n\t\t\tswitch (props.channel.special) {\n\t\t\t\tcase \"list_bans\":\n\t\t\t\t\treturn ListBans as Component;\n\t\t\t\tcase \"list_invites\":\n\t\t\t\t\treturn ListInvites as Component;\n\t\t\t\tcase \"list_channels\":\n\t\t\t\t\treturn ListChannels as Component;\n\t\t\t\tcase \"list_ignored\":\n\t\t\t\t\treturn ListIgnored as Component;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\n\t\tconst channelChanged = () => {\n\t\t\t// Triggered when active channel is set or changed\n\t\t\temit(\"channel-changed\", props.channel);\n\n\t\t\tsocket.emit(\"open\", props.channel.id);\n\n\t\t\tif (props.channel.usersOutdated) {\n\t\t\t\tprops.channel.usersOutdated = false;\n\n\t\t\t\tsocket.emit(\"names\", {\n\t\t\t\t\ttarget: props.channel.id,\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst hideUserVisibleError = () => {\n\t\t\tstore.commit(\"currentUserVisibleError\", null);\n\t\t};\n\n\t\tconst editTopic = () => {\n\t\t\tif (props.channel.type === \"channel\") {\n\t\t\t\tprops.channel.editTopic = true;\n\t\t\t}\n\t\t};\n\n\t\tconst saveTopic = () => {\n\t\t\tprops.channel.editTopic = false;\n\n\t\t\tif (!topicInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newTopic = topicInput.value.value;\n\n\t\t\tif (props.channel.topic !== newTopic) {\n\t\t\t\tconst target = props.channel.id;\n\t\t\t\tconst text = `/raw TOPIC ${props.channel.name} :${newTopic}`;\n\t\t\t\tsocket.emit(\"input\", {target, text});\n\t\t\t}\n\t\t};\n\n\t\tconst openContextMenu = (event: any) => {\n\t\t\teventbus.emit(\"contextmenu:channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t\tnetwork: props.network,\n\t\t\t});\n\t\t};\n\n\t\tconst openMentions = (event: any) => {\n\t\t\teventbus.emit(\"mentions:toggle\", {\n\t\t\t\tevent: event,\n\t\t\t});\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.channel,\n\t\t\t() => {\n\t\t\t\tchannelChanged();\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.editTopic,\n\t\t\t(newTopic) => {\n\t\t\t\tif (newTopic) {\n\t\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\t\ttopicInput.value?.focus();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\tchannelChanged();\n\n\t\t\tif (props.channel.editTopic) {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\ttopicInput.value?.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tmessageList,\n\t\t\ttopicInput,\n\t\t\tspecialComponent,\n\t\t\thideUserVisibleError,\n\t\t\teditTopic,\n\t\t\tsaveTopic,\n\t\t\topenContextMenu,\n\t\t\topenMentions,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div ref=\"chat\" class=\"chat\" tabindex=\"-1\">\n\t\t<div v-show=\"channel.moreHistoryAvailable\" class=\"show-more\">\n\t\t\t<button\n\t\t\t\tref=\"loadMoreButton\"\n\t\t\t\t:disabled=\"channel.historyLoading || !store.state.isConnected\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click=\"onShowMoreClick\"\n\t\t\t>\n\t\t\t\t<span v-if=\"channel.historyLoading\">Loading</span>\n\t\t\t\t<span v-else>Show older messages</span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div\n\t\t\tclass=\"messages\"\n\t\t\trole=\"log\"\n\t\t\taria-live=\"polite\"\n\t\t\taria-relevant=\"additions\"\n\t\t\t@copy=\"onCopy\"\n\t\t>\n\t\t\t<template v-for=\"(message, id) in condensedMessages\">\n\t\t\t\t<DateMarker\n\t\t\t\t\tv-if=\"shouldDisplayDateMarker(message, id)\"\n\t\t\t\t\t:key=\"message.id + '-date'\"\n\t\t\t\t\t:message=\"message as any\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"shouldDisplayUnreadMarker(Number(message.id))\"\n\t\t\t\t\t:key=\"message.id + '-unread'\"\n\t\t\t\t\tclass=\"unread-marker\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"unread-marker-text\" />\n\t\t\t\t</div>\n\n\t\t\t\t<MessageCondensed\n\t\t\t\t\tv-if=\"message.type === 'condensed'\"\n\t\t\t\t\t:key=\"message.messages[0].id\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:messages=\"message.messages\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t/>\n\t\t\t\t<Message\n\t\t\t\t\tv-else\n\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:is-previous-source=\"isPreviousSource(message, id)\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t\t@toggle-link-preview=\"onLinkPreviewToggle\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {condensedTypes} from \"../../shared/irc\";\nimport eventbus from \"../js/eventbus\";\nimport clipboard from \"../js/clipboard\";\nimport socket from \"../js/socket\";\nimport Message from \"./Message.vue\";\nimport MessageCondensed from \"./MessageCondensed.vue\";\nimport DateMarker from \"./DateMarker.vue\";\nimport {\n\tcomputed,\n\tdefineComponent,\n\tnextTick,\n\tonBeforeUnmount,\n\tonBeforeUpdate,\n\tonMounted,\n\tonUnmounted,\n\tPropType,\n\tref,\n\twatch,\n} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientChan, ClientMessage, ClientNetwork, ClientLinkPreview} from \"../js/types\";\nimport Msg from \"../../server/models/msg\";\n\ntype CondensedMessageContainer = {\n\ttype: \"condensed\";\n\ttime: Date;\n\tmessages: ClientMessage[];\n\tid?: number;\n};\n\n// TODO; move into component\nlet unreadMarkerShown = false;\n\nexport default defineComponent({\n\tname: \"MessageList\",\n\tcomponents: {\n\t\tMessage,\n\t\tMessageCondensed,\n\t\tDateMarker,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t\tfocused: Number,\n\t},\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\n\t\tconst chat = ref<HTMLDivElement | null>(null);\n\t\tconst loadMoreButton = ref<HTMLButtonElement | null>(null);\n\t\tconst historyObserver = ref<IntersectionObserver | null>(null);\n\t\tconst skipNextScrollEvent = ref(false);\n\n\t\tconst isWaitingForNextTick = ref(false);\n\n\t\tconst jumpToBottom = () => {\n\t\t\tskipNextScrollEvent.value = true;\n\t\t\tprops.channel.scrolledToBottom = true;\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (el) {\n\t\t\t\tel.scrollTop = el.scrollHeight;\n\t\t\t}\n\t\t};\n\n\t\tconst onShowMoreClick = () => {\n\t\t\tif (!store.state.isConnected) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet lastMessage = -1;\n\n\t\t\t// Find the id of first message that isn't showInActive\n\t\t\t// If showInActive is set, this message is actually in another channel\n\t\t\tfor (const message of props.channel.messages) {\n\t\t\t\tif (!message.showInActive) {\n\t\t\t\t\tlastMessage = message.id;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprops.channel.historyLoading = true;\n\n\t\t\tsocket.emit(\"more\", {\n\t\t\t\ttarget: props.channel.id,\n\t\t\t\tlastId: lastMessage,\n\t\t\t\tcondensed: store.state.settings.statusMessages !== \"shown\",\n\t\t\t});\n\t\t};\n\n\t\tconst onLoadButtonObserved = (entries: IntersectionObserverEntry[]) => {\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (!entry.isIntersecting) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tonShowMoreClick();\n\t\t\t});\n\t\t};\n\n\t\tnextTick(() => {\n\t\t\tif (!chat.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (window.IntersectionObserver) {\n\t\t\t\thistoryObserver.value = new window.IntersectionObserver(onLoadButtonObserved, {\n\t\t\t\t\troot: chat.value,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tjumpToBottom();\n\t\t}).catch((e) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\"Error in new IntersectionObserver\", e);\n\t\t});\n\n\t\tconst condensedMessages = computed(() => {\n\t\t\tif (props.channel.type !== \"channel\" && props.channel.type !== \"query\") {\n\t\t\t\treturn props.channel.messages;\n\t\t\t}\n\n\t\t\t// If actions are hidden, just return a message list with them excluded\n\t\t\tif (store.state.settings.statusMessages === \"hidden\") {\n\t\t\t\treturn props.channel.messages.filter(\n\t\t\t\t\t(message) => !condensedTypes.has(message.type)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// If actions are not condensed, just return raw message list\n\t\t\tif (store.state.settings.statusMessages !== \"condensed\") {\n\t\t\t\treturn props.channel.messages;\n\t\t\t}\n\n\t\t\tlet lastCondensedContainer: CondensedMessageContainer | null = null;\n\n\t\t\tconst condensed: (ClientMessage | CondensedMessageContainer)[] = [];\n\n\t\t\tfor (const message of props.channel.messages) {\n\t\t\t\t// If this message is not condensable, or its an action affecting our user,\n\t\t\t\t// then just append the message to container and be done with it\n\t\t\t\tif (message.self || message.highlight || !condensedTypes.has(message.type)) {\n\t\t\t\t\tlastCondensedContainer = null;\n\n\t\t\t\t\tcondensed.push(message);\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!lastCondensedContainer) {\n\t\t\t\t\tlastCondensedContainer = {\n\t\t\t\t\t\ttime: message.time,\n\t\t\t\t\t\ttype: \"condensed\",\n\t\t\t\t\t\tmessages: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tcondensed.push(lastCondensedContainer);\n\t\t\t\t}\n\n\t\t\t\tlastCondensedContainer!.messages.push(message);\n\n\t\t\t\t// Set id of the condensed container to last message id,\n\t\t\t\t// which is required for the unread marker to work correctly\n\t\t\t\tlastCondensedContainer!.id = message.id;\n\n\t\t\t\t// If this message is the unread boundary, create a split condensed container\n\t\t\t\tif (message.id === props.channel.firstUnread) {\n\t\t\t\t\tlastCondensedContainer = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn condensed.map((message) => {\n\t\t\t\t// Skip condensing single messages, it doesn't save any\n\t\t\t\t// space but makes useful information harder to see\n\t\t\t\tif (message.type === \"condensed\" && message.messages.length === 1) {\n\t\t\t\t\treturn message.messages[0];\n\t\t\t\t}\n\n\t\t\t\treturn message;\n\t\t\t});\n\t\t});\n\n\t\tconst shouldDisplayDateMarker = (\n\t\t\tmessage: Msg | ClientMessage | CondensedMessageContainer,\n\t\t\tid: number\n\t\t) => {\n\t\t\tconst previousMessage = condensedMessages.value[id - 1];\n\n\t\t\tif (!previousMessage) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst oldDate = new Date(previousMessage.time);\n\t\t\tconst newDate = new Date(message.time);\n\n\t\t\treturn (\n\t\t\t\toldDate.getDate() !== newDate.getDate() ||\n\t\t\t\toldDate.getMonth() !== newDate.getMonth() ||\n\t\t\t\toldDate.getFullYear() !== newDate.getFullYear()\n\t\t\t);\n\t\t};\n\n\t\tconst shouldDisplayUnreadMarker = (id: number) => {\n\t\t\tif (!unreadMarkerShown && id > props.channel.firstUnread) {\n\t\t\t\tunreadMarkerShown = true;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst isPreviousSource = (currentMessage: ClientMessage | Msg, id: number) => {\n\t\t\tconst previousMessage = condensedMessages.value[id - 1];\n\t\t\treturn !!(\n\t\t\t\tpreviousMessage &&\n\t\t\t\tcurrentMessage.type === \"message\" &&\n\t\t\t\tpreviousMessage.type === \"message\" &&\n\t\t\t\tpreviousMessage.from &&\n\t\t\t\tcurrentMessage.from.nick === previousMessage.from.nick\n\t\t\t);\n\t\t};\n\n\t\tconst onCopy = () => {\n\t\t\tif (chat.value) {\n\t\t\t\tclipboard(chat.value);\n\t\t\t}\n\t\t};\n\n\t\tconst keepScrollPosition = async () => {\n\t\t\t// If we are already waiting for the next tick to force scroll position,\n\t\t\t// we have no reason to perform more checks and set it again in the next tick\n\t\t\tif (isWaitingForNextTick.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!props.channel.scrolledToBottom) {\n\t\t\t\tif (props.channel.historyLoading) {\n\t\t\t\t\tconst heightOld = el.scrollHeight - el.scrollTop;\n\n\t\t\t\t\tisWaitingForNextTick.value = true;\n\n\t\t\t\t\tawait nextTick();\n\n\t\t\t\t\tisWaitingForNextTick.value = false;\n\t\t\t\t\tskipNextScrollEvent.value = true;\n\n\t\t\t\t\tel.scrollTop = el.scrollHeight - heightOld;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisWaitingForNextTick.value = true;\n\t\t\tawait nextTick();\n\t\t\tisWaitingForNextTick.value = false;\n\n\t\t\tjumpToBottom();\n\t\t};\n\n\t\tconst onLinkPreviewToggle = async (preview: ClientLinkPreview, message: ClientMessage) => {\n\t\t\tawait keepScrollPosition();\n\n\t\t\t// Tell the server we're toggling so it remembers at page reload\n\t\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\t\ttarget: props.channel.id,\n\t\t\t\tmsgId: message.id,\n\t\t\t\tlink: preview.link,\n\t\t\t\tshown: preview.shown,\n\t\t\t});\n\t\t};\n\n\t\tconst handleScroll = () => {\n\t\t\t// Setting scrollTop also triggers scroll event\n\t\t\t// We don't want to perform calculations for that\n\t\t\tif (skipNextScrollEvent.value) {\n\t\t\t\tskipNextScrollEvent.value = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tprops.channel.scrolledToBottom = el.scrollHeight - el.scrollTop - el.offsetHeight <= 30;\n\t\t};\n\n\t\tconst handleResize = () => {\n\t\t\t// Keep message list scrolled to bottom on resize\n\t\t\tif (props.channel.scrolledToBottom) {\n\t\t\t\tjumpToBottom();\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tchat.value?.addEventListener(\"scroll\", handleScroll, {passive: true});\n\n\t\t\teventbus.on(\"resize\", handleResize);\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (historyObserver.value && loadMoreButton.value) {\n\t\t\t\t\thistoryObserver.value.observe(loadMoreButton.value);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\twatch(\n\t\t\t() => props.channel.id,\n\t\t\t() => {\n\t\t\t\tprops.channel.scrolledToBottom = true;\n\n\t\t\t\t// Re-add the intersection observer to trigger the check again on channel switch\n\t\t\t\t// Otherwise if last channel had the button visible, switching to a new channel won't trigger the history\n\t\t\t\tif (historyObserver.value && loadMoreButton.value) {\n\t\t\t\t\thistoryObserver.value.unobserve(loadMoreButton.value);\n\t\t\t\t\thistoryObserver.value.observe(loadMoreButton.value);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.messages,\n\t\t\tasync () => {\n\t\t\t\tawait keepScrollPosition();\n\t\t\t},\n\t\t\t{\n\t\t\t\tdeep: true,\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.pendingMessage,\n\t\t\tasync () => {\n\t\t\t\t// Keep the scroll stuck when input gets resized while typing\n\t\t\t\tawait keepScrollPosition();\n\t\t\t}\n\t\t);\n\n\t\tonBeforeUpdate(() => {\n\t\t\tunreadMarkerShown = false;\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"resize\", handleResize);\n\t\t\tchat.value?.removeEventListener(\"scroll\", handleScroll);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tif (historyObserver.value) {\n\t\t\t\thistoryObserver.value.disconnect();\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tchat,\n\t\t\tstore,\n\t\t\tonShowMoreClick,\n\t\t\tloadMoreButton,\n\t\t\tonCopy,\n\t\t\tcondensedMessages,\n\t\t\tshouldDisplayDateMarker,\n\t\t\tshouldDisplayUnreadMarker,\n\t\t\tkeepScrollPosition,\n\t\t\tisPreviousSource,\n\t\t\tjumpToBottom,\n\t\t\tonLinkPreviewToggle,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div :class=\"['msg', {closed: isCollapsed}]\" data-type=\"condensed\">\n\t\t<div class=\"condensed-summary\">\n\t\t\t<span class=\"time\" />\n\t\t\t<span class=\"from\" />\n\t\t\t<span class=\"content\" @click=\"onCollapseClick\"\n\t\t\t\t>{{ condensedText\n\t\t\t\t}}<button class=\"toggle-button\" aria-label=\"Toggle status messages\"\n\t\t\t/></span>\n\t\t</div>\n\t\t<Message\n\t\t\tv-for=\"message in messages\"\n\t\t\t:key=\"message.id\"\n\t\t\t:network=\"network\"\n\t\t\t:message=\"message\"\n\t\t/>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType, ref} from \"vue\";\nimport {condensedTypes} from \"../../shared/irc\";\nimport {ClientMessage, ClientNetwork} from \"../js/types\";\nimport Message from \"./Message.vue\";\n\nexport default defineComponent({\n\tname: \"MessageCondensed\",\n\tcomponents: {\n\t\tMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tmessages: {\n\t\t\ttype: Array as PropType<ClientMessage[]>,\n\t\t\trequired: true,\n\t\t},\n\t\tkeepScrollPosition: {\n\t\t\ttype: Function as PropType<() => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst isCollapsed = ref(true);\n\n\t\tconst onCollapseClick = () => {\n\t\t\tisCollapsed.value = !isCollapsed.value;\n\t\t\tprops.keepScrollPosition();\n\t\t};\n\n\t\tconst condensedText = computed(() => {\n\t\t\tconst obj: Record<string, number> = {};\n\n\t\t\tcondensedTypes.forEach((type) => {\n\t\t\t\tobj[type] = 0;\n\t\t\t});\n\n\t\t\tfor (const message of props.messages) {\n\t\t\t\t// special case since one MODE message can change multiple modes\n\t\t\t\tif (message.type === \"mode\") {\n\t\t\t\t\t// syntax: +vv-t maybe-some targets\n\t\t\t\t\t// we want the number of mode changes in the message, so count the\n\t\t\t\t\t// number of chars other than + and - before the first space\n\t\t\t\t\tconst modeChangesCount = message.text\n\t\t\t\t\t\t.split(\" \")[0]\n\t\t\t\t\t\t.split(\"\")\n\t\t\t\t\t\t.filter((char) => char !== \"+\" && char !== \"-\").length;\n\t\t\t\t\tobj[message.type] += modeChangesCount;\n\t\t\t\t} else {\n\t\t\t\t\tobj[message.type]++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Count quits as parts in condensed messages to reduce information density\n\t\t\tobj.part += obj.quit;\n\n\t\t\tconst strings: string[] = [];\n\t\t\tcondensedTypes.forEach((type) => {\n\t\t\t\tif (obj[type]) {\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase \"chghost\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1\n\t\t\t\t\t\t\t\t\t\t? \" users have changed hostname\"\n\t\t\t\t\t\t\t\t\t\t: \" user has changed hostname\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"join\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users have joined\" : \" user has joined\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"part\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users have left\" : \" user has left\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"nick\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1\n\t\t\t\t\t\t\t\t\t\t? \" users have changed nick\"\n\t\t\t\t\t\t\t\t\t\t: \" user has changed nick\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"kick\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users were kicked\" : \" user was kicked\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"mode\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" modes were set\" : \" mode was set\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"away\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\t\"marked away \" +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? String(obj[type]) + \" times\" : \"once\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"back\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\t\"marked back \" +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? String(obj[type]) + \" times\" : \"once\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (strings.length) {\n\t\t\t\tlet text = strings.pop();\n\n\t\t\t\tif (strings.length) {\n\t\t\t\t\ttext = strings.join(\", \") + \", and \" + text!;\n\t\t\t\t}\n\n\t\t\t\treturn text;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t});\n\n\t\treturn {\n\t\t\tisCollapsed,\n\t\t\tcondensedText,\n\t\t\tonCollapseClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./MessageCondensed.vue?vue&type=template&id=41ebb2a0&ts=true\"\nimport script from \"./MessageCondensed.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageCondensed.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export default function (chat: HTMLDivElement) {\n\t// Disable in Firefox as it already copies flex text correctly\n\t// @ts-expect-error Property 'InstallTrigger' does not exist on type 'Window & typeof globalThis'.ts(2339)\n\tif (typeof window.InstallTrigger !== \"undefined\") {\n\t\treturn;\n\t}\n\n\tconst selection = window.getSelection();\n\n\tif (!selection) {\n\t\treturn;\n\t}\n\n\t// If selection does not span multiple elements, do nothing\n\tif (selection.anchorNode === selection.focusNode) {\n\t\treturn;\n\t}\n\n\tconst range = selection.getRangeAt(0);\n\tconst documentFragment = range.cloneContents();\n\tconst div = document.createElement(\"div\");\n\n\tdiv.id = \"js-copy-hack\";\n\tdiv.appendChild(documentFragment);\n\tchat.appendChild(div);\n\n\tselection.selectAllChildren(div);\n\n\twindow.setTimeout(() => {\n\t\tchat.removeChild(div);\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(range);\n\t}, 0);\n}\n","import { render } from \"./MessageList.vue?vue&type=template&id=70fab858&ts=true\"\nimport script from \"./MessageList.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form id=\"form\" method=\"post\" action=\"\" @submit.prevent=\"onSubmit\">\n\t\t<span id=\"upload-progressbar\" />\n\t\t<span id=\"nick\">{{ network.nick }}</span>\n\t\t<textarea\n\t\t\tid=\"input\"\n\t\t\tref=\"input\"\n\t\t\tdir=\"auto\"\n\t\t\tclass=\"mousetrap\"\n\t\t\tenterkeyhint=\"send\"\n\t\t\t:value=\"channel.pendingMessage\"\n\t\t\t:placeholder=\"getInputPlaceholder(channel)\"\n\t\t\t:aria-label=\"getInputPlaceholder(channel)\"\n\t\t\t@input=\"setPendingMessage\"\n\t\t\t@keypress.enter.exact.prevent=\"onSubmit\"\n\t\t\t@blur=\"onBlur\"\n\t\t/>\n\t\t<span\n\t\t\tv-if=\"store.state.serverConfiguration?.fileUpload\"\n\t\t\tid=\"upload-tooltip\"\n\t\t\tclass=\"tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t\taria-label=\"Upload file\"\n\t\t\t@click=\"openFileUpload\"\n\t\t>\n\t\t\t<input\n\t\t\t\tid=\"upload-input\"\n\t\t\t\tref=\"uploadInput\"\n\t\t\t\ttype=\"file\"\n\t\t\t\taria-labelledby=\"upload\"\n\t\t\t\tmultiple\n\t\t\t\t@change=\"onUploadInputChange\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tid=\"upload\"\n\t\t\t\ttype=\"button\"\n\t\t\t\taria-label=\"Upload file\"\n\t\t\t\t:disabled=\"!store.state.isConnected\"\n\t\t\t/>\n\t\t</span>\n\t\t<span\n\t\t\tid=\"submit-tooltip\"\n\t\t\tclass=\"tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t\taria-label=\"Send message\"\n\t\t>\n\t\t\t<button\n\t\t\t\tid=\"submit\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\taria-label=\"Send message\"\n\t\t\t\t:disabled=\"!store.state.isConnected\"\n\t\t\t/>\n\t\t</span>\n\t</form>\n</template>\n\n<script lang=\"ts\">\nimport Mousetrap from \"mousetrap\";\nimport {wrapCursor} from \"undate\";\nimport autocompletion from \"../js/autocompletion\";\nimport commands from \"../js/commands/index\";\nimport socket from \"../js/socket\";\nimport upload from \"../js/upload\";\nimport eventbus from \"../js/eventbus\";\nimport {watch, defineComponent, nextTick, onMounted, PropType, ref, onUnmounted} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nconst formattingHotkeys = {\n\t\"mod+k\": \"\\x03\",\n\t\"mod+b\": \"\\x02\",\n\t\"mod+u\": \"\\x1F\",\n\t\"mod+i\": \"\\x1D\",\n\t\"mod+o\": \"\\x0F\",\n\t\"mod+s\": \"\\x1e\",\n\t\"mod+m\": \"\\x11\",\n};\n\n// Autocomplete bracket and quote characters like in a modern IDE\n// For example, select `text`, press `[` key, and it becomes `[text]`\nconst bracketWraps = {\n\t'\"': '\"',\n\t\"'\": \"'\",\n\t\"(\": \")\",\n\t\"<\": \">\",\n\t\"[\": \"]\",\n\t\"{\": \"}\",\n\t\"*\": \"*\",\n\t\"`\": \"`\",\n\t\"~\": \"~\",\n\t_: \"_\",\n};\n\nexport default defineComponent({\n\tname: \"ChatInput\",\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst input = ref<HTMLTextAreaElement>();\n\t\tconst uploadInput = ref<HTMLInputElement>();\n\t\tconst autocompletionRef = ref<ReturnType<typeof autocompletion>>();\n\n\t\tconst setInputSize = () => {\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (!input.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst style = window.getComputedStyle(input.value);\n\t\t\t\tconst lineHeight = parseFloat(style.lineHeight) || 1;\n\n\t\t\t\t// Start by resetting height before computing as scrollHeight does not\n\t\t\t\t// decrease when deleting characters\n\t\t\t\tinput.value.style.height = \"\";\n\n\t\t\t\t// Use scrollHeight to calculate how many lines there are in input, and ceil the value\n\t\t\t\t// because some browsers tend to incorrently round the values when using high density\n\t\t\t\t// displays or using page zoom feature\n\t\t\t\tinput.value.style.height = `${\n\t\t\t\t\tMath.ceil(input.value.scrollHeight / lineHeight) * lineHeight\n\t\t\t\t}px`;\n\t\t\t});\n\t\t};\n\n\t\tconst setPendingMessage = (e: Event) => {\n\t\t\tprops.channel.pendingMessage = (e.target as HTMLInputElement).value;\n\t\t\tprops.channel.inputHistoryPosition = 0;\n\t\t\tsetInputSize();\n\t\t};\n\n\t\tconst getInputPlaceholder = (channel: ClientChan) => {\n\t\t\tif (channel.type === \"channel\" || channel.type === \"query\") {\n\t\t\t\treturn `Write to ${channel.name}`;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t};\n\n\t\tconst onSubmit = () => {\n\t\t\tif (!input.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Triggering click event opens the virtual keyboard on mobile\n\t\t\t// This can only be called from another interactive event (e.g. button click)\n\t\t\tinput.value.click();\n\t\t\tinput.value.focus();\n\n\t\t\tif (!store.state.isConnected) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst target = props.channel.id;\n\t\t\tconst text = props.channel.pendingMessage;\n\n\t\t\tif (text.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.hide();\n\t\t\t}\n\n\t\t\tprops.channel.inputHistoryPosition = 0;\n\t\t\tprops.channel.pendingMessage = \"\";\n\t\t\tinput.value.value = \"\";\n\t\t\tsetInputSize();\n\n\t\t\t// Store new message in history if last message isn't already equal\n\t\t\tif (props.channel.inputHistory[1] !== text) {\n\t\t\t\tprops.channel.inputHistory.splice(1, 0, text);\n\t\t\t}\n\n\t\t\t// Limit input history to a 100 entries\n\t\t\tif (props.channel.inputHistory.length > 100) {\n\t\t\t\tprops.channel.inputHistory.pop();\n\t\t\t}\n\n\t\t\tif (text[0] === \"/\") {\n\t\t\t\tconst args = text.substring(1).split(\" \");\n\t\t\t\tconst cmd = args.shift()?.toLowerCase();\n\n\t\t\t\tif (!cmd) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tObject.prototype.hasOwnProperty.call(commands, cmd) &&\n\t\t\t\t\tcommands[cmd].input(args)\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsocket.emit(\"input\", {target, text});\n\t\t};\n\n\t\tconst onUploadInputChange = () => {\n\t\t\tif (!uploadInput.value || !uploadInput.value.files) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst files = Array.from(uploadInput.value.files);\n\t\t\tupload.triggerUpload(files);\n\t\t\tuploadInput.value.value = \"\"; // Reset <input> element so you can upload the same file\n\t\t};\n\n\t\tconst openFileUpload = () => {\n\t\t\tuploadInput.value?.click();\n\t\t};\n\n\t\tconst blurInput = () => {\n\t\t\tinput.value?.blur();\n\t\t};\n\n\t\tconst onBlur = () => {\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.hide();\n\t\t\t}\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.channel.id,\n\t\t\t() => {\n\t\t\t\tif (autocompletionRef.value) {\n\t\t\t\t\tautocompletionRef.value.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.pendingMessage,\n\t\t\t() => {\n\t\t\t\tsetInputSize();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", blurInput);\n\n\t\t\tif (store.state.settings.autocomplete) {\n\t\t\t\tif (!input.value) {\n\t\t\t\t\tthrow new Error(\"ChatInput autocomplete: input element is not available\");\n\t\t\t\t}\n\n\t\t\t\tautocompletionRef.value = autocompletion(input.value);\n\t\t\t}\n\n\t\t\tconst inputTrap = Mousetrap(input.value);\n\n\t\t\tinputTrap.bind(Object.keys(formattingHotkeys), function (e, key) {\n\t\t\t\tconst modifier = formattingHotkeys[key];\n\n\t\t\t\tif (!e.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twrapCursor(\n\t\t\t\t\te.target as HTMLTextAreaElement,\n\t\t\t\t\tmodifier,\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionStart ===\n\t\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd\n\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t: modifier\n\t\t\t\t);\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tinputTrap.bind(Object.keys(bracketWraps), function (e, key) {\n\t\t\t\tif (\n\t\t\t\t\t(e.target as HTMLTextAreaElement)?.selectionStart !==\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd\n\t\t\t\t) {\n\t\t\t\t\twrapCursor(e.target as HTMLTextAreaElement, key, bracketWraps[key]);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinputTrap.bind([\"up\", \"down\"], (e, key) => {\n\t\t\t\tif (\n\t\t\t\t\tstore.state.isAutoCompleting ||\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionStart !==\n\t\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd ||\n\t\t\t\t\t!input.value\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst onRow = (\n\t\t\t\t\tinput.value.value.slice(undefined, input.value.selectionStart).match(/\\n/g) ||\n\t\t\t\t\t[]\n\t\t\t\t).length;\n\t\t\t\tconst totalRows = (input.value.value.match(/\\n/g) || []).length;\n\n\t\t\t\tconst {channel} = props;\n\n\t\t\t\tif (channel.inputHistoryPosition === 0) {\n\t\t\t\t\tchannel.inputHistory[channel.inputHistoryPosition] = channel.pendingMessage;\n\t\t\t\t}\n\n\t\t\t\tif (key === \"up\" && onRow === 0) {\n\t\t\t\t\tif (channel.inputHistoryPosition < channel.inputHistory.length - 1) {\n\t\t\t\t\t\tchannel.inputHistoryPosition++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\tkey === \"down\" &&\n\t\t\t\t\tchannel.inputHistoryPosition > 0 &&\n\t\t\t\t\tonRow === totalRows\n\t\t\t\t) {\n\t\t\t\t\tchannel.inputHistoryPosition--;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tchannel.pendingMessage = channel.inputHistory[channel.inputHistoryPosition];\n\t\t\t\tinput.value.value = channel.pendingMessage;\n\t\t\t\tsetInputSize();\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (store.state.serverConfiguration?.fileUpload) {\n\t\t\t\tupload.mounted();\n\t\t\t}\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", blurInput);\n\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.destroy();\n\t\t\t\tautocompletionRef.value = undefined;\n\t\t\t}\n\n\t\t\tupload.unmounted();\n\t\t\tupload.abort();\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tinput,\n\t\t\tuploadInput,\n\t\t\tonUploadInputChange,\n\t\t\topenFileUpload,\n\t\t\tblurInput,\n\t\t\tonBlur,\n\t\t\tsetInputSize,\n\t\t\tupload,\n\t\t\tgetInputPlaceholder,\n\t\t\tonSubmit,\n\t\t\tsetPendingMessage,\n\t\t};\n\t},\n});\n</script>\n","import constants from \"./constants\";\n\nimport Mousetrap from \"mousetrap\";\nimport {Strategy, Textcomplete, StrategyProps} from \"@textcomplete/core\";\nimport {TextareaEditor} from \"@textcomplete/textarea\";\n\nimport fuzzy from \"fuzzy\";\n\nimport emojiMap from \"./helpers/simplemap.json\";\nimport {store} from \"./store\";\n\nexport default enableAutocomplete;\n\nconst emojiSearchTerms = Object.keys(emojiMap);\nconst emojiStrategy: StrategyProps = {\n\tid: \"emoji\",\n\tmatch: /(^|\\s):([-+\\w:?]{2,}):?$/,\n\tsearch(term: string, callback: (matches) => void) {\n\t\t// Trim colon from the matched term,\n\t\t// as we are unable to get a clean string from match regex\n\t\tterm = term.replace(/:$/, \"\");\n\t\tcallback(fuzzyGrep(term, emojiSearchTerms));\n\t},\n\ttemplate([string, original]: [string, string]) {\n\t\treturn `<span class=\"emoji\">${String(emojiMap[original])}</span> ${string}`;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + String(emojiMap[original]);\n\t},\n\tindex: 2,\n};\n\nconst nicksStrategy: StrategyProps = {\n\tid: \"nicks\",\n\tmatch: /(^|\\s)(@([a-zA-Z_[\\]\\\\^{}|`@][a-zA-Z0-9_[\\]\\\\^{}|`-]*)?)$/,\n\tsearch(term: string, callback: (matches: string[] | string[][]) => void) {\n\t\tterm = term.slice(1);\n\n\t\tif (term[0] === \"@\") {\n\t\t\t// TODO: type\n\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n\t\t\tcallback(completeNicks(term.slice(1), true).map((val) => [\"@\" + val[0], \"@\" + val[1]]));\n\t\t} else {\n\t\t\tcallback(completeNicks(term, true));\n\t\t}\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + replaceNick(original);\n\t},\n\tindex: 2,\n};\n\nconst chanStrategy: StrategyProps = {\n\tid: \"chans\",\n\tmatch: /(^|\\s)((?:#|\\+|&|![A-Z0-9]{5})(?:[^\\s]+)?)$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tcallback(completeChans(term));\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + original;\n\t},\n\tindex: 2,\n};\n\nconst commandStrategy: StrategyProps = {\n\tid: \"commands\",\n\tmatch: /^\\/(\\w*)$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tcallback(completeCommands(\"/\" + term));\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn original;\n\t},\n\tindex: 1,\n};\n\nconst foregroundColorStrategy: StrategyProps = {\n\tid: \"foreground-colors\",\n\tmatch: /\\x03(\\d{0,2}|[A-Za-z ]{0,10})$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tterm = term.toLowerCase();\n\n\t\tconst matchingColorCodes = constants.colorCodeMap\n\t\t\t.filter((i) => fuzzy.test(term, i[0]) || fuzzy.test(term, i[1]))\n\t\t\t.map((i) => {\n\t\t\t\tif (fuzzy.test(term, i[1])) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\ti[0],\n\t\t\t\t\t\tfuzzy.match(term, i[1], {\n\t\t\t\t\t\t\tpre: \"<b>\",\n\t\t\t\t\t\t\tpost: \"</b>\",\n\t\t\t\t\t\t}).rendered,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn i;\n\t\t\t});\n\n\t\tcallback(matchingColorCodes);\n\t},\n\ttemplate(value: string[]) {\n\t\treturn `<span class=\"irc-fg${parseInt(value[0], 10)}\">${value[1]}</span>`;\n\t},\n\treplace(value: string) {\n\t\treturn \"\\x03\" + value[0];\n\t},\n\tindex: 1,\n};\n\nconst backgroundColorStrategy: StrategyProps = {\n\tid: \"background-colors\",\n\tmatch: /\\x03(\\d{2}),(\\d{0,2}|[A-Za-z ]{0,10})$/,\n\tsearch(term: string, callback: (matchingColorCodes: string[][]) => void, match: string[]) {\n\t\tterm = term.toLowerCase();\n\t\tconst matchingColorCodes = constants.colorCodeMap\n\t\t\t.filter((i) => fuzzy.test(term, i[0]) || fuzzy.test(term, i[1]))\n\t\t\t.map((pair) => {\n\t\t\t\tif (fuzzy.test(term, pair[1])) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\tpair[0],\n\t\t\t\t\t\tfuzzy.match(term, pair[1], {\n\t\t\t\t\t\t\tpre: \"<b>\",\n\t\t\t\t\t\t\tpost: \"</b>\",\n\t\t\t\t\t\t}).rendered,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn pair;\n\t\t\t})\n\t\t\t.map((pair) => pair.concat(match[1])); // Needed to pass fg color to `template`...\n\n\t\tcallback(matchingColorCodes);\n\t},\n\ttemplate(value: string[]) {\n\t\treturn `<span class=\"irc-fg${parseInt(value[2], 10)} irc-bg irc-bg${parseInt(\n\t\t\tvalue[0],\n\t\t\t10\n\t\t)}\">${value[1]}</span>`;\n\t},\n\treplace(value: string[]) {\n\t\treturn \"\\x03$1,\" + value[0];\n\t},\n\tindex: 2,\n};\n\nfunction enableAutocomplete(input: HTMLTextAreaElement) {\n\tlet tabCount = 0;\n\tlet lastMatch = \"\";\n\tlet currentMatches: string[] | string[][] = [];\n\n\tinput.addEventListener(\"input\", (e) => {\n\t\tif ((e as CustomEvent).detail === \"autocomplete\") {\n\t\t\treturn;\n\t\t}\n\n\t\ttabCount = 0;\n\t\tcurrentMatches = [];\n\t\tlastMatch = \"\";\n\t});\n\n\tMousetrap(input).bind(\n\t\t\"tab\",\n\t\t(e) => {\n\t\t\tif (store.state.isAutoCompleting) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tconst text = input.value;\n\n\t\t\tif (tabCount === 0) {\n\t\t\t\tlastMatch = text.substring(0, input.selectionStart).split(/\\s/).pop() || \"\";\n\n\t\t\t\tif (lastMatch.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcurrentMatches = completeNicks(lastMatch, false);\n\n\t\t\t\tif (currentMatches.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst position = input.selectionStart - lastMatch.length;\n\t\t\tconst newMatch = replaceNick(\n\t\t\t\t// TODO: type this properly\n\t\t\t\tString(currentMatches[tabCount % currentMatches.length]),\n\t\t\t\tposition\n\t\t\t);\n\t\t\tconst remainder = text.substring(input.selectionStart);\n\n\t\t\tinput.value = text.substr(0, position) + newMatch + remainder;\n\n\t\t\tinput.selectionStart -= remainder.length;\n\t\t\tinput.selectionEnd = input.selectionStart;\n\n\t\t\t// Propagate change to Vue model\n\t\t\tinput.dispatchEvent(\n\t\t\t\tnew CustomEvent(\"input\", {\n\t\t\t\t\tdetail: \"autocomplete\",\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tlastMatch = newMatch;\n\t\t\ttabCount++;\n\t\t},\n\t\t\"keydown\"\n\t);\n\n\tconst strategies = [\n\t\temojiStrategy,\n\t\tnicksStrategy,\n\t\tchanStrategy,\n\t\tcommandStrategy,\n\t\tforegroundColorStrategy,\n\t\tbackgroundColorStrategy,\n\t];\n\n\tconst editor = new TextareaEditor(input);\n\tconst textcomplete = new Textcomplete(editor, strategies, {\n\t\tdropdown: {\n\t\t\tclassName: \"textcomplete-menu\",\n\t\t\tplacement: \"top\",\n\t\t},\n\t});\n\n\ttextcomplete.on(\"show\", () => {\n\t\tstore.commit(\"isAutoCompleting\", true);\n\t});\n\n\ttextcomplete.on(\"hidden\", () => {\n\t\tstore.commit(\"isAutoCompleting\", false);\n\t});\n\n\treturn {\n\t\thide() {\n\t\t\ttextcomplete.hide();\n\t\t},\n\t\tdestroy() {\n\t\t\ttextcomplete.destroy();\n\t\t\tstore.commit(\"isAutoCompleting\", false);\n\t\t},\n\t};\n}\n\nfunction replaceNick(original: string, position = 1) {\n\t// If no postfix specified, return autocompleted nick as-is\n\tif (!store.state.settings.nickPostfix) {\n\t\treturn original;\n\t}\n\n\t// If there is whitespace in the input already, append space to nick\n\tif (position > 0 && /\\s/.test(store.state.activeChannel?.channel.pendingMessage || \"\")) {\n\t\treturn original + \" \";\n\t}\n\n\t// If nick is first in the input, append specified postfix\n\treturn original + store.state.settings.nickPostfix;\n}\n\nfunction fuzzyGrep<T>(term: string, array: Array<T>) {\n\tconst results = fuzzy.filter(term, array, {\n\t\tpre: \"<b>\",\n\t\tpost: \"</b>\",\n\t});\n\treturn results.map((el) => [el.string, el.original]);\n}\n\nfunction rawNicks() {\n\tif (!store.state.activeChannel) {\n\t\treturn [];\n\t}\n\n\tif (store.state.activeChannel.channel.users.length > 0) {\n\t\tconst users = store.state.activeChannel.channel.users.slice();\n\n\t\treturn users.sort((a, b) => b.lastMessage - a.lastMessage).map((u) => u.nick);\n\t}\n\n\tconst me = store.state.activeChannel.network.nick;\n\tconst otherUser = store.state.activeChannel.channel.name;\n\n\t// If this is a query, add their name to autocomplete\n\tif (me !== otherUser && store.state.activeChannel.channel.type === \"query\") {\n\t\treturn [otherUser, me];\n\t}\n\n\t// Return our own name by default for anything that isn't a channel or query\n\treturn [me];\n}\n\nfunction completeNicks(word: string, isFuzzy: boolean) {\n\tconst users = rawNicks();\n\tword = word.toLowerCase();\n\n\tif (isFuzzy) {\n\t\treturn fuzzyGrep(word, users);\n\t}\n\n\treturn users.filter((w) => !w.toLowerCase().indexOf(word));\n}\n\nfunction getCommands() {\n\tlet cmds = constants.commands.slice();\n\n\tif (!store.state.settings.searchEnabled) {\n\t\tcmds = cmds.filter((c) => c !== \"/search\");\n\t}\n\n\treturn cmds;\n}\n\nfunction completeCommands(word: string) {\n\tconst commands = getCommands();\n\treturn fuzzyGrep(word, commands);\n}\n\nfunction completeChans(word: string) {\n\tconst words: string[] = [];\n\n\tif (store.state.activeChannel) {\n\t\tfor (const channel of store.state.activeChannel.network.channels) {\n\t\t\t// Push all channels that start with the same CHANTYPE\n\t\t\tif (channel.type === \"channel\" && channel.name[0] === word[0]) {\n\t\t\t\twords.push(channel.name);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fuzzyGrep(word, words);\n}\n","import { render } from \"./ChatInput.vue?vue&type=template&id=027606da&ts=true\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<aside\n\t\tref=\"userlist\"\n\t\tclass=\"userlist\"\n\t\t:aria-label=\"'User list for ' + channel.name\"\n\t\t@mouseleave=\"removeHoverUser\"\n\t>\n\t\t<div class=\"count\">\n\t\t\t<input\n\t\t\t\tref=\"input\"\n\t\t\t\t:value=\"userSearchInput\"\n\t\t\t\t:placeholder=\"\n\t\t\t\t\tchannel.users.length + ' user' + (channel.users.length === 1 ? '' : 's')\n\t\t\t\t\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tclass=\"search\"\n\t\t\t\taria-label=\"Search among the user list\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\t@input=\"setUserSearchInput\"\n\t\t\t\t@keydown.up=\"navigateUserList($event, -1)\"\n\t\t\t\t@keydown.down=\"navigateUserList($event, 1)\"\n\t\t\t\t@keydown.page-up=\"navigateUserList($event, -10)\"\n\t\t\t\t@keydown.page-down=\"navigateUserList($event, 10)\"\n\t\t\t\t@keydown.enter=\"selectUser\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"names\">\n\t\t\t<div\n\t\t\t\tv-for=\"(users, mode) in groupedUsers\"\n\t\t\t\t:key=\"mode\"\n\t\t\t\t:class=\"['user-mode', getModeClass(String(mode))]\"\n\t\t\t>\n\t\t\t\t<template v-if=\"userSearchInput.length > 0\">\n\t\t\t\t\t<!-- eslint-disable vue/no-v-text-v-html-on-component -->\n\t\t\t\t\t<Username\n\t\t\t\t\t\tv-for=\"user in users\"\n\t\t\t\t\t\t:key=\"user.original.nick + '-search'\"\n\t\t\t\t\t\t:on-hover=\"hoverUser\"\n\t\t\t\t\t\t:active=\"user.original === activeUser\"\n\t\t\t\t\t\t:user=\"user.original\"\n\t\t\t\t\t\tv-html=\"user.string\"\n\t\t\t\t\t/>\n\t\t\t\t\t<!-- eslint-enable -->\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<Username\n\t\t\t\t\t\tv-for=\"user in users\"\n\t\t\t\t\t\t:key=\"user.nick\"\n\t\t\t\t\t\t:on-hover=\"hoverUser\"\n\t\t\t\t\t\t:active=\"user === activeUser\"\n\t\t\t\t\t\t:user=\"user\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t</aside>\n</template>\n\n<script lang=\"ts\">\nimport {filter as fuzzyFilter} from \"fuzzy\";\nimport {computed, defineComponent, nextTick, PropType, ref} from \"vue\";\nimport type {UserInMessage} from \"../../server/models/msg\";\nimport type {ClientChan, ClientUser} from \"../js/types\";\nimport Username from \"./Username.vue\";\n\nconst modes = {\n\t\"~\": \"owner\",\n\t\"&\": \"admin\",\n\t\"!\": \"admin\",\n\t\"@\": \"op\",\n\t\"%\": \"half-op\",\n\t\"+\": \"voice\",\n\t\"\": \"normal\",\n};\n\nexport default defineComponent({\n\tname: \"ChatUserList\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst userSearchInput = ref(\"\");\n\t\tconst activeUser = ref<UserInMessage | null>();\n\t\tconst userlist = ref<HTMLDivElement>();\n\t\tconst filteredUsers = computed(() => {\n\t\t\tif (!userSearchInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn fuzzyFilter(userSearchInput.value, props.channel.users, {\n\t\t\t\tpre: \"<b>\",\n\t\t\t\tpost: \"</b>\",\n\t\t\t\textract: (u) => u.nick,\n\t\t\t});\n\t\t});\n\n\t\tconst groupedUsers = computed(() => {\n\t\t\tconst groups = {};\n\n\t\t\tif (userSearchInput.value && filteredUsers.value) {\n\t\t\t\tconst result = filteredUsers.value;\n\n\t\t\t\tfor (const user of result) {\n\t\t\t\t\tconst mode = user.original.modes[0] || \"\";\n\n\t\t\t\t\tif (!groups[mode]) {\n\t\t\t\t\t\tgroups[mode] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prepend user mode to search result\n\t\t\t\t\tuser.string = mode + user.string;\n\n\t\t\t\t\tgroups[mode].push(user);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const user of props.channel.users) {\n\t\t\t\t\tconst mode = user.modes[0] || \"\";\n\n\t\t\t\t\tif (!groups[mode]) {\n\t\t\t\t\t\tgroups[mode] = [user];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgroups[mode].push(user);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn groups as {\n\t\t\t\t[mode: string]: (ClientUser & {\n\t\t\t\t\toriginal: UserInMessage;\n\t\t\t\t\tstring: string;\n\t\t\t\t})[];\n\t\t\t};\n\t\t});\n\n\t\tconst setUserSearchInput = (e: Event) => {\n\t\t\tuserSearchInput.value = (e.target as HTMLInputElement).value;\n\t\t};\n\n\t\tconst getModeClass = (mode: string) => {\n\t\t\treturn modes[mode] as typeof modes;\n\t\t};\n\n\t\tconst selectUser = () => {\n\t\t\t// Simulate a click on the active user to open the context menu.\n\t\t\t// Coordinates are provided to position the menu correctly.\n\t\t\tif (!activeUser.value || !userlist.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = userlist.value.querySelector(\".active\");\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rect = el.getBoundingClientRect();\n\t\t\tconst ev = new MouseEvent(\"click\", {\n\t\t\t\tview: window,\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true,\n\t\t\t\tclientX: rect.left,\n\t\t\t\tclientY: rect.top + rect.height,\n\t\t\t});\n\t\t\tel.dispatchEvent(ev);\n\t\t};\n\n\t\tconst hoverUser = (user: UserInMessage) => {\n\t\t\tactiveUser.value = user;\n\t\t};\n\n\t\tconst removeHoverUser = () => {\n\t\t\tactiveUser.value = null;\n\t\t};\n\n\t\tconst scrollToActiveUser = () => {\n\t\t\t// Scroll the list if needed after the active class is applied\n\t\t\tvoid nextTick(() => {\n\t\t\t\tconst el = userlist.value?.querySelector(\".active\");\n\t\t\t\tel?.scrollIntoView({block: \"nearest\", inline: \"nearest\"});\n\t\t\t});\n\t\t};\n\n\t\tconst navigateUserList = (event: Event, direction: number) => {\n\t\t\t// Prevent propagation to stop global keybind handler from capturing pagedown/pageup\n\t\t\t// and redirecting it to the message list container for scrolling\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tlet users = props.channel.users;\n\n\t\t\t// Only using filteredUsers when we have to avoids filtering when it's not needed\n\t\t\tif (userSearchInput.value && filteredUsers.value) {\n\t\t\t\tusers = filteredUsers.value.map((result) => result.original);\n\t\t\t}\n\n\t\t\t// Bail out if there's no users to select\n\t\t\tif (!users.length) {\n\t\t\t\tactiveUser.value = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst abort = () => {\n\t\t\t\tactiveUser.value = direction ? users[0] : users[users.length - 1];\n\t\t\t\tscrollToActiveUser();\n\t\t\t};\n\n\t\t\t// If there's no active user select the first or last one depending on direction\n\t\t\tif (!activeUser.value) {\n\t\t\t\tabort();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet currentIndex = users.indexOf(activeUser.value as ClientUser);\n\n\t\t\tif (currentIndex === -1) {\n\t\t\t\tabort();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\t// Wrap around the list if necessary. Normaly each loop iterates once at most,\n\t\t\t// but might iterate more often if pgup or pgdown are used in a very short user list\n\t\t\twhile (currentIndex < 0) {\n\t\t\t\tcurrentIndex += users.length;\n\t\t\t}\n\n\t\t\twhile (currentIndex > users.length - 1) {\n\t\t\t\tcurrentIndex -= users.length;\n\t\t\t}\n\n\t\t\tactiveUser.value = users[currentIndex];\n\t\t\tscrollToActiveUser();\n\t\t};\n\n\t\treturn {\n\t\t\tfilteredUsers,\n\t\t\tgroupedUsers,\n\t\t\tuserSearchInput,\n\t\t\tactiveUser,\n\t\t\tuserlist,\n\n\t\t\tsetUserSearchInput,\n\t\t\tgetModeClass,\n\t\t\tselectUser,\n\t\t\thoverUser,\n\t\t\tremoveHoverUser,\n\t\t\tnavigateUserList,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ChatUserList.vue?vue&type=template&id=709fe8dc&ts=true\"\nimport script from \"./ChatUserList.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatUserList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"ban-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Banned</th>\n\t\t\t\t<th class=\"banned_by\">Banned By</th>\n\t\t\t\t<th class=\"banned_at\">Banned At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"ban in channel.data\" :key=\"ban.hostmask\">\n\t\t\t\t<td class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"ban.hostmask\" /></td>\n\t\t\t\t<td class=\"banned_by\">{{ ban.banned_by }}</td>\n\t\t\t\t<td class=\"banned_at\">{{ localetime(ban.banned_at) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localeTime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListBans\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\tconst localetime = (date: number | Date) => {\n\t\t\treturn localeTime(date);\n\t\t};\n\n\t\treturn {\n\t\t\tlocaletime,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListBans.vue?vue&type=template&id=43e48268&ts=true\"\nimport script from \"./ListBans.vue?vue&type=script&lang=ts\"\nexport * from \"./ListBans.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"invite-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Invited</th>\n\t\t\t\t<th class=\"invitened_by\">Invited By</th>\n\t\t\t\t<th class=\"invitened_at\">Invited At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"invite in channel.data\" :key=\"invite.hostmask\">\n\t\t\t\t<td class=\"hostmask\">\n\t\t\t\t\t<ParsedMessage :network=\"network\" :text=\"invite.hostmask\" />\n\t\t\t\t</td>\n\t\t\t\t<td class=\"invitened_by\">{{ invite.invited_by }}</td>\n\t\t\t\t<td class=\"invitened_at\">{{ localetime(invite.invited_at) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListInvites\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime: (date: Date) => localetime(date),\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListInvites.vue?vue&type=template&id=47fd21b2&ts=true\"\nimport script from \"./ListInvites.vue?vue&type=script&lang=ts\"\nexport * from \"./ListInvites.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span v-if=\"channel.data.text\">{{ channel.data.text }}</span>\n\t<table v-else class=\"channel-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"channel\">Channel</th>\n\t\t\t\t<th class=\"users\">Users</th>\n\t\t\t\t<th class=\"topic\">Topic</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"chan in channel.data\" :key=\"chan.channel\">\n\t\t\t\t<td class=\"channel\"><ParsedMessage :network=\"network\" :text=\"chan.channel\" /></td>\n\t\t\t\t<td class=\"users\">{{ chan.num_users }}</td>\n\t\t\t\t<td class=\"topic\"><ParsedMessage :network=\"network\" :text=\"chan.topic\" /></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientChan, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\n\nexport default defineComponent({\n\tname: \"ListChannels\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n});\n</script>\n","import { render } from \"./ListChannels.vue?vue&type=template&id=5b94c3e8&ts=true\"\nimport script from \"./ListChannels.vue?vue&type=script&lang=ts\"\nexport * from \"./ListChannels.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"ignore-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Hostmask</th>\n\t\t\t\t<th class=\"when\">Ignored At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"user in channel.data\" :key=\"user.hostmask\">\n\t\t\t\t<td class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"user.hostmask\" /></td>\n\t\t\t\t<td class=\"when\">{{ localetime(user.when) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListIgnored\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListIgnored.vue?vue&type=template&id=78be79d2&ts=true\"\nimport script from \"./ListIgnored.vue?vue&type=script&lang=ts\"\nexport * from \"./ListIgnored.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Chat.vue?vue&type=template&id=2d7e1755&ts=true\"\nimport script from \"./Chat.vue?vue&type=script&lang=ts\"\nexport * from \"./Chat.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<Chat\n\t\tv-if=\"activeChannel\"\n\t\t:network=\"activeChannel.network\"\n\t\t:channel=\"activeChannel.channel\"\n\t\t:focused=\"parseInt(String(route.query.focused), 10)\"\n\t\t@channel-changed=\"channelChanged\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {watch, computed, defineComponent, onMounted} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"../js/store\";\nimport {ClientChan} from \"../js/types\";\n\n// Temporary component for routing channels and lobbies\nimport Chat from \"./Chat.vue\";\n\nexport default defineComponent({\n\tname: \"RoutedChat\",\n\tcomponents: {\n\t\tChat,\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\t\tconst store = useStore();\n\n\t\tconst activeChannel = computed(() => {\n\t\t\tconst chanId = parseInt(String(route.params.id || \"\"), 10);\n\t\t\tconst channel = store.getters.findChannel(chanId);\n\t\t\treturn channel;\n\t\t});\n\n\t\tconst setActiveChannel = () => {\n\t\t\tif (activeChannel.value) {\n\t\t\t\tstore.commit(\"activeChannel\", activeChannel.value);\n\t\t\t}\n\t\t};\n\n\t\twatch(activeChannel, () => {\n\t\t\tsetActiveChannel();\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsetActiveChannel();\n\t\t});\n\n\t\tconst channelChanged = (channel: ClientChan) => {\n\t\t\tconst chanId = channel.id;\n\t\t\tconst chanInStore = store.getters.findChannel(chanId);\n\n\t\t\tif (chanInStore?.channel) {\n\t\t\t\tchanInStore.channel.unread = 0;\n\t\t\t\tchanInStore.channel.highlight = 0;\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\troute,\n\t\t\tactiveChannel,\n\t\t\tchannelChanged,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./RoutedChat.vue?vue&type=template&id=2cf5ac90&ts=true\"\nimport script from \"./RoutedChat.vue?vue&type=script&lang=ts\"\nexport * from \"./RoutedChat.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<h2>Messages</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input :checked=\"store.state.settings.motd\" type=\"checkbox\" name=\"motd\" />\n\t\t\t\tShow <abbr title=\"Message Of The Day\">MOTD</abbr>\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.showSeconds\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"showSeconds\"\n\t\t\t\t/>\n\t\t\t\tInclude seconds in timestamp\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.use12hClock\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"use12hClock\"\n\t\t\t\t/>\n\t\t\t\tUse 12-hour timestamps\n\t\t\t</label>\n\t\t</div>\n\t\t<template v-if=\"store.state.serverConfiguration?.prefetch\">\n\t\t\t<h2>Link previews</h2>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input :checked=\"store.state.settings.media\" type=\"checkbox\" name=\"media\" />\n\t\t\t\t\tAuto-expand media\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input :checked=\"store.state.settings.links\" type=\"checkbox\" name=\"links\" />\n\t\t\t\t\tAuto-expand websites\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</template>\n\t\t<h2 id=\"label-status-messages\">\n\t\t\tStatus messages\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\taria-label=\"Joins, parts, quits, kicks, nick changes, and mode changes\"\n\t\t\t>\n\t\t\t\t<button class=\"extra-help\" />\n\t\t\t</span>\n\t\t</h2>\n\t\t<div role=\"group\" aria-labelledby=\"label-status-messages\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'shown'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"shown\"\n\t\t\t\t/>\n\t\t\t\tShow all status messages individually\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'condensed'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"condensed\"\n\t\t\t\t/>\n\t\t\t\tCondense status messages together\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'hidden'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"hidden\"\n\t\t\t\t/>\n\t\t\t\tHide all status messages\n\t\t\t</label>\n\t\t</div>\n\t\t<h2>Visual Aids</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.coloredNicks\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"coloredNicks\"\n\t\t\t\t/>\n\t\t\t\tEnable colored nicknames\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.autocomplete\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"autocomplete\"\n\t\t\t\t/>\n\t\t\t\tEnable autocomplete\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"nickPostfix\" class=\"opt\">\n\t\t\t\t\tNick autocomplete postfix\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"Nick autocomplete postfix (for example a comma)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"nickPostfix\"\n\t\t\t\t\t:value=\"store.state.settings.nickPostfix\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"nickPostfix\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tplaceholder=\"Nick autocomplete postfix (e.g. ', ')\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<h2>Theme</h2>\n\t\t<div>\n\t\t\t<label for=\"theme-select\" class=\"sr-only\">Theme</label>\n\t\t\t<select\n\t\t\t\tid=\"theme-select\"\n\t\t\t\t:value=\"store.state.settings.theme\"\n\t\t\t\tname=\"theme\"\n\t\t\t\tclass=\"input\"\n\t\t\t>\n\t\t\t\t<option\n\t\t\t\t\tv-for=\"theme in store.state.serverConfiguration?.themes\"\n\t\t\t\t\t:key=\"theme.name\"\n\t\t\t\t\t:value=\"theme.name\"\n\t\t\t\t>\n\t\t\t\t\t{{ theme.displayName }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<h2>Custom Stylesheet</h2>\n\t\t\t<label for=\"user-specified-css-input\" class=\"sr-only\">\n\t\t\t\tCustom stylesheet. You can override any style with CSS here.\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"user-specified-css-input\"\n\t\t\t\t:value=\"store.state.settings.userStyles\"\n\t\t\t\tclass=\"input\"\n\t\t\t\tname=\"userStyles\"\n\t\t\t\tplaceholder=\"/* You can override any style with CSS here */\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\ntextarea#user-specified-css-input {\n\theight: 100px;\n}\n</style>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"AppearanceSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Appearance.vue?vue&type=template&id=6afb0861&ts=true\"\nimport script from \"./Appearance.vue?vue&type=script&lang=ts\"\nexport * from \"./Appearance.vue?vue&type=script&lang=ts\"\n\nimport \"./Appearance.vue?vue&type=style&index=0&id=6afb0861&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<div v-if=\"canRegisterProtocol || hasInstallPromptEvent\">\n\t\t\t<h2>Native app</h2>\n\t\t\t<button\n\t\t\t\tv-if=\"hasInstallPromptEvent\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click.prevent=\"nativeInstallPrompt\"\n\t\t\t>\n\t\t\t\tAdd The Lounge to Home screen\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tv-if=\"canRegisterProtocol\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click.prevent=\"registerProtocol\"\n\t\t\t>\n\t\t\t\tOpen irc:// URLs with The Lounge\n\t\t\t</button>\n\t\t</div>\n\t\t<div v-if=\"store.state.serverConfiguration?.fileUpload\">\n\t\t\t<h2>File uploads</h2>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input\n\t\t\t\t\t\t:checked=\"store.state.settings.uploadCanvas\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"uploadCanvas\"\n\t\t\t\t\t/>\n\t\t\t\t\tAttempt to remove metadata from images before uploading\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"This option renders the image into a canvas element to remove metadata from the image.\n\tThis may break orientation if your browser does not support that.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Settings synchronisation</h2>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.syncSettings\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"syncSettings\"\n\t\t\t\t/>\n\t\t\t\tSynchronize settings with other clients\n\t\t\t</label>\n\t\t\t<template v-if=\"!store.state.settings.syncSettings\">\n\t\t\t\t<div v-if=\"store.state.serverHasSettings\" class=\"settings-sync-panel\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Warning:</strong> Checking this box will override the settings of\n\t\t\t\t\t\tthis client with those stored on the server.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUse the button below to enable synchronization, and override any settings\n\t\t\t\t\t\talready synced to the server.\n\t\t\t\t\t</p>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-small\" @click=\"onForceSyncClick\">\n\t\t\t\t\t\tSync settings and enable\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"settings-sync-panel\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Warning:</strong> No settings have been synced before. Enabling this\n\t\t\t\t\t\twill sync all settings of this client as the base for other clients.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Automatic away message</h2>\n\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"awayMessage\" class=\"sr-only\">Automatic away message</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"awayMessage\"\n\t\t\t\t\t:value=\"store.state.settings.awayMessage\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"awayMessage\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tplaceholder=\"Away message if The Lounge is not open\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</template>\n\n<style></style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, onMounted, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport {BeforeInstallPromptEvent} from \"../../js/types\";\n\nlet installPromptEvent: BeforeInstallPromptEvent | null = null;\n\nwindow.addEventListener(\"beforeinstallprompt\", (e) => {\n\te.preventDefault();\n\tinstallPromptEvent = e as BeforeInstallPromptEvent;\n});\n\nexport default defineComponent({\n\tname: \"GeneralSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst canRegisterProtocol = ref(false);\n\n\t\tconst hasInstallPromptEvent = computed(() => {\n\t\t\t// TODO: This doesn't hide the button after clicking\n\t\t\treturn installPromptEvent !== null;\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\t// Enable protocol handler registration if supported,\n\t\t\t// and the network configuration is not locked\n\t\t\tcanRegisterProtocol.value =\n\t\t\t\t!!window.navigator.registerProtocolHandler &&\n\t\t\t\t!store.state.serverConfiguration?.lockNetwork;\n\t\t});\n\n\t\tconst nativeInstallPrompt = () => {\n\t\t\tif (!installPromptEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinstallPromptEvent.prompt().catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\n\t\t\tinstallPromptEvent = null;\n\t\t};\n\n\t\tconst onForceSyncClick = () => {\n\t\t\tstore.dispatch(\"settings/syncAll\", true).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\n\t\t\tstore\n\t\t\t\t.dispatch(\"settings/update\", {\n\t\t\t\t\tname: \"syncSettings\",\n\t\t\t\t\tvalue: true,\n\t\t\t\t\tsync: true,\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t};\n\n\t\tconst registerProtocol = () => {\n\t\t\tconst uri = document.location.origin + document.location.pathname + \"?uri=%s\";\n\t\t\t// @ts-expect-error\n\t\t\t// the third argument is deprecated but recommended for compatibility: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/registerProtocolHandler\n\t\t\twindow.navigator.registerProtocolHandler(\"irc\", uri, \"The Lounge\");\n\t\t\t// @ts-expect-error\n\t\t\twindow.navigator.registerProtocolHandler(\"ircs\", uri, \"The Lounge\");\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tcanRegisterProtocol,\n\t\t\thasInstallPromptEvent,\n\t\t\tnativeInstallPrompt,\n\t\t\tonForceSyncClick,\n\t\t\tregisterProtocol,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./General.vue?vue&type=template&id=0fee67e4&ts=true\"\nimport script from \"./General.vue?vue&type=script&lang=ts\"\nexport * from \"./General.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<div\n\t\t\tv-if=\"\n\t\t\t\t!store.state.serverConfiguration?.public &&\n\t\t\t\t!store.state.serverConfiguration?.ldapEnabled\n\t\t\t\"\n\t\t\tid=\"change-password\"\n\t\t\trole=\"group\"\n\t\t\taria-labelledby=\"label-change-password\"\n\t\t>\n\t\t\t<h2 id=\"label-change-password\">Change password</h2>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"current-password\" class=\"sr-only\"> Enter current password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"current-password\"\n\t\t\t\t\t\tv-model=\"old_password\"\n\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"old_password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Enter current password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"new-password\" class=\"sr-only\"> Enter desired new password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"new-password\"\n\t\t\t\t\t\tv-model=\"new_password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"new_password\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Enter desired new password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"new-password-verify\" class=\"sr-only\"> Repeat new password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"new-password-verify\"\n\t\t\t\t\t\tv-model=\"verify_password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"verify_password\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Repeat new password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"passwordChangeStatus && passwordChangeStatus.success\"\n\t\t\t\tclass=\"feedback success\"\n\t\t\t>\n\t\t\t\tSuccessfully updated your password\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"passwordChangeStatus && passwordChangeStatus.error\"\n\t\t\t\tclass=\"feedback error\"\n\t\t\t>\n\t\t\t\t{{ passwordErrors[passwordChangeStatus.error] }}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\" class=\"btn\" @click.prevent=\"changePassword\">\n\t\t\t\t\tChange password\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\" class=\"session-list\" role=\"group\">\n\t\t\t<h2>Sessions</h2>\n\n\t\t\t<h3>Current session</h3>\n\t\t\t<Session v-if=\"currentSession\" :session=\"currentSession\" />\n\n\t\t\t<template v-if=\"activeSessions.length > 0\">\n\t\t\t\t<h3>Active sessions</h3>\n\t\t\t\t<Session\n\t\t\t\t\tv-for=\"session in activeSessions\"\n\t\t\t\t\t:key=\"session.token\"\n\t\t\t\t\t:session=\"session\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<h3>Other sessions</h3>\n\t\t\t<p v-if=\"store.state.sessions.length === 0\">Loading</p>\n\t\t\t<p v-else-if=\"otherSessions.length === 0\">\n\t\t\t\t<em>You are not currently logged in to any other device.</em>\n\t\t\t</p>\n\t\t\t<Session\n\t\t\t\tv-for=\"session in otherSessions\"\n\t\t\t\tv-else\n\t\t\t\t:key=\"session.token\"\n\t\t\t\t:session=\"session\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport socket from \"../../js/socket\";\nimport RevealPassword from \"../RevealPassword.vue\";\nimport Session from \"../Session.vue\";\nimport {computed, defineComponent, onMounted, PropType, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"UserSettings\",\n\tcomponents: {\n\t\tRevealPassword,\n\t\tSession,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst passwordErrors = {\n\t\t\tmissing_fields: \"Please fill in all fields\",\n\t\t\tpassword_mismatch: \"Both new password fields must match\",\n\t\t\tpassword_incorrect: \"The current password field does not match your account password\",\n\t\t\tupdate_failed: \"Failed to update your password\",\n\t\t};\n\n\t\tconst passwordChangeStatus = ref<{\n\t\t\tsuccess: boolean;\n\t\t\terror: keyof typeof passwordErrors;\n\t\t}>();\n\n\t\tconst old_password = ref(\"\");\n\t\tconst new_password = ref(\"\");\n\t\tconst verify_password = ref(\"\");\n\n\t\tconst currentSession = computed(() => {\n\t\t\treturn store.state.sessions.find((item) => item.current);\n\t\t});\n\n\t\tconst activeSessions = computed(() => {\n\t\t\treturn store.state.sessions.filter((item) => !item.current && item.active > 0);\n\t\t});\n\n\t\tconst otherSessions = computed(() => {\n\t\t\treturn store.state.sessions.filter((item) => !item.current && !item.active);\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsocket.emit(\"sessions:get\");\n\t\t});\n\n\t\tconst changePassword = () => {\n\t\t\tconst data = {\n\t\t\t\told_password: old_password.value,\n\t\t\t\tnew_password: new_password.value,\n\t\t\t\tverify_password: verify_password.value,\n\t\t\t};\n\n\t\t\tif (!data.old_password || !data.new_password || !data.verify_password) {\n\t\t\t\tpasswordChangeStatus.value = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: \"missing_fields\",\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (data.new_password !== data.verify_password) {\n\t\t\t\tpasswordChangeStatus.value = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: \"password_mismatch\",\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsocket.once(\"change-password\", (response) => {\n\t\t\t\t// TODO type\n\t\t\t\tpasswordChangeStatus.value = response as any;\n\t\t\t});\n\n\t\t\tsocket.emit(\"change-password\", data);\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tpasswordChangeStatus,\n\t\t\tpasswordErrors,\n\t\t\tcurrentSession,\n\t\t\tactiveSessions,\n\t\t\totherSessions,\n\t\t\tchangePassword,\n\t\t\told_password,\n\t\t\tnew_password,\n\t\t\tverify_password,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div class=\"session-item\">\n\t\t<div class=\"session-item-info\">\n\t\t\t<strong>{{ session.agent }}</strong>\n\n\t\t\t<a :href=\"'https://ipinfo.io/' + session.ip\" target=\"_blank\" rel=\"noopener\">{{\n\t\t\t\tsession.ip\n\t\t\t}}</a>\n\n\t\t\t<p v-if=\"session.active > 1\" class=\"session-usage\">\n\t\t\t\tActive in {{ session.active }} browsers\n\t\t\t</p>\n\t\t\t<p v-else-if=\"!session.current && !session.active\" class=\"session-usage\">\n\t\t\t\tLast used on <time>{{ lastUse }}</time>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class=\"session-item-btn\">\n\t\t\t<button class=\"btn\" @click.prevent=\"signOut\">\n\t\t\t\t<template v-if=\"session.current\">Sign out</template>\n\t\t\t\t<template v-else>Revoke</template>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n.session-list .session-item {\n\tdisplay: flex;\n\tfont-size: 14px;\n}\n\n.session-list .session-item-info {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.session-list .session-item-btn {\n\tflex-shrink: 0;\n}\n\n.session-list .session-usage {\n\tfont-style: italic;\n\tcolor: var(--body-color-muted);\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport localetime from \"../js/helpers/localetime\";\nimport Auth from \"../js/auth\";\nimport socket from \"../js/socket\";\nimport {ClientSession} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"Session\",\n\tprops: {\n\t\tsession: {\n\t\t\ttype: Object as PropType<ClientSession>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst lastUse = computed(() => {\n\t\t\treturn localetime(props.session.lastUse);\n\t\t});\n\n\t\tconst signOut = () => {\n\t\t\tif (!props.session.current) {\n\t\t\t\tsocket.emit(\"sign-out\", props.session.token);\n\t\t\t} else {\n\t\t\t\tsocket.emit(\"sign-out\");\n\t\t\t\tAuth.signout();\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\tlastUse,\n\t\t\tsignOut,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Session.vue?vue&type=template&id=7c65ee22&ts=true\"\nimport script from \"./Session.vue?vue&type=script&lang=ts\"\nexport * from \"./Session.vue?vue&type=script&lang=ts\"\n\nimport \"./Session.vue?vue&type=style&index=0&id=7c65ee22&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Account.vue?vue&type=template&id=a2967c1c&ts=true\"\nimport script from \"./Account.vue?vue&type=script&lang=ts\"\nexport * from \"./Account.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<template v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Push Notifications</h2>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tid=\"pushNotifications\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:disabled=\"\n\t\t\t\t\t\tstore.state.pushNotificationState !== 'supported' &&\n\t\t\t\t\t\tstore.state.pushNotificationState !== 'subscribed'\n\t\t\t\t\t\"\n\t\t\t\t\t@click=\"onPushButtonClick\"\n\t\t\t\t>\n\t\t\t\t\t<template v-if=\"store.state.pushNotificationState === 'subscribed'\">\n\t\t\t\t\t\tUnsubscribe from push notifications\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"store.state.pushNotificationState === 'loading'\">\n\t\t\t\t\t\tLoading\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else> Subscribe to push notifications </template>\n\t\t\t\t</button>\n\t\t\t\t<div v-if=\"store.state.pushNotificationState === 'nohttps'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>: Push notifications are only supported over HTTPS\n\t\t\t\t\tconnections.\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"store.state.pushNotificationState === 'unsupported'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>:\n\t\t\t\t\t<span>Push notifications are not supported by your browser.</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\n\t\t<h2>Browser Notifications</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"desktopNotifications\"\n\t\t\t\t\t:checked=\"store.state.settings.desktopNotifications\"\n\t\t\t\t\t:disabled=\"store.state.desktopNotificationState === 'nohttps'\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"desktopNotifications\"\n\t\t\t\t/>\n\t\t\t\tEnable browser notifications<br />\n\t\t\t\t<div v-if=\"store.state.desktopNotificationState === 'unsupported'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>: Notifications are not supported by your browser.\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"store.state.desktopNotificationState === 'nohttps'\"\n\t\t\t\t\tid=\"warnBlockedDesktopNotifications\"\n\t\t\t\t\tclass=\"error\"\n\t\t\t\t>\n\t\t\t\t\t<strong>Warning</strong>: Notifications are only supported over HTTPS\n\t\t\t\t\tconnections.\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"store.state.desktopNotificationState === 'blocked'\"\n\t\t\t\t\tid=\"warnBlockedDesktopNotifications\"\n\t\t\t\t\tclass=\"error\"\n\t\t\t\t>\n\t\t\t\t\t<strong>Warning</strong>: Notifications are blocked by your browser.\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.notification\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"notification\"\n\t\t\t\t/>\n\t\t\t\tEnable notification sound\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<div class=\"opt\">\n\t\t\t\t<button id=\"play\" @click.prevent=\"playNotification\">Play sound</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.notifyAllMessages\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"notifyAllMessages\"\n\t\t\t\t/>\n\t\t\t\tEnable notification for all messages\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"highlights\" class=\"opt\">\n\t\t\t\t\tCustom highlights\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"If a message contains any of these comma-separated\nexpressions, it will trigger a highlight.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"highlights\"\n\t\t\t\t\t:value=\"store.state.settings.highlights\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"highlights\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tplaceholder=\"Comma-separated, e.g.: word, some more words, anotherword\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"highlightExceptions\" class=\"opt\">\n\t\t\t\t\tHighlight exceptions\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"If a message contains any of these comma-separated\nexpressions, it will not trigger a highlight even if it contains\nyour nickname or expressions defined in custom highlights.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"highlightExceptions\"\n\t\t\t\t\t:value=\"store.state.settings.highlightExceptions\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"highlightExceptions\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tplaceholder=\"Comma-separated, e.g.: word, some more words, anotherword\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport webpush from \"../../js/webpush\";\n\nexport default defineComponent({\n\tname: \"NotificationSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst isIOS = computed(\n\t\t\t() =>\n\t\t\t\t[\n\t\t\t\t\t\"iPad Simulator\",\n\t\t\t\t\t\"iPhone Simulator\",\n\t\t\t\t\t\"iPod Simulator\",\n\t\t\t\t\t\"iPad\",\n\t\t\t\t\t\"iPhone\",\n\t\t\t\t\t\"iPod\",\n\t\t\t\t].includes(navigator.platform) ||\n\t\t\t\t// iPad on iOS 13 detection\n\t\t\t\t(navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n\t\t);\n\n\t\tconst playNotification = () => {\n\t\t\tconst pop = new Audio();\n\t\t\tpop.src = \"audio/pop.wav\";\n\n\t\t\t// eslint-disable-next-line\n\t\t\tpop.play();\n\t\t};\n\n\t\tconst onPushButtonClick = () => {\n\t\t\twebpush.togglePushSubscription();\n\t\t};\n\n\t\treturn {\n\t\t\tisIOS,\n\t\t\tstore,\n\t\t\tplayNotification,\n\t\t\tonPushButtonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Notifications.vue?vue&type=template&id=1d0bfea8&ts=true\"\nimport script from \"./Notifications.vue?vue&type=script&lang=ts\"\nexport * from \"./Notifications.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import constants from \"./constants\";\n\nimport {createRouter, createWebHashHistory} from \"vue-router\";\nimport SignIn from \"../components/Windows/SignIn.vue\";\nimport Connect from \"../components/Windows/Connect.vue\";\nimport Settings from \"../components/Windows/Settings.vue\";\nimport Help from \"../components/Windows/Help.vue\";\nimport Changelog from \"../components/Windows/Changelog.vue\";\nimport NetworkEdit from \"../components/Windows/NetworkEdit.vue\";\nimport SearchResults from \"../components/Windows/SearchResults.vue\";\nimport RoutedChat from \"../components/RoutedChat.vue\";\nimport {store} from \"./store\";\n\nimport AppearanceSettings from \"../components/Settings/Appearance.vue\";\nimport GeneralSettings from \"../components/Settings/General.vue\";\nimport AccountSettings from \"../components/Settings/Account.vue\";\nimport NotificationSettings from \"../components/Settings/Notifications.vue\";\nimport {ClientChan} from \"./types\";\n\nconst router = createRouter({\n\thistory: createWebHashHistory(),\n\troutes: [\n\t\t{\n\t\t\tname: \"SignIn\",\n\t\t\tpath: \"/sign-in\",\n\t\t\tcomponent: SignIn,\n\t\t\tbeforeEnter(to, from, next) {\n\t\t\t\t// Prevent navigating to sign-in when already signed in\n\t\t\t\tif (store.state.appLoaded) {\n\t\t\t\t\tnext(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnext();\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"Connect\",\n\t\t\tpath: \"/connect\",\n\t\t\tcomponent: Connect,\n\t\t\tprops: (route) => ({queryParams: route.query}),\n\t\t},\n\t\t{\n\t\t\tpath: \"/settings\",\n\t\t\tcomponent: Settings,\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tname: \"General\",\n\t\t\t\t\tpath: \"\",\n\t\t\t\t\tcomponent: GeneralSettings,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Appearance\",\n\t\t\t\t\tpath: \"appearance\",\n\t\t\t\t\tcomponent: AppearanceSettings,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Account\",\n\t\t\t\t\tpath: \"account\",\n\t\t\t\t\tcomponent: AccountSettings,\n\t\t\t\t\tprops: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Notifications\",\n\t\t\t\t\tpath: \"notifications\",\n\t\t\t\t\tcomponent: NotificationSettings,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tname: \"Help\",\n\t\t\tpath: \"/help\",\n\t\t\tcomponent: Help,\n\t\t},\n\t\t{\n\t\t\tname: \"Changelog\",\n\t\t\tpath: \"/changelog\",\n\t\t\tcomponent: Changelog,\n\t\t},\n\t\t{\n\t\t\tname: \"NetworkEdit\",\n\t\t\tpath: \"/edit-network/:uuid\",\n\t\t\tcomponent: NetworkEdit,\n\t\t},\n\t\t{\n\t\t\tname: \"RoutedChat\",\n\t\t\tpath: \"/chan-:id\",\n\t\t\tcomponent: RoutedChat,\n\t\t},\n\t\t{\n\t\t\tname: \"SearchResults\",\n\t\t\tpath: \"/chan-:id/search\",\n\t\t\tcomponent: SearchResults,\n\t\t},\n\t],\n});\n\nrouter.beforeEach((to, from, next) => {\n\t// If user is not yet signed in, wait for appLoaded state to change\n\t// unless they are trying to open SignIn (which can be triggered in auth.js)\n\tif (!store.state.appLoaded && to.name !== \"SignIn\") {\n\t\tstore.watch(\n\t\t\t(state) => state.appLoaded,\n\t\t\t() => next()\n\t\t);\n\n\t\treturn;\n\t}\n\n\tnext();\n});\n\nrouter.beforeEach((to, from) => {\n\t// Disallow navigating to non-existing routes\n\tif (!to.matched.length) {\n\t\treturn false;\n\t}\n\n\t// Disallow navigating to invalid channels\n\tif (to.name === \"RoutedChat\" && !store.getters.findChannel(Number(to.params.id))) {\n\t\treturn false;\n\t}\n\n\t// Disallow navigating to invalid networks\n\tif (to.name === \"NetworkEdit\" && !store.getters.findNetwork(String(to.params.uuid))) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n\nrouter.afterEach((to) => {\n\tif (store.state.appLoaded) {\n\t\tif (window.innerWidth <= constants.mobileViewportPixels) {\n\t\t\tstore.commit(\"sidebarOpen\", false);\n\t\t}\n\t}\n\n\tif (store.state.activeChannel) {\n\t\tconst channel = store.state.activeChannel.channel;\n\n\t\tif (to.name !== \"RoutedChat\") {\n\t\t\tstore.commit(\"activeChannel\", undefined);\n\t\t}\n\n\t\t// When switching out of a channel, mark everything as read\n\t\tif (channel.messages?.length > 0) {\n\t\t\tchannel.firstUnread = channel.messages[channel.messages.length - 1].id;\n\t\t}\n\n\t\tif (channel.messages?.length > 100) {\n\t\t\tchannel.messages.splice(0, channel.messages.length - 100);\n\t\t\tchannel.moreHistoryAvailable = true;\n\t\t}\n\t}\n});\n\nasync function navigate(routeName: string, params: any = {}) {\n\tif (router.currentRoute.value.name) {\n\t\tawait router.push({name: routeName, params});\n\t} else {\n\t\t// If current route is null, replace the history entry\n\t\t// This prevents invalid entries from lingering in history,\n\t\t// and then the route guard preventing proper navigation\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tawait router.replace({name: routeName, params}).catch(() => {});\n\t}\n}\n\nfunction switchToChannel(channel: ClientChan) {\n\tvoid navigate(\"RoutedChat\", {id: channel.id});\n}\n\nif (\"serviceWorker\" in navigator) {\n\tnavigator.serviceWorker.addEventListener(\"message\", (event) => {\n\t\tif (event.data && event.data.type === \"open\") {\n\t\t\tconst id = parseInt(event.data.channel.substring(5), 10); // remove \"chan-\" prefix\n\n\t\t\tconst channelTarget = store.getters.findChannel(id);\n\n\t\t\tif (channelTarget) {\n\t\t\t\tswitchToChannel(channelTarget.channel);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport {router, navigate, switchToChannel};\n","import io, {Socket} from \"socket.io-client\";\nimport type {ServerToClientEvents, ClientToServerEvents} from \"../../server/types/socket-events\";\n\nconst socket: Socket<ServerToClientEvents, ClientToServerEvents> = io({\n\ttransports: JSON.parse(document.body.dataset.transports || \"['polling', 'websocket']\"),\n\tpath: window.location.pathname + \"socket.io/\",\n\tautoConnect: false,\n\treconnection: !document.body.classList.contains(\"public\"),\n});\n\n// Ease debugging socket during development\nif (process.env.NODE_ENV === \"development\") {\n\twindow.socket = socket;\n}\n\ndeclare global {\n\tinterface Window {\n\t\tsocket: Socket;\n\t}\n}\n\nexport default socket;\n","import socket from \"./socket\";\nimport type {TypedStore} from \"./store\";\n\nconst defaultSettingConfig = {\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tapply() {},\n\tdefault: null,\n\tsync: null,\n};\n\nconst defaultConfig = {\n\tsyncSettings: {\n\t\tdefault: true,\n\t\tsync: \"never\",\n\t\tapply(store: TypedStore, value: boolean, auto = false) {\n\t\t\t// If applied by settings/applyAll, do not emit to server\n\t\t\tif (value && !auto) {\n\t\t\t\tsocket.emit(\"setting:get\");\n\t\t\t}\n\t\t},\n\t},\n\tadvanced: {\n\t\tdefault: false,\n\t},\n\tautocomplete: {\n\t\tdefault: true,\n\t},\n\tnickPostfix: {\n\t\tdefault: \"\",\n\t},\n\tcoloredNicks: {\n\t\tdefault: true,\n\t},\n\tdesktopNotifications: {\n\t\tdefault: false,\n\t\tsync: \"never\",\n\t\tapply(store: TypedStore, value: boolean) {\n\t\t\t// Commit a mutation. options can have root: true that allows to commit root mutations in namespaced modules.\n\t\t\t// https://vuex.vuejs.org/api/#store-instance-methods. not typed?\n\t\t\tstore.commit(\"refreshDesktopNotificationState\", null, {root: true});\n\n\t\t\tif (\"Notification\" in window && value && Notification.permission !== \"granted\") {\n\t\t\t\tNotification.requestPermission(() =>\n\t\t\t\t\tstore.commit(\"refreshDesktopNotificationState\", null, {root: true})\n\t\t\t\t).catch((e) => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\thighlights: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\thighlightExceptions: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\tawayMessage: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\tlinks: {\n\t\tdefault: true,\n\t},\n\tmotd: {\n\t\tdefault: true,\n\t},\n\tnotification: {\n\t\tdefault: true,\n\t\tsync: \"never\",\n\t},\n\tnotifyAllMessages: {\n\t\tdefault: false,\n\t},\n\tshowSeconds: {\n\t\tdefault: false,\n\t},\n\tuse12hClock: {\n\t\tdefault: false,\n\t},\n\tstatusMessages: {\n\t\tdefault: \"condensed\",\n\t},\n\ttheme: {\n\t\tdefault: document.getElementById(\"theme\")?.dataset.serverTheme,\n\t\tapply(store: TypedStore, value: string) {\n\t\t\tconst themeEl = document.getElementById(\"theme\");\n\t\t\tconst themeUrl = `themes/${value}.css`;\n\n\t\t\tif (!(themeEl instanceof HTMLLinkElement)) {\n\t\t\t\tthrow new Error(\"theme element is not a link\");\n\t\t\t}\n\n\t\t\tconst hrefAttr = themeEl.attributes.getNamedItem(\"href\");\n\n\t\t\tif (!hrefAttr) {\n\t\t\t\tthrow new Error(\"theme is missing href attribute\");\n\t\t\t}\n\n\t\t\tif (hrefAttr.value === themeUrl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\threfAttr.value = themeUrl;\n\n\t\t\tif (!store.state.serverConfiguration) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newTheme = store.state.serverConfiguration?.themes.filter(\n\t\t\t\t(theme) => theme.name === value\n\t\t\t)[0];\n\n\t\t\tconst metaSelector = document.querySelector('meta[name=\"theme-color\"]');\n\n\t\t\tif (!(metaSelector instanceof HTMLMetaElement)) {\n\t\t\t\tthrow new Error(\"theme meta element is not a meta element\");\n\t\t\t}\n\n\t\t\tif (metaSelector) {\n\t\t\t\tconst themeColor = newTheme.themeColor || metaSelector.content;\n\t\t\t\tmetaSelector.content = themeColor;\n\t\t\t}\n\t\t},\n\t},\n\tmedia: {\n\t\tdefault: true,\n\t},\n\tuploadCanvas: {\n\t\tdefault: true,\n\t},\n\tuserStyles: {\n\t\tdefault: \"\",\n\t\tapply(store: TypedStore, value: string) {\n\t\t\tif (!/[?&]nocss/.test(window.location.search)) {\n\t\t\t\tconst element = document.getElementById(\"user-specified-css\");\n\n\t\t\t\tif (element) {\n\t\t\t\t\telement.innerHTML = value;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\tsearchEnabled: {\n\t\tdefault: false,\n\t},\n};\n\nexport const config = normalizeConfig(defaultConfig);\n\nexport function createState() {\n\tconst state = {};\n\n\tfor (const settingName in config) {\n\t\tstate[settingName] = config[settingName].default;\n\t}\n\n\treturn state;\n}\n\nfunction normalizeConfig(obj: any) {\n\tconst newConfig: Partial<typeof defaultConfig> = {};\n\n\tfor (const settingName in obj) {\n\t\tnewConfig[settingName] = {...defaultSettingConfig, ...obj[settingName]};\n\t}\n\n\treturn newConfig as typeof defaultConfig;\n}\n\n// flatten to type of default\nexport type SettingsState = {\n\t[key in keyof typeof defaultConfig]: typeof defaultConfig[key][\"default\"];\n};\n","import storage from \"./localStorage\";\nimport socket from \"./socket\";\nimport {config, createState} from \"./settings\";\nimport {Store} from \"vuex\";\nimport {State} from \"./store\";\n\nexport function createSettingsStore(store: Store<State>) {\n\treturn {\n\t\tnamespaced: true,\n\t\tstate: assignStoredSettings(createState(), loadFromLocalStorage()),\n\t\tmutations: {\n\t\t\tset(state, {name, value}) {\n\t\t\t\tstate[name] = value;\n\t\t\t},\n\t\t},\n\t\tactions: {\n\t\t\tsyncAll({state}, force = false) {\n\t\t\t\tif (state.syncSettings === false && force === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstore.commit(\"serverHasSettings\", true);\n\n\t\t\t\tfor (const name in state) {\n\t\t\t\t\tif (config[name].sync !== \"never\" || config[name].sync === \"always\") {\n\t\t\t\t\t\tsocket.emit(\"setting:set\", {name, value: state[name]});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tapplyAll({state}) {\n\t\t\t\tfor (const settingName in config) {\n\t\t\t\t\tconfig[settingName].apply(store, state[settingName], true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate({state, commit}, {name, value, sync = false}) {\n\t\t\t\tif (state[name] === value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst settingConfig = config[name];\n\n\t\t\t\t// Trying to update a non existing setting (e.g. server has an old key)\n\t\t\t\tif (!settingConfig) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tsync === false &&\n\t\t\t\t\t(state.syncSettings === false || settingConfig.sync === \"never\")\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcommit(\"set\", {name, value});\n\t\t\t\tstorage.set(\"settings\", JSON.stringify(state));\n\t\t\t\tsettingConfig.apply(store, value);\n\n\t\t\t\tif (!sync) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(state.syncSettings && settingConfig.sync !== \"never\") ||\n\t\t\t\t\tsettingConfig.sync === \"always\"\n\t\t\t\t) {\n\t\t\t\t\tsocket.emit(\"setting:set\", {name, value});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n}\n\nfunction loadFromLocalStorage() {\n\tlet storedSettings: Record<string, any> = {};\n\n\ttry {\n\t\tstoredSettings = JSON.parse(storage.get(\"settings\") || \"{}\");\n\t} catch (e) {\n\t\tstorage.remove(\"settings\");\n\t}\n\n\tif (!storedSettings) {\n\t\treturn {};\n\t}\n\n\t// Older The Lounge versions converted highlights to an array, turn it back into a string\n\tif (storedSettings.highlights !== null && typeof storedSettings.highlights === \"object\") {\n\t\tstoredSettings.highlights = storedSettings.highlights.join(\", \");\n\t}\n\n\treturn storedSettings;\n}\n\n/**\n * Essentially Object.assign but does not overwrite and only assigns\n * if key exists in both supplied objects and types match\n *\n * @param {object} defaultSettings\n * @param {object} storedSettings\n */\nfunction assignStoredSettings(\n\tdefaultSettings: Record<string, any>,\n\tstoredSettings: Record<string, any>\n) {\n\tconst newSettings = {...defaultSettings};\n\n\tfor (const key in defaultSettings) {\n\t\t// Make sure the setting in local storage has the same type that the code expects\n\t\tif (\n\t\t\ttypeof storedSettings[key] !== \"undefined\" &&\n\t\t\ttypeof defaultSettings[key] === typeof storedSettings[key]\n\t\t) {\n\t\t\tnewSettings[key] = storedSettings[key];\n\t\t}\n\t}\n\n\treturn newSettings;\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\n\nimport {ActionContext, createStore, Store, useStore as baseUseStore} from \"vuex\";\nimport {createSettingsStore} from \"./store-settings\";\nimport storage from \"./localStorage\";\nimport type {\n\tClientChan,\n\tClientConfiguration,\n\tClientNetwork,\n\tInitClientChan,\n\tNetChan,\n\tClientMessage,\n\tClientMention,\n} from \"./types\";\nimport type {InjectionKey} from \"vue\";\n\nimport {SettingsState} from \"./settings\";\nimport {SearchQuery} from \"../../server/plugins/messageStorage/types\";\n\nconst appName = document.title;\n\nenum DesktopNotificationState {\n\tUnsupported = \"unsupported\",\n\tBlocked = \"blocked\",\n\tNoHttps = \"nohttps\",\n\tGranted = \"granted\",\n}\n\nfunction detectDesktopNotificationState(): DesktopNotificationState {\n\tif (!(\"Notification\" in window)) {\n\t\treturn DesktopNotificationState.Unsupported;\n\t} else if (Notification.permission === DesktopNotificationState.Granted) {\n\t\treturn DesktopNotificationState.Granted;\n\t} else if (!window.isSecureContext) {\n\t\treturn DesktopNotificationState.NoHttps;\n\t}\n\n\treturn DesktopNotificationState.Blocked;\n}\n\nexport type ClientSession = {\n\tcurrent: boolean;\n\tactive: number;\n\tlastUse: number;\n\tip: string;\n\tagent: string;\n\ttoken: string;\n};\n\nexport type State = {\n\tappLoaded: boolean;\n\tactiveChannel?: NetChan;\n\tcurrentUserVisibleError: string | null;\n\tdesktopNotificationState: DesktopNotificationState;\n\tisAutoCompleting: boolean;\n\tisConnected: boolean;\n\tnetworks: ClientNetwork[];\n\t// TODO: type\n\tmentions: ClientMention[];\n\thasServiceWorker: boolean;\n\tpushNotificationState: string;\n\tserverConfiguration: ClientConfiguration | null;\n\tsessions: ClientSession[];\n\tsidebarOpen: boolean;\n\tsidebarDragging: boolean;\n\tuserlistOpen: boolean;\n\tversionData:\n\t\t| null\n\t\t| undefined\n\t\t| {\n\t\t\t\tlatest?: {\n\t\t\t\t\tversion: string;\n\t\t\t\t\tprerelease: boolean;\n\t\t\t\t\turl: string;\n\t\t\t\t};\n\t\t\t\tcurrent?: {\n\t\t\t\t\tversion: string;\n\t\t\t\t\tprerelease: boolean;\n\t\t\t\t\turl: string;\n\t\t\t\t\tchangelog?: string;\n\t\t\t\t};\n\t\t  };\n\tversionStatus: \"loading\" | \"new-version\" | \"new-packages\" | \"up-to-date\" | \"error\";\n\tversionDataExpired: boolean;\n\tserverHasSettings: boolean;\n\tmessageSearchResults: {\n\t\tresults: ClientMessage[];\n\t} | null;\n\tmessageSearchPendingQuery: SearchQuery | null;\n\tsearchEnabled: boolean;\n};\n\nconst state = (): State => ({\n\tappLoaded: false,\n\tactiveChannel: undefined,\n\tcurrentUserVisibleError: null,\n\tdesktopNotificationState: detectDesktopNotificationState(),\n\tisAutoCompleting: false,\n\tisConnected: false,\n\tnetworks: [],\n\tmentions: [],\n\thasServiceWorker: false,\n\tpushNotificationState: \"unsupported\",\n\tserverConfiguration: null,\n\tsessions: [],\n\tsidebarOpen: false,\n\tsidebarDragging: false,\n\tuserlistOpen: storage.get(\"thelounge.state.userlist\") !== \"false\",\n\tversionData: null,\n\tversionStatus: \"loading\",\n\tversionDataExpired: false,\n\tserverHasSettings: false,\n\tmessageSearchResults: null,\n\tmessageSearchPendingQuery: null,\n\tsearchEnabled: false,\n});\n\ntype Getters = {\n\tfindChannelOnCurrentNetwork: (state: State) => (name: string) => ClientChan | undefined;\n\tfindChannelOnNetwork: (state: State) => (\n\t\tnetworkUuid: string,\n\t\tchannelName: string\n\t) => {\n\t\tnetwork: ClientNetwork;\n\t\tchannel: ClientChan;\n\t} | null;\n\tfindChannel: (state: State) => (id: number) => {\n\t\tnetwork: ClientNetwork;\n\t\tchannel: ClientChan;\n\t} | null;\n\tfindNetwork: (state: State) => (uuid: string) => ClientNetwork | null;\n\thighlightCount(state: State): number;\n\ttitle(state: State, getters: Omit<Getters, \"title\">): string;\n\tinitChannel: () => (channel: InitClientChan) => ClientChan;\n};\n\n// getters without the state argument\nexport type CallableGetters = {\n\t[K in keyof Getters]: ReturnType<Getters[K]>;\n};\n\nconst getters: Getters = {\n\tfindChannelOnCurrentNetwork: (state) => (name: string) => {\n\t\tname = name.toLowerCase();\n\t\treturn state.activeChannel?.network.channels.find((c) => c.name.toLowerCase() === name);\n\t},\n\tfindChannelOnNetwork: (state) => (networkUuid: string, channelName: string) => {\n\t\tfor (const network of state.networks) {\n\t\t\tif (network.uuid !== networkUuid) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.name === channelName) {\n\t\t\t\t\treturn {network, channel};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\tfindChannel: (state) => (id: number) => {\n\t\tfor (const network of state.networks) {\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.id === id) {\n\t\t\t\t\treturn {network, channel};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\tfindNetwork: (state) => (uuid: string) => {\n\t\tfor (const network of state.networks) {\n\t\t\tif (network.uuid === uuid) {\n\t\t\t\treturn network;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\thighlightCount(state) {\n\t\tlet highlightCount = 0;\n\n\t\tfor (const network of state.networks) {\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.muted) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\thighlightCount += channel.highlight;\n\t\t\t}\n\t\t}\n\n\t\treturn highlightCount;\n\t},\n\ttitle(state, getters) {\n\t\tconst alertEventCount = getters.highlightCount\n\t\t\t? `(${getters.highlightCount.toString()}) `\n\t\t\t: \"\";\n\t\tconst channelname = state.activeChannel ? `${state.activeChannel.channel.name}  ` : \"\";\n\n\t\treturn alertEventCount + channelname + appName;\n\t},\n\tinitChannel: () => (channel: InitClientChan) => {\n\t\t// TODO: This should be a mutation\n\t\tchannel.pendingMessage = \"\";\n\t\tchannel.inputHistoryPosition = 0;\n\n\t\tchannel.inputHistory = [\"\"].concat(\n\t\t\tchannel.messages\n\t\t\t\t.filter((m) => m.self && m.text && m.type === \"message\")\n\t\t\t\t.map((m) => m.text)\n\t\t\t\t.reverse()\n\t\t\t\t.slice(0, 99)\n\t\t);\n\t\tchannel.historyLoading = false;\n\t\tchannel.scrolledToBottom = true;\n\t\tchannel.editTopic = false;\n\n\t\tchannel.moreHistoryAvailable = channel.totalMessages! > channel.messages.length;\n\t\tdelete channel.totalMessages;\n\n\t\tif (channel.type === \"channel\") {\n\t\t\tchannel.usersOutdated = true;\n\t\t}\n\n\t\treturn channel as ClientChan;\n\t},\n};\n\ntype Mutations = {\n\tappLoaded(state: State): void;\n\tactiveChannel(state: State, netChan: State[\"activeChannel\"]): void;\n\tcurrentUserVisibleError(state: State, error: State[\"currentUserVisibleError\"]): void;\n\trefreshDesktopNotificationState(state: State): void;\n\tisAutoCompleting(state: State, isAutoCompleting: State[\"isAutoCompleting\"]): void;\n\tisConnected(state: State, payload: State[\"isConnected\"]): void;\n\tnetworks(state: State, networks: State[\"networks\"]): void;\n\tmentions(state: State, mentions: State[\"mentions\"]): void;\n\n\tremoveNetwork(state: State, networkUuid: string): void;\n\tsortNetworks(\n\t\tstate: State,\n\t\tsortFn: (a: State[\"networks\"][0], b: State[\"networks\"][0]) => number\n\t): void;\n\thasServiceWorker(state: State): void;\n\tpushNotificationState(\n\t\tstate: State,\n\t\tpushNotificationState: State[\"pushNotificationState\"]\n\t): void;\n\tserverConfiguration(state: State, serverConfiguration: State[\"serverConfiguration\"]): void;\n\tsessions(state: State, payload: State[\"sessions\"]): void;\n\tsidebarOpen(state: State, payload: State[\"sidebarOpen\"]): void;\n\tsidebarDragging(state: State, payload: State[\"sidebarDragging\"]): void;\n\ttoggleSidebar(state: State): void;\n\ttoggleUserlist(state: State): void;\n\tuserlistOpen(state: State, payload: State[\"userlistOpen\"]): void;\n\tversionData(state: State, payload: State[\"versionData\"]): void;\n\tversionStatus(state: State, payload: State[\"versionStatus\"]): void;\n\tversionDataExpired(state: State, payload: State[\"versionDataExpired\"]): void;\n\tserverHasSettings(state: State, value: State[\"serverHasSettings\"]): void;\n\tmessageSearchPendingQuery(state: State, value: State[\"messageSearchPendingQuery\"]): void;\n\tmessageSearchResults(state: State, value: State[\"messageSearchResults\"]): void;\n\taddMessageSearchResults(state: State, value: NonNullable<State[\"messageSearchResults\"]>): void;\n};\n\nconst mutations: Mutations = {\n\tappLoaded(state) {\n\t\tstate.appLoaded = true;\n\t},\n\tactiveChannel(state, netChan) {\n\t\tstate.activeChannel = netChan;\n\t},\n\tcurrentUserVisibleError(state, error) {\n\t\tstate.currentUserVisibleError = error;\n\t},\n\trefreshDesktopNotificationState(state) {\n\t\tstate.desktopNotificationState = detectDesktopNotificationState();\n\t},\n\tisAutoCompleting(state, isAutoCompleting) {\n\t\tstate.isAutoCompleting = isAutoCompleting;\n\t},\n\tisConnected(state, payload) {\n\t\tstate.isConnected = payload;\n\t},\n\tnetworks(state, networks) {\n\t\tstate.networks = networks;\n\t},\n\tmentions(state, mentions) {\n\t\tstate.mentions = mentions;\n\t},\n\tremoveNetwork(state, networkId) {\n\t\tstate.networks.splice(\n\t\t\tstate.networks.findIndex((n) => n.uuid === networkId),\n\t\t\t1\n\t\t);\n\t},\n\tsortNetworks(state, sortFn) {\n\t\tstate.networks.sort(sortFn);\n\t},\n\thasServiceWorker(state) {\n\t\tstate.hasServiceWorker = true;\n\t},\n\tpushNotificationState(state, pushNotificationState) {\n\t\tstate.pushNotificationState = pushNotificationState;\n\t},\n\tserverConfiguration(state, serverConfiguration) {\n\t\tstate.serverConfiguration = serverConfiguration;\n\t},\n\tsessions(state, payload) {\n\t\tstate.sessions = payload;\n\t},\n\tsidebarOpen(state, payload) {\n\t\tstate.sidebarOpen = payload;\n\t},\n\tsidebarDragging(state, payload) {\n\t\tstate.sidebarDragging = payload;\n\t},\n\ttoggleSidebar(state) {\n\t\tstate.sidebarOpen = !state.sidebarOpen;\n\t},\n\ttoggleUserlist(state) {\n\t\tstate.userlistOpen = !state.userlistOpen;\n\t},\n\tuserlistOpen(state, payload) {\n\t\tstate.userlistOpen = payload;\n\t},\n\tversionData(state, payload) {\n\t\tstate.versionData = payload;\n\t},\n\tversionStatus(state, payload) {\n\t\tstate.versionStatus = payload;\n\t},\n\tversionDataExpired(state, payload) {\n\t\tstate.versionDataExpired = payload;\n\t},\n\tserverHasSettings(state, value) {\n\t\tstate.serverHasSettings = value;\n\t},\n\tmessageSearchPendingQuery(state, value) {\n\t\tstate.messageSearchPendingQuery = value;\n\t},\n\tmessageSearchResults(state, value) {\n\t\tstate.messageSearchResults = value;\n\t},\n\taddMessageSearchResults(state, value) {\n\t\t// Append the search results and add networks and channels to new messages\n\t\tif (!state.messageSearchResults) {\n\t\t\tstate.messageSearchResults = {results: []};\n\t\t}\n\n\t\tif (!value) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst results = [...value.results, ...state.messageSearchResults.results];\n\n\t\tstate.messageSearchResults = {\n\t\t\tresults,\n\t\t};\n\t},\n};\n\nexport type TypedCommit = <T extends keyof Mutations>(\n\ttype: T,\n\tpayload?: Parameters<Mutations[T]>[1] | null,\n\toptions?: {root?: boolean}\n) => ReturnType<Mutations[T]>;\ntype TypedActionContext = Omit<ActionContext<State, State>, \"commit\"> & {\n\tcommit: TypedCommit;\n};\n\ntype Actions = {\n\tpartChannel(context: TypedActionContext, payload: NetChan): void;\n};\n\nconst actions: Actions = {\n\tpartChannel({commit, state}, netChan) {\n\t\tconst mentions = state.mentions.filter((msg) => !(msg.chanId === netChan.channel.id));\n\t\tcommit(\"mentions\", mentions);\n\t},\n};\n\nconst storePattern = {\n\tstate,\n\tmutations,\n\tactions,\n\tgetters,\n};\n\n// https://vuex.vuejs.org/guide/typescript-support.html#typing-usestore-composition-function\nexport const key: InjectionKey<Store<State>> = Symbol();\n\n// vuex types getters as any\nexport type TypedStore = Omit<Store<State>, \"getters\" | \"commit\"> & {\n\tgetters: CallableGetters;\n\tcommit: TypedCommit;\n\tstate: State & {\n\t\tsettings: SettingsState;\n\t};\n};\n\nexport const store = createStore(storePattern) as TypedStore;\n\nconst settingsStore = createSettingsStore(store);\n\n// Settings module is registered dynamically because it benefits\n// from a direct reference to the store\nstore.registerModule(\"settings\", settingsStore);\n\nexport function useStore() {\n\treturn baseUseStore(key) as TypedStore;\n}\n","import {update as updateCursor} from \"undate\";\n\nimport socket from \"./socket\";\nimport {store} from \"./store\";\n\nclass Uploader {\n\txhr: XMLHttpRequest | null = null;\n\tfileQueue: File[] = [];\n\ttokenKeepAlive: NodeJS.Timeout | null = null;\n\n\toverlay: HTMLDivElement | null = null;\n\tuploadProgressbar: HTMLSpanElement | null = null;\n\n\tonDragEnter = (e: DragEvent) => this.dragEnter(e);\n\tonDragOver = (e: DragEvent) => this.dragOver(e);\n\tonDragLeave = (e: DragEvent) => this.dragLeave(e);\n\tonDrop = (e: DragEvent) => this.drop(e);\n\tonPaste = (e: ClipboardEvent) => this.paste(e);\n\n\tinit() {\n\t\tsocket.on(\"upload:auth\", (token) => this.uploadNextFileInQueue(token));\n\t}\n\n\tmounted() {\n\t\tthis.overlay = document.getElementById(\"upload-overlay\") as HTMLDivElement;\n\t\tthis.uploadProgressbar = document.getElementById(\"upload-progressbar\") as HTMLSpanElement;\n\n\t\tdocument.addEventListener(\"dragenter\", this.onDragEnter);\n\t\tdocument.addEventListener(\"dragover\", this.onDragOver);\n\t\tdocument.addEventListener(\"dragleave\", this.onDragLeave);\n\t\tdocument.addEventListener(\"drop\", this.onDrop);\n\t\tdocument.addEventListener(\"paste\", this.onPaste);\n\t}\n\n\tunmounted() {\n\t\tdocument.removeEventListener(\"dragenter\", this.onDragEnter);\n\t\tdocument.removeEventListener(\"dragover\", this.onDragOver);\n\t\tdocument.removeEventListener(\"dragleave\", this.onDragLeave);\n\t\tdocument.removeEventListener(\"drop\", this.onDrop);\n\t\tdocument.removeEventListener(\"paste\", this.onPaste);\n\t}\n\n\tdragOver(event: DragEvent) {\n\t\tif (event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\t// Prevent dragover event completely and do nothing with it\n\t\t\t// This stops the browser from trying to guess which cursor to show\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tdragEnter(event: DragEvent) {\n\t\t// relatedTarget is the target where we entered the drag from\n\t\t// when dragging from another window, the target is null, otherwise its a DOM element\n\t\tif (!event.relatedTarget && event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.overlay?.classList.add(\"is-dragover\");\n\t\t}\n\t}\n\n\tdragLeave(event: DragEvent) {\n\t\t// If relatedTarget is null, that means we are no longer dragging over the page\n\t\tif (!event.relatedTarget) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.overlay?.classList.remove(\"is-dragover\");\n\t\t}\n\t}\n\n\tdrop(event: DragEvent) {\n\t\tif (!event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tthis.overlay?.classList.remove(\"is-dragover\");\n\n\t\tlet files: (File | null)[];\n\n\t\tif (event.dataTransfer.items) {\n\t\t\tfiles = Array.from(event.dataTransfer.items)\n\t\t\t\t.filter((item) => item.kind === \"file\")\n\t\t\t\t.map((item) => item.getAsFile());\n\t\t} else {\n\t\t\tfiles = Array.from(event.dataTransfer.files);\n\t\t}\n\n\t\tthis.triggerUpload(files);\n\t}\n\n\tpaste(event: ClipboardEvent) {\n\t\tconst items = event.clipboardData?.items;\n\t\tconst files: (File | null)[] = [];\n\n\t\tif (!items) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tif (items[i].kind === \"file\") {\n\t\t\t\tfiles.push(items[i].getAsFile());\n\t\t\t}\n\t\t}\n\n\t\tif (files.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tthis.triggerUpload(files);\n\t}\n\n\ttriggerUpload(files: (File | null)[]) {\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!store.state.isConnected) {\n\t\t\tthis.handleResponse({\n\t\t\t\terror: `You are currently disconnected, unable to initiate upload process.`,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst wasQueueEmpty = this.fileQueue.length === 0;\n\t\tconst maxFileSize = store.state.serverConfiguration?.fileUploadMaxFileSize || 0;\n\n\t\tfor (const file of files) {\n\t\t\tif (!file) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (maxFileSize > 0 && file.size > maxFileSize) {\n\t\t\t\tthis.handleResponse({\n\t\t\t\t\terror: `File ${file.name} is over the maximum allowed size`,\n\t\t\t\t});\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.fileQueue.push(file);\n\t\t}\n\n\t\t// if the queue was empty and we added some files to it, and there currently\n\t\t// is no upload in process, request a token to start the upload process\n\t\tif (wasQueueEmpty && this.xhr === null && this.fileQueue.length > 0) {\n\t\t\tthis.requestToken();\n\t\t}\n\t}\n\n\trequestToken() {\n\t\tsocket.emit(\"upload:auth\");\n\t}\n\n\tsetProgress(value: number) {\n\t\tif (!this.uploadProgressbar) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.uploadProgressbar.classList.toggle(\"upload-progressbar-visible\", value > 0);\n\t\tthis.uploadProgressbar.style.width = `${value}%`;\n\t}\n\n\tuploadNextFileInQueue(token: string) {\n\t\tconst file = this.fileQueue.shift();\n\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Tell the server that we are still upload to this token\n\t\t// so it does not become invalidated and fail the upload.\n\t\t// This issue only happens if The Lounge is proxied through other software\n\t\t// as it may buffer the upload before the upload request will be processed by The Lounge.\n\t\tthis.tokenKeepAlive = setInterval(() => socket.emit(\"upload:ping\", token), 40 * 1000);\n\n\t\tif (\n\t\t\tstore.state.settings.uploadCanvas &&\n\t\t\tfile.type.startsWith(\"image/\") &&\n\t\t\t!file.type.includes(\"svg\") &&\n\t\t\tfile.type !== \"image/gif\"\n\t\t) {\n\t\t\tthis.renderImage(file, (newFile) => this.performUpload(token, newFile));\n\t\t} else {\n\t\t\tthis.performUpload(token, file);\n\t\t}\n\t}\n\n\trenderImage(file: File, callback: (file: File) => void) {\n\t\tconst fileReader = new FileReader();\n\n\t\tfileReader.onabort = () => callback(file);\n\t\tfileReader.onerror = () => fileReader.abort();\n\n\t\tfileReader.onload = () => {\n\t\t\tconst img = new Image();\n\n\t\t\timg.onerror = () => callback(file);\n\n\t\t\timg.onload = () => {\n\t\t\t\tconst canvas = document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = img.width;\n\t\t\t\tcanvas.height = img.height;\n\t\t\t\tconst ctx = canvas.getContext(\"2d\");\n\n\t\t\t\tif (!ctx) {\n\t\t\t\t\tthrow new Error(\"Could not get canvas context in upload\");\n\t\t\t\t}\n\n\t\t\t\tctx.drawImage(img, 0, 0);\n\n\t\t\t\tcanvas.toBlob((blob) => {\n\t\t\t\t\tcallback(new File([blob!], file.name));\n\t\t\t\t}, file.type);\n\t\t\t};\n\n\t\t\timg.src = String(fileReader.result);\n\t\t};\n\n\t\tfileReader.readAsDataURL(file);\n\t}\n\n\tperformUpload(token: string, file: File) {\n\t\tthis.xhr = new XMLHttpRequest();\n\n\t\tthis.xhr.upload.addEventListener(\n\t\t\t\"progress\",\n\t\t\t(e) => {\n\t\t\t\tconst percent = Math.floor((e.loaded / e.total) * 1000) / 10;\n\t\t\t\tthis.setProgress(percent);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tthis.xhr.onreadystatechange = () => {\n\t\t\tif (this.xhr?.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tlet response;\n\n\t\t\t\ttry {\n\t\t\t\t\tresponse = JSON.parse(this.xhr.responseText);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// This is just a safe guard and should not happen if server doesn't throw any errors.\n\t\t\t\t\t// Browsers break the HTTP spec by aborting the request without reading any response data,\n\t\t\t\t\t// if there is still data to be uploaded. Servers will only error in extreme cases like bad\n\t\t\t\t\t// authentication or server-side errors.\n\t\t\t\t\tresponse = {\n\t\t\t\t\t\terror: `Upload aborted: ${this.xhr.statusText} (HTTP ${this.xhr.status})`,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthis.handleResponse(response);\n\n\t\t\t\tthis.xhr = null;\n\n\t\t\t\t// this file was processed, if we still have files in the queue, upload the next one\n\t\t\t\tif (this.fileQueue.length > 0) {\n\t\t\t\t\tthis.requestToken();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst formData = new FormData();\n\t\tformData.append(\"file\", file);\n\t\tthis.xhr.open(\"POST\", `uploads/new/${token}`);\n\t\tthis.xhr.send(formData);\n\t}\n\n\thandleResponse(response: {error?: string; url?: string}) {\n\t\tthis.setProgress(0);\n\n\t\tif (this.tokenKeepAlive) {\n\t\t\tclearInterval(this.tokenKeepAlive);\n\t\t\tthis.tokenKeepAlive = null;\n\t\t}\n\n\t\tif (response.error) {\n\t\t\tstore.commit(\"currentUserVisibleError\", response.error);\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.url) {\n\t\t\tthis.insertUploadUrl(response.url);\n\t\t}\n\t}\n\n\tinsertUploadUrl(url: string) {\n\t\tconst fullURL = new URL(url, location.toString()).toString();\n\t\tconst textbox = document.getElementById(\"input\");\n\n\t\tif (!(textbox instanceof HTMLTextAreaElement)) {\n\t\t\tthrow new Error(\"Could not find textbox in upload\");\n\t\t}\n\n\t\tconst initStart = textbox.selectionStart;\n\n\t\t// Get the text before the cursor, and add a space if it's not in the beginning\n\t\tconst headToCursor = initStart > 0 ? textbox.value.substring(0, initStart) + \" \" : \"\";\n\n\t\t// Get the remaining text after the cursor\n\t\tconst cursorToTail = textbox.value.substring(initStart);\n\n\t\t// Construct the value until the point where we want the cursor to be\n\t\tconst textBeforeTail = headToCursor + fullURL + \" \";\n\n\t\tupdateCursor(textbox, textBeforeTail + cursorToTail);\n\n\t\t// Set the cursor after the link and a space\n\t\ttextbox.selectionStart = textbox.selectionEnd = textBeforeTail.length;\n\t}\n\n\t// TODO: This is a temporary hack while Vue porting is finalized\n\tabort() {\n\t\tthis.fileQueue = [];\n\n\t\tif (this.xhr) {\n\t\t\tthis.xhr.abort();\n\t\t\tthis.xhr = null;\n\t\t}\n\t}\n}\n\nconst instance = new Uploader();\n\nexport default {\n\tabort: () => instance.abort(),\n\tinitialize: () => instance.init(),\n\tmounted: () => instance.mounted(),\n\tunmounted: () => instance.unmounted(),\n\ttriggerUpload: (files) => instance.triggerUpload(files),\n};\n","import {store} from \"../store\";\nimport socket from \"../socket\";\n\nsocket.on(\"disconnect\", handleDisconnect);\nsocket.on(\"connect_error\", handleDisconnect);\nsocket.on(\"error\", handleDisconnect);\n\nsocket.io.on(\"reconnect_attempt\", function (attempt) {\n\tstore.commit(\"currentUserVisibleError\", `Reconnecting (attempt ${attempt})`);\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"connecting\", function () {\n\tstore.commit(\"currentUserVisibleError\", \"Connecting\");\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"connect\", function () {\n\t// Clear send buffer when reconnecting, socket.io would emit these\n\t// immediately upon connection and it will have no effect, so we ensure\n\t// nothing is sent to the server that might have happened.\n\tsocket.sendBuffer = [];\n\n\tstore.commit(\"currentUserVisibleError\", \"Finalizing connection\");\n\tupdateLoadingMessage();\n});\n\nfunction handleDisconnect(data) {\n\tconst message = String(data.message || data);\n\n\tstore.commit(\"isConnected\", false);\n\n\tif (!socket.io.reconnection()) {\n\t\tstore.commit(\n\t\t\t\"currentUserVisibleError\",\n\t\t\t`Disconnected from the server (${message}), The Lounge does not reconnect in public mode.`\n\t\t);\n\t\tupdateLoadingMessage();\n\t\treturn;\n\t}\n\n\tstore.commit(\"currentUserVisibleError\", `Waiting to reconnect (${message})`);\n\tupdateLoadingMessage();\n\n\t// If the server shuts down, socket.io skips reconnection\n\t// and we have to manually call connect to start the process\n\t// However, do not reconnect if TL client manually closed the connection\n\t// @ts-expect-error Property 'skipReconnect' is private and only accessible within class 'Manager<ListenEvents, EmitEvents>'.ts(2341)\n\tif (socket.io.skipReconnect && message !== \"io client disconnect\") {\n\t\trequestIdleCallback(() => socket.connect(), 2000);\n\t}\n}\n\nfunction requestIdleCallback(callback, timeout) {\n\tif (window.requestIdleCallback) {\n\t\t// During an idle period the user agent will run idle callbacks in FIFO order\n\t\t// until either the idle period ends or there are no more idle callbacks eligible to be run.\n\t\twindow.requestIdleCallback(callback, {timeout});\n\t} else {\n\t\tcallback();\n\t}\n}\n\nfunction updateLoadingMessage() {\n\tconst loading = document.getElementById(\"loading-page-message\");\n\n\tif (loading) {\n\t\tloading.textContent = store.state.currentUserVisibleError;\n\t}\n}\n","import socket from \"../socket\";\nimport storage from \"../localStorage\";\nimport {router, navigate} from \"../router\";\nimport {store} from \"../store\";\nimport location from \"../location\";\nlet lastServerHash: number | null = null;\n\ndeclare global {\n\tinterface Window {\n\t\tg_TheLoungeRemoveLoading?: () => void;\n\t}\n}\n\nsocket.on(\"auth:success\", function () {\n\tstore.commit(\"currentUserVisibleError\", \"Loading messages\");\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"auth:failed\", async function () {\n\tstorage.remove(\"token\");\n\n\tif (store.state.appLoaded) {\n\t\treturn reloadPage(\"Authentication failed, reloading\");\n\t}\n\n\tawait showSignIn();\n});\n\nsocket.on(\"auth:start\", async function (serverHash) {\n\t// If we reconnected and serverHash differs, that means the server restarted\n\t// And we will reload the page to grab the latest version\n\tif (lastServerHash && serverHash !== lastServerHash) {\n\t\treturn reloadPage(\"Server restarted, reloading\");\n\t}\n\n\tlastServerHash = serverHash;\n\n\tconst user = storage.get(\"user\");\n\tconst token = storage.get(\"token\");\n\tconst doFastAuth = user && token;\n\n\t// If we reconnect and no longer have a stored token, reload the page\n\tif (store.state.appLoaded && !doFastAuth) {\n\t\treturn reloadPage(\"Authentication failed, reloading\");\n\t}\n\n\t// If we have user and token stored, perform auth without showing sign-in first\n\tif (doFastAuth) {\n\t\tstore.commit(\"currentUserVisibleError\", \"Authorizing\");\n\t\tupdateLoadingMessage();\n\n\t\tlet lastMessage = -1;\n\n\t\tfor (const network of store.state.networks) {\n\t\t\tfor (const chan of network.channels) {\n\t\t\t\tif (chan.messages.length > 0) {\n\t\t\t\t\tconst id = chan.messages[chan.messages.length - 1].id;\n\n\t\t\t\t\tif (lastMessage < id) {\n\t\t\t\t\t\tlastMessage = id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst openChannel =\n\t\t\t(store.state.activeChannel && store.state.activeChannel.channel.id) || null;\n\n\t\tsocket.emit(\"auth:perform\", {\n\t\t\tuser,\n\t\t\ttoken,\n\t\t\tlastMessage,\n\t\t\topenChannel,\n\t\t\thasConfig: store.state.serverConfiguration !== null,\n\t\t});\n\t} else {\n\t\tawait showSignIn();\n\t}\n});\n\nasync function showSignIn() {\n\t// TODO: this flashes grey background because it takes a little time for vue to mount signin\n\tif (window.g_TheLoungeRemoveLoading) {\n\t\twindow.g_TheLoungeRemoveLoading();\n\t}\n\n\tif (router.currentRoute.value.name !== \"SignIn\") {\n\t\tawait navigate(\"SignIn\");\n\t}\n}\n\nfunction reloadPage(message: string) {\n\tsocket.disconnect();\n\tstore.commit(\"currentUserVisibleError\", message);\n\tlocation.reload();\n}\n\nfunction updateLoadingMessage() {\n\tconst loading = document.getElementById(\"loading-page-message\");\n\n\tif (loading) {\n\t\tloading.textContent = store.state.currentUserVisibleError;\n\t}\n}\n","import {nextTick} from \"vue\";\nimport socket from \"../socket\";\nimport storage from \"../localStorage\";\nimport {router, switchToChannel, navigate} from \"../router\";\nimport {store} from \"../store\";\nimport parseIrcUri from \"../helpers/parseIrcUri\";\nimport {ClientNetwork, InitClientChan} from \"../types\";\n\nsocket.on(\"init\", async function (data) {\n\tstore.commit(\"networks\", mergeNetworkData(data.networks));\n\tstore.commit(\"isConnected\", true);\n\tstore.commit(\"currentUserVisibleError\", null);\n\n\tif (data.token) {\n\t\tstorage.set(\"token\", data.token);\n\t}\n\n\tif (!store.state.appLoaded) {\n\t\tstore.commit(\"appLoaded\");\n\n\t\tsocket.emit(\"setting:get\");\n\n\t\ttry {\n\t\t\tawait router.isReady();\n\t\t} catch (e: any) {\n\t\t\t// if the router throws an error, it means the route isn't matched,\n\t\t\t// so we can continue on.\n\t\t}\n\n\t\tif (window.g_TheLoungeRemoveLoading) {\n\t\t\twindow.g_TheLoungeRemoveLoading();\n\t\t}\n\n\t\tconst handledQuery = await handleQueryParams();\n\n\t\t// If we handled query parameters like irc:// links or just general\n\t\t// connect parameters in public mode, then nothing to do here\n\t\tif (!handledQuery) {\n\t\t\t// If we are on an unknown route or still on SignIn component\n\t\t\t// then we can open last known channel on server, or Connect window if none\n\t\t\tif (\n\t\t\t\t!router.currentRoute?.value?.name ||\n\t\t\t\trouter.currentRoute?.value?.name === \"SignIn\"\n\t\t\t) {\n\t\t\t\tconst channel = store.getters.findChannel(data.active);\n\n\t\t\t\tif (channel) {\n\t\t\t\t\tswitchToChannel(channel.channel);\n\t\t\t\t} else if (store.state.networks.length > 0) {\n\t\t\t\t\t// Server is telling us to open a channel that does not exist\n\t\t\t\t\t// For example, it can be unset if you first open the page after server start\n\t\t\t\t\tswitchToChannel(store.state.networks[0].channels[0]);\n\t\t\t\t} else {\n\t\t\t\t\tawait navigate(\"Connect\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nfunction mergeNetworkData(newNetworks: ClientNetwork[]) {\n\tconst stored = storage.get(\"thelounge.networks.collapsed\");\n\tconst collapsedNetworks = stored ? new Set(JSON.parse(stored)) : new Set();\n\n\tfor (let n = 0; n < newNetworks.length; n++) {\n\t\tconst network = newNetworks[n];\n\t\tconst currentNetwork = store.getters.findNetwork(network.uuid);\n\n\t\t// If this network is new, set some default variables and initalize channel variables\n\t\tif (!currentNetwork) {\n\t\t\tnetwork.isJoinChannelShown = false;\n\t\t\tnetwork.isCollapsed = collapsedNetworks.has(network.uuid);\n\t\t\tnetwork.channels.forEach(store.getters.initChannel);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge received network object into existing network object on the client\n\t\t// so the object reference stays the same (e.g. for currentChannel state)\n\t\tfor (const key in network) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(network, key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Channels require extra care to be merged correctly\n\t\t\tif (key === \"channels\") {\n\t\t\t\tcurrentNetwork.channels = mergeChannelData(\n\t\t\t\t\tcurrentNetwork.channels,\n\t\t\t\t\tnetwork.channels as InitClientChan[]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcurrentNetwork[key] = network[key];\n\t\t\t}\n\t\t}\n\n\t\tnewNetworks[n] = currentNetwork;\n\t}\n\n\treturn newNetworks;\n}\n\nfunction mergeChannelData(oldChannels: InitClientChan[], newChannels: InitClientChan[]) {\n\tfor (let c = 0; c < newChannels.length; c++) {\n\t\tconst channel = newChannels[c];\n\t\tconst currentChannel = oldChannels.find((chan) => chan.id === channel.id);\n\n\t\t// This is a new channel that was joined while client was disconnected, initialize it\n\t\tif (!currentChannel) {\n\t\t\tstore.getters.initChannel(channel);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge received channel object into existing currentChannel\n\t\t// so the object references are exactly the same (e.g. in store.state.activeChannel)\n\t\tfor (const key in channel) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(channel, key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Server sends an empty users array, client requests it whenever needed\n\t\t\tif (key === \"users\") {\n\t\t\t\tif (channel.type === \"channel\") {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\tstore.state.activeChannel.channel === currentChannel\n\t\t\t\t\t) {\n\t\t\t\t\t\t// For currently open channel, request the user list straight away\n\t\t\t\t\t\tsocket.emit(\"names\", {\n\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// For all other channels, mark the user list as outdated\n\t\t\t\t\t\t// so an update will be requested whenever user switches to these channels\n\t\t\t\t\t\tcurrentChannel.usersOutdated = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Server sends total count of messages in memory, we compare it to amount of messages\n\t\t\t// on the client, and decide whether theres more messages to load from server\n\t\t\tif (key === \"totalMessages\") {\n\t\t\t\tcurrentChannel.moreHistoryAvailable =\n\t\t\t\t\tchannel.totalMessages! > currentChannel.messages.length;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Reconnection only sends new messages, so merge it on the client\n\t\t\t// Only concat if server sent us less than 100 messages so we don't introduce gaps\n\t\t\tif (key === \"messages\" && currentChannel.messages && channel.messages.length < 100) {\n\t\t\t\tcurrentChannel.messages = currentChannel.messages.concat(channel.messages);\n\t\t\t} else {\n\t\t\t\tcurrentChannel[key] = channel[key];\n\t\t\t}\n\t\t}\n\n\t\tnewChannels[c] = currentChannel;\n\t}\n\n\treturn newChannels;\n}\n\nasync function handleQueryParams() {\n\tif (!(\"URLSearchParams\" in window)) {\n\t\treturn false;\n\t}\n\n\tconst params = new URLSearchParams(document.location.search);\n\n\tconst cleanParams = () => {\n\t\t// Remove query parameters from url without reloading the page\n\t\tconst cleanUri = window.location.origin + window.location.pathname + window.location.hash;\n\t\twindow.history.replaceState({}, document.title, cleanUri);\n\t};\n\n\tif (params.has(\"uri\")) {\n\t\t// Set default connection settings from IRC protocol links\n\t\tconst uri = params.get(\"uri\");\n\t\tconst queryParams = parseIrcUri(String(uri));\n\n\t\tcleanParams();\n\t\tawait router.push({name: \"Connect\", query: queryParams});\n\n\t\treturn true;\n\t} else if (document.body.classList.contains(\"public\") && document.location.search) {\n\t\t// Set default connection settings from url params\n\t\tconst queryParams = Object.fromEntries(params.entries());\n\n\t\tcleanParams();\n\t\tawait router.push({name: \"Connect\", query: queryParams});\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","import constants from \"../constants\";\nimport socket from \"../socket\";\n\nsocket.on(\"commands\", function (commands) {\n\tif (commands) {\n\t\tconstants.commands = commands;\n\t}\n});\n","export default (stringUri: string) => {\n\tconst data = {\n\t\tname: \"\",\n\t\thost: \"\",\n\t\tport: \"\",\n\t\tjoin: \"\",\n\t\ttls: false,\n\t};\n\n\ttry {\n\t\t// https://tools.ietf.org/html/draft-butcher-irc-url-04\n\t\tconst uri = new URL(stringUri);\n\n\t\t// Replace protocol with a \"special protocol\" (that's what it's called in WHATWG spec)\n\t\t// So that the uri can be properly parsed\n\t\tif (uri.protocol === \"irc:\") {\n\t\t\turi.protocol = \"http:\";\n\n\t\t\tif (!uri.port) {\n\t\t\t\turi.port = \"6667\";\n\t\t\t}\n\t\t} else if (uri.protocol === \"ircs:\") {\n\t\t\turi.protocol = \"https:\";\n\n\t\t\tif (!uri.port) {\n\t\t\t\turi.port = \"6697\";\n\t\t\t}\n\n\t\t\tdata.tls = true;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!uri.hostname) {\n\t\t\treturn {};\n\t\t}\n\n\t\tdata.host = data.name = uri.hostname;\n\t\tdata.port = uri.port;\n\n\t\tlet channel = \"\";\n\n\t\tif (uri.pathname.length > 1) {\n\t\t\tchannel = uri.pathname.substr(1); // Remove slash\n\t\t}\n\n\t\tif (uri.hash.length > 1) {\n\t\t\tchannel += uri.hash;\n\t\t}\n\n\t\t// We don't split channels or append # here because the connect window takes care of that\n\t\tdata.join = channel;\n\t} catch (e) {\n\t\t// do nothing on invalid uri\n\t}\n\n\treturn data;\n};\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"join\", function (data) {\n\tstore.getters.initChannel(data.chan);\n\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tnetwork.channels.splice(data.index || -1, 0, data.chan);\n\n\t// Queries do not automatically focus, unless the user did a whois\n\tif (data.chan.type === \"query\" && !data.shouldOpen) {\n\t\treturn;\n\t}\n\n\tconst chan = store.getters.findChannel(data.chan.id);\n\n\tif (chan) {\n\t\tswitchToChannel(chan.channel);\n\t} else {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(\"Could not find channel\", data.chan.id);\n\t}\n});\n","import {nextTick} from \"vue\";\n\nimport socket from \"../socket\";\nimport {store} from \"../store\";\nimport {ClientMessage} from \"../types\";\n\nsocket.on(\"more\", async (data) => {\n\tconst channel = store.getters.findChannel(data.chan)?.channel;\n\n\tif (!channel) {\n\t\treturn;\n\t}\n\n\tchannel.inputHistory = channel.inputHistory.concat(\n\t\tdata.messages\n\t\t\t.filter((m) => m.self && m.text && m.type === \"message\")\n\t\t\t.map((m) => m.text)\n\t\t\t.reverse()\n\t\t\t.slice(0, 100 - channel.inputHistory.length)\n\t);\n\tchannel.moreHistoryAvailable =\n\t\tdata.totalMessages > channel.messages.length + data.messages.length;\n\tchannel.messages.unshift(...(data.messages as ClientMessage[]));\n\n\tawait nextTick();\n\tchannel.historyLoading = false;\n});\n","/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport socket from \"../socket\";\nimport {cleanIrcMessage} from \"../../../shared/irc\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\nimport {ClientChan, ClientMention, ClientMessage, NetChan} from \"../types\";\n\nlet pop;\n\ntry {\n\tpop = new Audio();\n\tpop.src = \"audio/pop.wav\";\n} catch (e) {\n\tpop = {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tplay() {},\n\t};\n}\n\nsocket.on(\"msg\", function (data) {\n\tconst receivingChannel = store.getters.findChannel(data.chan);\n\n\tif (!receivingChannel) {\n\t\treturn;\n\t}\n\n\tlet channel = receivingChannel.channel;\n\tlet isActiveChannel =\n\t\tstore.state.activeChannel && store.state.activeChannel.channel === channel;\n\n\t// Display received notices and errors in currently active channel.\n\t// Reloading the page will put them back into the lobby window.\n\tif (data.msg.showInActive) {\n\t\t// We only want to put errors/notices in active channel if they arrive on the same network\n\t\tif (\n\t\t\tstore.state.activeChannel &&\n\t\t\tstore.state.activeChannel.network === receivingChannel.network\n\t\t) {\n\t\t\tchannel = store.state.activeChannel.channel;\n\n\t\t\t// Do not update unread/highlight counters for this channel\n\t\t\t// as we are putting this message in the active channel\n\t\t\tisActiveChannel = true;\n\n\t\t\tif (data.chan === channel.id) {\n\t\t\t\t// If active channel is the intended channel for this message,\n\t\t\t\t// remove the showInActive flag\n\t\t\t\tdelete data.msg.showInActive;\n\t\t\t} else {\n\t\t\t\tdata.chan = channel.id;\n\t\t\t}\n\t\t} else {\n\t\t\tdelete data.msg.showInActive;\n\t\t}\n\t}\n\n\t// Do not set unread counter for channel if it is currently active on this client\n\t// It may increase on the server before it processes channel open event from this client\n\tif (!isActiveChannel) {\n\t\tif (typeof data.highlight !== \"undefined\") {\n\t\t\tchannel.highlight = data.highlight;\n\t\t}\n\n\t\tif (typeof data.unread !== \"undefined\") {\n\t\t\tchannel.unread = data.unread;\n\t\t}\n\t}\n\n\tchannel.messages.push(data.msg);\n\n\tif (data.msg.self) {\n\t\tchannel.firstUnread = data.msg.id;\n\t} else {\n\t\tnotifyMessage(data.chan, channel, store.state.activeChannel, data.msg);\n\t}\n\n\tlet messageLimit = 0;\n\n\tif (!isActiveChannel) {\n\t\t// If message arrives in non active channel, keep only 100 messages\n\t\tmessageLimit = 100;\n\t} else if (channel.scrolledToBottom) {\n\t\t// If message arrives in active channel, keep 1500 messages if scroll is currently at the bottom\n\t\t// One history load may load up to 1000 messages at once if condendesed or hidden events are enabled\n\t\tmessageLimit = 1500;\n\t}\n\n\tif (messageLimit > 0 && channel.messages.length > messageLimit) {\n\t\tchannel.messages.splice(0, channel.messages.length - messageLimit);\n\t\tchannel.moreHistoryAvailable = true;\n\t}\n\n\tif (channel.type === \"channel\") {\n\t\tupdateUserList(channel, data.msg);\n\t}\n});\n\nfunction notifyMessage(\n\ttargetId: number,\n\tchannel: ClientChan,\n\tactiveChannel: NetChan | undefined,\n\tmsg: ClientMessage\n) {\n\tif (channel.muted) {\n\t\treturn;\n\t}\n\n\tif (msg.highlight || (store.state.settings.notifyAllMessages && msg.type === \"message\")) {\n\t\tif (!document.hasFocus() || !activeChannel || activeChannel.channel !== channel) {\n\t\t\tif (store.state.settings.notification) {\n\t\t\t\ttry {\n\t\t\t\t\tpop.play();\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// On mobile, sounds can not be played without user interaction.\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tstore.state.settings.desktopNotifications &&\n\t\t\t\t\"Notification\" in window &&\n\t\t\t\tNotification.permission === \"granted\"\n\t\t\t) {\n\t\t\t\tlet title: string;\n\t\t\t\tlet body: string;\n\n\t\t\t\tif (msg.type === \"invite\") {\n\t\t\t\t\ttitle = \"New channel invite:\";\n\t\t\t\t\tbody = msg.from.nick + \" invited you to \" + msg.channel;\n\t\t\t\t} else {\n\t\t\t\t\ttitle = String(msg.from.nick);\n\n\t\t\t\t\tif (channel.type !== \"query\") {\n\t\t\t\t\t\ttitle += ` (${channel.name})`;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (msg.type === \"message\") {\n\t\t\t\t\t\ttitle += \" says:\";\n\t\t\t\t\t}\n\n\t\t\t\t\tbody = cleanIrcMessage(msg.text);\n\t\t\t\t}\n\n\t\t\t\tconst timestamp = Date.parse(String(msg.time));\n\n\t\t\t\ttry {\n\t\t\t\t\tif (store.state.hasServiceWorker) {\n\t\t\t\t\t\tnavigator.serviceWorker.ready\n\t\t\t\t\t\t\t.then((registration) => {\n\t\t\t\t\t\t\t\tregistration.active?.postMessage({\n\t\t\t\t\t\t\t\t\ttype: \"notification\",\n\t\t\t\t\t\t\t\t\tchanId: targetId,\n\t\t\t\t\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t// no-op\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst notify = new Notification(title, {\n\t\t\t\t\t\t\ttag: `chan-${targetId}`,\n\t\t\t\t\t\t\tbadge: \"img/icon-alerted-black-transparent-bg-72x72px.png\",\n\t\t\t\t\t\t\ticon: \"img/icon-alerted-grey-bg-192x192px.png\",\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnotify.addEventListener(\"click\", function () {\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\twindow.focus();\n\n\t\t\t\t\t\t\tconst channelTarget = store.getters.findChannel(targetId);\n\n\t\t\t\t\t\t\tif (channelTarget) {\n\t\t\t\t\t\t\t\tswitchToChannel(channelTarget.channel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// `new Notification(...)` is not supported and should be silenced.\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateUserList(channel, msg) {\n\tif (msg.type === \"message\" || msg.type === \"action\") {\n\t\tconst user = channel.users.find((u) => u.nick === msg.from.nick);\n\n\t\tif (user) {\n\t\t\tuser.lastMessage = new Date(msg.time).getTime() || Date.now();\n\t\t}\n\t} else if (msg.type === \"quit\" || msg.type === \"part\") {\n\t\tconst idx = channel.users.findIndex((u) => u.nick === msg.from.nick);\n\n\t\tif (idx > -1) {\n\t\t\tchannel.users.splice(idx, 1);\n\t\t}\n\t} else if (msg.type === \"kick\") {\n\t\tconst idx = channel.users.findIndex((u) => u.nick === msg.target.nick);\n\n\t\tif (idx > -1) {\n\t\t\tchannel.users.splice(idx, 1);\n\t\t}\n\t}\n}\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"msg:preview\", function (data) {\n\tconst netChan = store.getters.findChannel(data.chan);\n\tconst message = netChan?.channel.messages.find((m) => m.id === data.id);\n\n\tif (!message) {\n\t\treturn;\n\t}\n\n\tconst previewIndex = message.previews.findIndex((m) => m.link === data.preview.link);\n\n\tif (previewIndex > -1) {\n\t\tmessage.previews[previewIndex] = data.preview;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"msg:special\", function (data) {\n\tconst netChan = store.getters.findChannel(data.chan);\n\n\tif (!netChan) {\n\t\treturn;\n\t}\n\n\tnetChan.channel.data = data.data;\n\tswitchToChannel(netChan.channel);\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"names\", function (data) {\n\tconst netChan = store.getters.findChannel(data.id);\n\n\tif (netChan) {\n\t\tnetChan.channel.users = data.users;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"network\", function (data) {\n\tconst network = data.networks[0];\n\n\tnetwork.isJoinChannelShown = false;\n\tnetwork.isCollapsed = false;\n\tnetwork.channels.forEach(store.getters.initChannel);\n\n\tstore.commit(\"networks\", [...store.state.networks, network]);\n\n\t// Open last channel specified in `join`\n\tswitchToChannel(network.channels[network.channels.length - 1]);\n});\n\nsocket.on(\"network:options\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (network) {\n\t\tnetwork.serverOptions = data.serverOptions as typeof network.serverOptions;\n\t}\n});\n\nsocket.on(\"network:status\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tnetwork.status.connected = data.connected;\n\tnetwork.status.secure = data.secure;\n\n\tif (!data.connected) {\n\t\tnetwork.channels.forEach((channel) => {\n\t\t\tchannel.users = [];\n\t\t\tchannel.state = 0;\n\t\t});\n\t}\n});\n\nsocket.on(\"channel:state\", function (data) {\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.state = data.state;\n\t}\n});\n\nsocket.on(\"network:info\", function (data) {\n\tconst network = store.getters.findNetwork(data.uuid);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tfor (const key in data) {\n\t\tnetwork[key] = data[key];\n\t}\n});\n\nsocket.on(\"network:name\", function (data) {\n\tconst network = store.getters.findNetwork(data.uuid);\n\n\tif (network) {\n\t\tnetwork.name = network.channels[0].name = data.name;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"nick\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (network) {\n\t\tnetwork.nick = data.nick;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\n// Sync unread badge and marker when other clients open a channel\nsocket.on(\"open\", function (id) {\n\tif (id < 1) {\n\t\treturn;\n\t}\n\n\t// Don't do anything if the channel is active on this client\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === id) {\n\t\treturn;\n\t}\n\n\t// Clear the unread badge\n\tconst channel = store.getters.findChannel(id);\n\n\tif (channel) {\n\t\tchannel.channel.highlight = 0;\n\t\tchannel.channel.unread = 0;\n\n\t\tif (channel.channel.messages.length > 0) {\n\t\t\tchannel.channel.firstUnread =\n\t\t\t\tchannel.channel.messages[channel.channel.messages.length - 1].id;\n\t\t}\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"part\", async function (data) {\n\t// When parting from the active channel/query, jump to the network's lobby\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === data.chan) {\n\t\tswitchToChannel(store.state.activeChannel.network.channels[0]);\n\t}\n\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (!channel) {\n\t\treturn;\n\t}\n\n\tchannel.network.channels.splice(\n\t\tchannel.network.channels.findIndex((c) => c.id === data.chan),\n\t\t1\n\t);\n\n\tawait store.dispatch(\"partChannel\", channel);\n});\n","import socket from \"../socket\";\nimport {switchToChannel, navigate} from \"../router\";\nimport {store} from \"../store\";\n\nsocket.on(\"quit\", async function (data) {\n\t// If we're in a channel, and it's on the network that is being removed,\n\t// then open another channel window\n\tconst isCurrentNetworkBeingRemoved =\n\t\tstore.state.activeChannel && store.state.activeChannel.network.uuid === data.network;\n\n\tstore.commit(\"removeNetwork\", data.network);\n\n\tif (!isCurrentNetworkBeingRemoved) {\n\t\treturn;\n\t}\n\n\tif (store.state.networks.length > 0) {\n\t\tswitchToChannel(store.state.networks[0].channels[0]);\n\t} else {\n\t\tawait navigate(\"Connect\");\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"sync_sort\", function (data) {\n\tconst order = data.order;\n\n\tswitch (data.type) {\n\t\tcase \"networks\":\n\t\t\tstore.commit(\n\t\t\t\t\"sortNetworks\",\n\t\t\t\t(a, b) => (order as string[]).indexOf(a.uuid) - (order as string[]).indexOf(b.uuid)\n\t\t\t);\n\n\t\t\tbreak;\n\n\t\tcase \"channels\": {\n\t\t\tconst network = store.getters.findNetwork(data.target);\n\n\t\t\tif (!network) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnetwork.channels.sort(\n\t\t\t\t(a, b) => (order as number[]).indexOf(a.id) - (order as number[]).indexOf(b.id)\n\t\t\t);\n\n\t\t\tbreak;\n\t\t}\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"topic\", function (data) {\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.topic = data.topic;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"users\", function (data) {\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === data.chan) {\n\t\treturn socket.emit(\"names\", {\n\t\t\ttarget: data.chan,\n\t\t});\n\t}\n\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.usersOutdated = true;\n\t}\n});\n","import socket from \"../socket\";\nimport Auth from \"../auth\";\n\nsocket.on(\"sign-out\", function () {\n\tAuth.signout();\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"sessions:list\", function (data) {\n\tdata.sort((a, b) => b.lastUse - a.lastUse);\n\tstore.commit(\"sessions\", data);\n});\n","import socket from \"../socket\";\nimport upload from \"../upload\";\nimport {store} from \"../store\";\n\nsocket.once(\"configuration\", function (data) {\n\tstore.commit(\"serverConfiguration\", data);\n\n\t// 'theme' setting depends on serverConfiguration.themes so\n\t// settings cannot be applied before this point\n\tvoid store.dispatch(\"settings/applyAll\");\n\n\tif (data.fileUpload) {\n\t\tupload.initialize();\n\t}\n\n\t// If localStorage contains a theme that does not exist on this server, switch\n\t// back to its default theme.\n\tconst currentTheme = data.themes.find((t) => t.name === store.state.settings.theme);\n\n\tif (currentTheme === undefined) {\n\t\tvoid store.dispatch(\"settings/update\", {\n\t\t\tname: \"theme\",\n\t\t\tvalue: data.defaultTheme,\n\t\t\tsync: true,\n\t\t});\n\t} else if (currentTheme.themeColor) {\n\t\t(document.querySelector('meta[name=\"theme-color\"]') as HTMLMetaElement).content =\n\t\t\tcurrentTheme.themeColor;\n\t}\n\n\tif (document.body.classList.contains(\"public\")) {\n\t\twindow.addEventListener(\"beforeunload\", (e) => {\n\t\t\te.preventDefault();\n\t\t\te.returnValue = \"Are you sure you want to navigate away from this page?\";\n\t\t});\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"changelog\", function (data) {\n\tstore.commit(\"versionData\", data);\n\tstore.commit(\"versionDataExpired\", false);\n\n\tlet status;\n\n\tif (data.latest) {\n\t\tstatus = \"new-version\";\n\t} else if (data.packages) {\n\t\tstatus = \"new-packages\";\n\t} else if (data.current.changelog) {\n\t\tstatus = \"up-to-date\";\n\t} else {\n\t\tstatus = \"error\";\n\t}\n\n\tstore.commit(\"versionStatus\", status);\n\n\t// When there is a button to refresh the checker available, display it when\n\t// data is expired. Before that, server would return same information anyway.\n\tif (data.expiresAt) {\n\t\tconst expires = data.expiresAt - Date.now();\n\n\t\tif (expires > 0) {\n\t\t\tsetTimeout(() => store.commit(\"versionDataExpired\", true), expires);\n\t\t} else {\n\t\t\tstore.commit(\"versionDataExpired\", true);\n\t\t}\n\t}\n});\n\nsocket.on(\"changelog:newversion\", () => {\n\tif (!store.state.serverConfiguration) {\n\t\treturn;\n\t}\n\n\tstore.state.serverConfiguration.isUpdateAvailable = true;\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"setting:new\", async function (data) {\n\tconst name = data.name;\n\tconst value = data.value;\n\tawait store.dispatch(\"settings/update\", {name, value, sync: false});\n});\n\nsocket.on(\"setting:all\", async function (settings) {\n\tconst serverHasSettings = Object.keys(settings).length > 0;\n\n\tstore.commit(\"serverHasSettings\", serverHasSettings);\n\n\tif (serverHasSettings) {\n\t\tfor (const name in settings) {\n\t\t\tawait store.dispatch(\"settings/update\", {name, value: settings[name], sync: false});\n\t\t}\n\t} else {\n\t\tawait store.dispatch(\"settings/syncAll\");\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"history:clear\", function (data) {\n\tconst netChan = store.getters.findChannel(data.target);\n\n\tif (netChan?.channel) {\n\t\tnetChan.channel.messages = [];\n\t\tnetChan.channel.unread = 0;\n\t\tnetChan.channel.highlight = 0;\n\t\tnetChan.channel.firstUnread = 0;\n\t\tnetChan.channel.moreHistoryAvailable = false;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {ClientMention} from \"../types\";\n\nsocket.on(\"mentions:list\", function (data) {\n\tstore.commit(\"mentions\", data as ClientMention[]);\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"search:results\", (response) => {\n\tconst pendingQuery = store.state.messageSearchPendingQuery;\n\n\tif (\n\t\t!pendingQuery ||\n\t\tpendingQuery.channelName !== response.channelName ||\n\t\tpendingQuery.networkUuid !== response.networkUuid ||\n\t\tpendingQuery.offset !== response.offset ||\n\t\tpendingQuery.searchTerm !== response.searchTerm\n\t) {\n\t\t// This is a response from a search that we are not interested in.\n\t\t// The user may have entered a different search while one was still in flight.\n\t\t// We can simply drop it on the floor.\n\t\treturn;\n\t}\n\n\tstore.commit(\"messageSearchPendingQuery\", null);\n\n\tif (store.state.messageSearchResults) {\n\t\tstore.commit(\"addMessageSearchResults\", response);\n\t\treturn;\n\t}\n\n\tstore.commit(\"messageSearchResults\", {results: response.results});\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"mute:changed\", (response) => {\n\tconst {target, status} = response;\n\n\tconst netChan = store.getters.findChannel(target);\n\n\tif (netChan?.channel.type === \"lobby\") {\n\t\tfor (const chan of netChan.network.channels) {\n\t\t\tif (chan.type !== \"special\") {\n\t\t\t\tchan.muted = status;\n\t\t\t}\n\t\t}\n\t} else if (netChan) {\n\t\tnetChan.channel.muted = status;\n\t}\n});\n","import Mousetrap from \"mousetrap\";\n\nimport {store} from \"./store\";\nimport {switchToChannel, router, navigate} from \"./router\";\nimport isChannelCollapsed from \"./helpers/isChannelCollapsed\";\nimport isIgnoredKeybind from \"./helpers/isIgnoredKeybind\";\nimport listenForTwoFingerSwipes from \"./helpers/listenForTwoFingerSwipes\";\nimport {ClientChan} from \"./types\";\n\n// Switch to the next/previous window in the channel list.\nMousetrap.bind([\"alt+up\", \"alt+down\"], function (e, keys) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tnavigateWindow(keys.split(\"+\").pop() === \"up\" ? -1 : 1);\n\n\treturn false;\n});\n\nlistenForTwoFingerSwipes(function (cardinalDirection: string) {\n\tif (cardinalDirection === \"e\" || cardinalDirection === \"w\") {\n\t\tnavigateWindow(cardinalDirection === \"e\" ? -1 : 1);\n\t}\n});\n\nfunction navigateWindow(direction: number) {\n\tif (store.state.networks.length === 0) {\n\t\treturn;\n\t}\n\n\tconst flatChannels: ClientChan[] = [];\n\tlet index = -1;\n\n\tfor (const network of store.state.networks) {\n\t\tfor (const channel of network.channels) {\n\t\t\tif (isChannelCollapsed(network, channel)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (index === -1 && store.state.activeChannel?.channel === channel) {\n\t\t\t\tindex = flatChannels.length;\n\t\t\t}\n\n\t\t\tflatChannels.push(channel);\n\t\t}\n\t}\n\n\t// Circular array, and a modulo bug workaround because in JS it stays negative\n\tconst length = flatChannels.length;\n\tindex = (((index + direction) % length) + length) % length;\n\n\tjumpToChannel(flatChannels[index]);\n}\n\n// Switch to the next/previous lobby in the channel list\nMousetrap.bind([\"alt+shift+up\", \"alt+shift+down\"], function (e, keys) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tconst length = store.state.networks.length;\n\n\tif (length === 0) {\n\t\treturn false;\n\t}\n\n\tconst direction = keys.split(\"+\").pop() === \"up\" ? -1 : 1;\n\tlet index = 0;\n\n\t// If we're in another window, jump to first lobby\n\tif (store.state.activeChannel) {\n\t\tindex = store.state.networks.findIndex((n) => n === store.state.activeChannel?.network);\n\n\t\t// If we're in a channel, and it's not the lobby, jump to lobby of this network when going up\n\t\tif (direction !== -1 || store.state.activeChannel?.channel.type === \"lobby\") {\n\t\t\tindex = (((index + direction) % length) + length) % length;\n\t\t}\n\t}\n\n\tjumpToChannel(store.state.networks[index].channels[0]);\n\n\treturn false;\n});\n\n// Switch to the next/previous unread chat\nMousetrap.bind([\"alt+mod+up\", \"alt+mod+down\"], function (e, keys) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tconst channels = store.state.networks\n\t\t.map((net) =>\n\t\t\tnet.channels.filter(\n\t\t\t\t(chan) => chan.unread || chan === store.state.activeChannel?.channel\n\t\t\t)\n\t\t)\n\t\t.flat();\n\n\tif (channels.length === 0) {\n\t\treturn;\n\t}\n\n\tlet index = channels.findIndex((chan) => chan === store.state.activeChannel?.channel);\n\n\tconst length = channels.length;\n\tconst direction = keys.split(\"+\").pop() === \"up\" ? -1 : 1;\n\tindex = (((index + direction) % length) + length) % length;\n\n\tjumpToChannel(channels[index]);\n\n\treturn false;\n});\n\n// Jump to the first window with a highlight in it, or the first with unread\n// activity if there are none with highlights.\nMousetrap.bind([\"alt+a\"], function (e) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tlet targetChannel;\n\n\touter_loop: for (const network of store.state.networks) {\n\t\tfor (const chan of network.channels) {\n\t\t\tif (chan.highlight) {\n\t\t\t\ttargetChannel = chan;\n\t\t\t\tbreak outer_loop;\n\t\t\t}\n\n\t\t\tif (chan.unread && !targetChannel) {\n\t\t\t\ttargetChannel = chan;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (targetChannel) {\n\t\tjumpToChannel(targetChannel);\n\t}\n\n\treturn false;\n});\n\n// Show the help menu.\nMousetrap.bind([\"alt+/\"], function (e) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\t/* eslint-disable no-console */\n\tnavigate(\"Help\").catch((err) => console.log(err));\n\treturn false;\n});\n\nfunction jumpToChannel(targetChannel: ClientChan) {\n\tswitchToChannel(targetChannel);\n\n\tconst element = document.querySelector(\n\t\t`#sidebar .channel-list-item[aria-controls=\"#chan-${targetChannel.id}\"]`\n\t);\n\n\tif (element) {\n\t\tscrollIntoViewNicely(element);\n\t}\n}\n\n// Ignored keys which should not automatically focus the input bar\nconst ignoredKeys = {\n\t8: true, // Backspace\n\t9: true, // Tab\n\t12: true, // Clear\n\t16: true, // Shift\n\t17: true, // Control\n\t18: true, // Alt\n\t19: true, // Pause\n\t20: true, // CapsLock\n\t27: true, // Escape\n\t35: true, // End\n\t36: true, // Home\n\t37: true, // ArrowLeft\n\t38: true, // ArrowUp\n\t39: true, // ArrowRight\n\t40: true, // ArrowDown\n\t45: true, // Insert\n\t46: true, // Delete\n\t112: true, // F1\n\t113: true, // F2\n\t114: true, // F3\n\t115: true, // F4\n\t116: true, // F5\n\t117: true, // F6\n\t118: true, // F7\n\t119: true, // F8\n\t120: true, // F9\n\t121: true, // F10\n\t122: true, // F11\n\t123: true, // F12\n\t144: true, // NumLock\n\t145: true, // ScrollLock\n\t224: true, // Meta\n};\n\ndocument.addEventListener(\"keydown\", (e) => {\n\t// Allow navigating back to the previous page when on the help screen.\n\tif (e.key === \"Escape\" && router.currentRoute.value.name === \"Help\") {\n\t\trouter.go(-1);\n\t\treturn;\n\t}\n\n\t// Ignore any key that uses alt modifier\n\t// Ignore keys defined above\n\tif (e.altKey || ignoredKeys[e.which]) {\n\t\treturn;\n\t}\n\n\t// Ignore all ctrl keys except for ctrl+v to allow pasting\n\tif ((e.ctrlKey || e.metaKey) && e.which !== 86) {\n\t\treturn;\n\t}\n\n\t// Redirect pagedown/pageup keys to messages container so it scrolls\n\tif (e.which === 33 || e.which === 34) {\n\t\tconst chat = document.querySelector(\".window .chat-content .chat\");\n\n\t\tif (chat) {\n\t\t\t(chat as HTMLDivElement).focus();\n\t\t}\n\n\t\treturn;\n\t}\n\n\tconst tagName = (e.target as HTMLElement).tagName;\n\n\t// Ignore if we're already typing into <input> or <textarea>\n\tif (tagName === \"INPUT\" || tagName === \"TEXTAREA\") {\n\t\treturn;\n\t}\n\n\tconst input = document.getElementById(\"input\");\n\n\tif (!input) {\n\t\treturn;\n\t}\n\n\tinput.focus();\n\n\t// On enter, focus the input but do not propagate the event\n\t// This way, a new line is not inserted\n\tif (e.which === 13) {\n\t\te.preventDefault();\n\t}\n});\n\nfunction scrollIntoViewNicely(el) {\n\t// Ideally this would use behavior: \"smooth\", but that does not consistently work in e.g. Chrome\n\t// https://github.com/iamdustan/smoothscroll/issues/28#issuecomment-364061459\n\tel.scrollIntoView({block: \"center\", inline: \"nearest\"});\n}\n","import distance from \"./distance\";\n\n// onTwoFingerSwipe will be called with a cardinal direction (\"n\", \"e\", \"s\" or\n// \"w\") as its only argument.\nfunction listenForTwoFingerSwipes(onTwoFingerSwipe) {\n\tlet history: {\n\t\tcenter: number[];\n\t\ttimestamp: number;\n\t}[] = [];\n\n\tdocument.body.addEventListener(\n\t\t\"touchmove\",\n\t\tfunction (event) {\n\t\t\tif (event.touches.length !== 2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst a = event.touches.item(0);\n\t\t\tconst b = event.touches.item(1);\n\n\t\t\tif (!a || !b) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timestamp = window.performance.now();\n\t\t\tconst center = [(a.screenX + b.screenX) / 2, (a.screenY + b.screenY) / 2];\n\n\t\t\tif (history.length > 0) {\n\t\t\t\tconst last = history[history.length - 1];\n\t\t\t\tconst centersAreEqual =\n\t\t\t\t\tlast.center[0] === center[0] && last.center[1] === center[1];\n\n\t\t\t\tif (last.timestamp === timestamp || centersAreEqual) {\n\t\t\t\t\t// Touches with the same timestamps or center don't help us\n\t\t\t\t\t// see the speed of movement. Ignore them.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thistory.push({timestamp, center});\n\t\t},\n\t\t{passive: true}\n\t);\n\n\tdocument.body.addEventListener(\n\t\t\"touchend\",\n\t\tfunction (event) {\n\t\t\tif (event.touches.length >= 2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst direction = getSwipe(history);\n\n\t\t\t\tif (direction) {\n\t\t\t\t\tonTwoFingerSwipe(direction);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\thistory = [];\n\t\t\t}\n\t\t},\n\t\t{passive: true}\n\t);\n\n\tdocument.body.addEventListener(\n\t\t\"touchcancel\",\n\t\tfunction () {\n\t\t\thistory = [];\n\t\t},\n\t\t{passive: true}\n\t);\n}\n\n// Returns the cardinal direction of the swipe or null if there is no swipe.\nfunction getSwipe(hist) {\n\t// Speed is in pixels/millisecond. Must be maintained throughout swipe.\n\tconst MIN_SWIPE_SPEED = 0.2;\n\n\tif (hist.length < 2) {\n\t\treturn null;\n\t}\n\n\tfor (let i = 1; i < hist.length; ++i) {\n\t\tconst previous = hist[i - 1];\n\t\tconst current = hist[i];\n\n\t\tconst speed =\n\t\t\tdistance(previous.center, current.center) /\n\t\t\tMath.abs(previous.timestamp - current.timestamp);\n\n\t\tif (speed < MIN_SWIPE_SPEED) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn getCardinalDirection(hist[0].center, hist[hist.length - 1].center);\n}\n\nfunction getCardinalDirection([x1, y1], [x2, y2]) {\n\t// If  is the angle of the vector then this is tan()\n\tconst tangent = (y2 - y1) / (x2 - x1);\n\n\t// All values of |tan(-45 to 45)| are less than 1, same for 145 to 225\n\tif (Math.abs(tangent) < 1) {\n\t\treturn x1 < x2 ? \"e\" : \"w\";\n\t}\n\n\treturn y1 < y2 ? \"s\" : \"n\";\n}\n\nexport default listenForTwoFingerSwipes;\n","import constants from \"./constants\";\n\nimport \"../css/style.css\";\nimport {createApp} from \"vue\";\nimport {store, CallableGetters, key} from \"./store\";\nimport App from \"../components/App.vue\";\nimport storage from \"./localStorage\";\nimport {router} from \"./router\";\nimport socket from \"./socket\";\nimport eventbus from \"./eventbus\";\n\nimport \"./socket-events\";\nimport \"./webpush\";\nimport \"./keybinds\";\nimport {LoungeWindow} from \"./types\";\n\nconst favicon = document.getElementById(\"favicon\");\nconst faviconNormal = favicon?.getAttribute(\"href\") || \"\";\nconst faviconAlerted = favicon?.dataset.other || \"\";\n\nexport const VueApp = createApp(App);\n\nVueApp.use(router);\nVueApp.use(store, key);\n\nVueApp.mount(\"#app\");\nsocket.open();\n\nstore.watch(\n\t(state) => state.sidebarOpen,\n\t(sidebarOpen) => {\n\t\tif (window.innerWidth > constants.mobileViewportPixels) {\n\t\t\tstorage.set(\"thelounge.state.sidebar\", sidebarOpen.toString());\n\t\t\teventbus.emit(\"resize\");\n\t\t}\n\t}\n);\n\nstore.watch(\n\t(state) => state.userlistOpen,\n\t(userlistOpen) => {\n\t\tstorage.set(\"thelounge.state.userlist\", userlistOpen.toString());\n\t\teventbus.emit(\"resize\");\n\t}\n);\n\nstore.watch(\n\t(_, getters: CallableGetters) => getters.title,\n\t(title) => {\n\t\tdocument.title = title;\n\t}\n);\n\n// Toggles the favicon to red when there are unread notifications\nstore.watch(\n\t(_, getters: CallableGetters) => getters.highlightCount,\n\t(highlightCount) => {\n\t\tfavicon?.setAttribute(\"href\", highlightCount > 0 ? faviconAlerted : faviconNormal);\n\n\t\tconst nav: LoungeWindow[\"navigator\"] = window.navigator;\n\n\t\tif (nav.setAppBadge) {\n\t\t\tif (highlightCount > 0) {\n\t\t\t\tnav.setAppBadge(highlightCount);\n\t\t\t} else {\n\t\t\t\tif (nav.clearAppBadge) {\n\t\t\t\t\tnav.clearAppBadge();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n);\n\nVueApp.config.errorHandler = function (e) {\n\tif (e instanceof Error) {\n\t\tstore.commit(\"currentUserVisibleError\", `Vue error: ${e.message}`);\n\t} else {\n\t\tstore.commit(\"currentUserVisibleError\", `Vue error: ${String(e)}`);\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.error(e);\n};\n","import socket from \"./socket\";\nimport {store} from \"./store\";\n\nexport default {togglePushSubscription};\n\nsocket.once(\"push:issubscribed\", function (hasSubscriptionOnServer) {\n\tif (!isAllowedServiceWorkersHost()) {\n\t\tstore.commit(\"pushNotificationState\", \"nohttps\");\n\t\treturn;\n\t}\n\n\tif (!(\"serviceWorker\" in navigator)) {\n\t\treturn;\n\t}\n\n\tnavigator.serviceWorker\n\t\t.register(\"service-worker.js\")\n\t\t.then((registration) => {\n\t\t\tstore.commit(\"hasServiceWorker\");\n\n\t\t\tif (!registration.pushManager) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn registration.pushManager.getSubscription().then((subscription) => {\n\t\t\t\t// If client has push registration but the server knows nothing about it,\n\t\t\t\t// this subscription is broken and client has to register again\n\t\t\t\tif (subscription && hasSubscriptionOnServer === false) {\n\t\t\t\t\tvoid subscription.unsubscribe().then((successful) => {\n\t\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\t\tsuccessful ? \"supported\" : \"unsupported\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\tsubscription ? \"subscribed\" : \"supported\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\t.catch((err) => {\n\t\t\tstore.commit(\"pushNotificationState\", \"unsupported\");\n\t\t\tconsole.error(err); // eslint-disable-line no-console\n\t\t});\n});\n\nfunction togglePushSubscription() {\n\tstore.commit(\"pushNotificationState\", \"loading\");\n\n\tnavigator.serviceWorker.ready\n\t\t.then((registration) =>\n\t\t\tregistration.pushManager.getSubscription().then((existingSubscription) => {\n\t\t\t\tif (existingSubscription) {\n\t\t\t\t\tsocket.emit(\"push:unregister\");\n\n\t\t\t\t\treturn existingSubscription.unsubscribe().then((successful) => {\n\t\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\t\tsuccessful ? \"supported\" : \"unsupported\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn registration.pushManager\n\t\t\t\t\t.subscribe({\n\t\t\t\t\t\tapplicationServerKey: store.state.serverConfiguration?.applicationServerKey,\n\t\t\t\t\t\tuserVisibleOnly: true,\n\t\t\t\t\t})\n\t\t\t\t\t.then((subscription) => {\n\t\t\t\t\t\tsocket.emit(\"push:register\", subscription.toJSON());\n\t\t\t\t\t\tstore.commit(\"pushNotificationState\", \"subscribed\");\n\t\t\t\t\t\tstore.commit(\"refreshDesktopNotificationState\");\n\t\t\t\t\t});\n\t\t\t})\n\t\t)\n\t\t.catch((err) => {\n\t\t\tstore.commit(\"pushNotificationState\", \"unsupported\");\n\t\t\tstore.commit(\"refreshDesktopNotificationState\");\n\t\t\tconsole.error(err); // eslint-disable-line no-console\n\t\t});\n}\n\nfunction isAllowedServiceWorkersHost() {\n\treturn (\n\t\tlocation.protocol === \"https:\" ||\n\t\tlocation.hostname === \"localhost\" ||\n\t\tlocation.hostname === \"127.0.0.1\"\n\t);\n}\n","const matchFormatting =\n\t/\\x02|\\x1D|\\x1F|\\x16|\\x0F|\\x11|\\x1E|\\x03(?:[0-9]{1,2}(?:,[0-9]{1,2})?)?|\\x04(?:[0-9a-f]{6}(?:,[0-9a-f]{6})?)?/gi;\n\nexport function cleanIrcMessage(message: string) {\n\treturn message.replace(matchFormatting, \"\").trim();\n}\n\nexport const condensedTypes = new Set([\n\t\"away\",\n\t\"back\",\n\t\"chghost\",\n\t\"join\",\n\t\"kick\",\n\t\"mode\",\n\t\"nick\",\n\t\"part\",\n\t\"quit\",\n]);\n","<template>\n\t<div id=\"viewport\" :class=\"viewportClasses\" role=\"tablist\">\n\t\t<Sidebar v-if=\"store.state.appLoaded\" :overlay=\"overlay\" />\n\t\t<div\n\t\t\tid=\"sidebar-overlay\"\n\t\t\tref=\"overlay\"\n\t\t\taria-hidden=\"true\"\n\t\t\t@click=\"store.commit('sidebarOpen', false)\"\n\t\t/>\n\t\t<router-view ref=\"loungeWindow\"></router-view>\n\t\t<Mentions />\n\t\t<ImageViewer ref=\"imageViewer\" />\n\t\t<ContextMenu ref=\"contextMenu\" />\n\t\t<ConfirmDialog ref=\"confirmDialog\" />\n\t\t<div id=\"upload-overlay\"></div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport constants from \"../js/constants\";\nimport eventbus from \"../js/eventbus\";\nimport Mousetrap, {ExtendedKeyboardEvent} from \"mousetrap\";\nimport throttle from \"lodash/throttle\";\nimport storage from \"../js/localStorage\";\nimport isIgnoredKeybind from \"../js/helpers/isIgnoredKeybind\";\n\nimport Sidebar from \"./Sidebar.vue\";\nimport ImageViewer from \"./ImageViewer.vue\";\nimport ContextMenu from \"./ContextMenu.vue\";\nimport ConfirmDialog from \"./ConfirmDialog.vue\";\nimport Mentions from \"./Mentions.vue\";\nimport {\n\tcomputed,\n\tprovide,\n\tdefineComponent,\n\tonBeforeUnmount,\n\tonMounted,\n\tref,\n\tRef,\n\tInjectionKey,\n} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport type {DebouncedFunc} from \"lodash\";\n\nexport const imageViewerKey = Symbol() as InjectionKey<Ref<typeof ImageViewer | null>>;\nconst contextMenuKey = Symbol() as InjectionKey<Ref<typeof ContextMenu | null>>;\nconst confirmDialogKey = Symbol() as InjectionKey<Ref<typeof ConfirmDialog | null>>;\n\nexport default defineComponent({\n\tname: \"App\",\n\tcomponents: {\n\t\tSidebar,\n\t\tImageViewer,\n\t\tContextMenu,\n\t\tConfirmDialog,\n\t\tMentions,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst overlay = ref(null);\n\t\tconst loungeWindow = ref(null);\n\t\tconst imageViewer = ref(null);\n\t\tconst contextMenu = ref(null);\n\t\tconst confirmDialog = ref(null);\n\n\t\tprovide(imageViewerKey, imageViewer);\n\t\tprovide(contextMenuKey, contextMenu);\n\t\tprovide(confirmDialogKey, confirmDialog);\n\n\t\tconst viewportClasses = computed(() => {\n\t\t\treturn {\n\t\t\t\tnotified: store.getters.highlightCount > 0,\n\t\t\t\t\"menu-open\": store.state.appLoaded && store.state.sidebarOpen,\n\t\t\t\t\"menu-dragging\": store.state.sidebarDragging,\n\t\t\t\t\"userlist-open\": store.state.userlistOpen,\n\t\t\t};\n\t\t});\n\n\t\tconst debouncedResize = ref<DebouncedFunc<() => void>>();\n\t\tconst dayChangeTimeout = ref<any>();\n\n\t\tconst escapeKey = () => {\n\t\t\teventbus.emit(\"escapekey\");\n\t\t};\n\n\t\tconst toggleSidebar = (e: ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tstore.commit(\"toggleSidebar\");\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst toggleUserList = (e: ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tstore.commit(\"toggleUserlist\");\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst toggleMentions = () => {\n\t\t\tif (store.state.networks.length !== 0) {\n\t\t\t\teventbus.emit(\"mentions:toggle\");\n\t\t\t}\n\t\t};\n\n\t\tconst msUntilNextDay = () => {\n\t\t\t// Compute how many milliseconds are remaining until the next day starts\n\t\t\tconst today = new Date();\n\t\t\tconst tommorow = new Date(\n\t\t\t\ttoday.getFullYear(),\n\t\t\t\ttoday.getMonth(),\n\t\t\t\ttoday.getDate() + 1\n\t\t\t).getTime();\n\n\t\t\treturn tommorow - today.getTime();\n\t\t};\n\n\t\tconst prepareOpenStates = () => {\n\t\t\tconst viewportWidth = window.innerWidth;\n\t\t\tlet isUserlistOpen = storage.get(\"thelounge.state.userlist\");\n\n\t\t\tif (viewportWidth > constants.mobileViewportPixels) {\n\t\t\t\tstore.commit(\"sidebarOpen\", storage.get(\"thelounge.state.sidebar\") !== \"false\");\n\t\t\t}\n\n\t\t\t// If The Lounge is opened on a small screen (less than 1024px), and we don't have stored\n\t\t\t// user list state, close it by default\n\t\t\tif (viewportWidth >= 1024 && isUserlistOpen !== \"true\" && isUserlistOpen !== \"false\") {\n\t\t\t\tisUserlistOpen = \"true\";\n\t\t\t}\n\n\t\t\tstore.commit(\"userlistOpen\", isUserlistOpen === \"true\");\n\t\t};\n\n\t\tprepareOpenStates();\n\n\t\tonMounted(() => {\n\t\t\tMousetrap.bind(\"esc\", escapeKey);\n\t\t\tMousetrap.bind(\"alt+u\", toggleUserList);\n\t\t\tMousetrap.bind(\"alt+s\", toggleSidebar);\n\t\t\tMousetrap.bind(\"alt+m\", toggleMentions);\n\n\t\t\tdebouncedResize.value = throttle(() => {\n\t\t\t\teventbus.emit(\"resize\");\n\t\t\t}, 100);\n\n\t\t\twindow.addEventListener(\"resize\", debouncedResize.value, {passive: true});\n\n\t\t\t// Emit a daychange event every time the day changes so date markers know when to update themselves\n\t\t\tconst emitDayChange = () => {\n\t\t\t\teventbus.emit(\"daychange\");\n\t\t\t\t// This should always be 24h later but re-computing exact value just in case\n\t\t\t\tdayChangeTimeout.value = setTimeout(emitDayChange, msUntilNextDay());\n\t\t\t};\n\n\t\t\tdayChangeTimeout.value = setTimeout(emitDayChange, msUntilNextDay());\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tMousetrap.unbind(\"esc\");\n\t\t\tMousetrap.unbind(\"alt+u\");\n\t\t\tMousetrap.unbind(\"alt+s\");\n\t\t\tMousetrap.unbind(\"alt+m\");\n\n\t\t\tif (debouncedResize.value) {\n\t\t\t\twindow.removeEventListener(\"resize\", debouncedResize.value);\n\t\t\t}\n\n\t\t\tif (dayChangeTimeout.value) {\n\t\t\t\tclearTimeout(dayChangeTimeout.value);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tviewportClasses,\n\t\t\tescapeKey,\n\t\t\ttoggleSidebar,\n\t\t\ttoggleUserList,\n\t\t\ttoggleMentions,\n\t\t\tstore,\n\t\t\toverlay,\n\t\t\tloungeWindow,\n\t\t\timageViewer,\n\t\t\tcontextMenu,\n\t\t\tconfirmDialog,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<aside id=\"sidebar\" ref=\"sidebar\">\n\t\t<div class=\"scrollable-area\">\n\t\t\t<div class=\"logo-container\">\n\t\t\t\t<img\n\t\t\t\t\t:src=\"`img/logo-${isPublic() ? 'horizontal-' : ''}transparent-bg.svg`\"\n\t\t\t\t\tclass=\"logo\"\n\t\t\t\t\talt=\"The Lounge\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t/>\n\t\t\t\t<img\n\t\t\t\t\t:src=\"`img/logo-${isPublic() ? 'horizontal-' : ''}transparent-bg-inverted.svg`\"\n\t\t\t\t\tclass=\"logo-inverted\"\n\t\t\t\t\talt=\"The Lounge\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t/>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"isDevelopment\"\n\t\t\t\t\ttitle=\"The Lounge has been built in development mode\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackgroundColor: '#ff9e18',\n\t\t\t\t\t\tcolor: '#000',\n\t\t\t\t\t\tpadding: '2px',\n\t\t\t\t\t\tborderRadius: '4px',\n\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t}\"\n\t\t\t\t\t>DEVELOPER</span\n\t\t\t\t>\n\t\t\t</div>\n\t\t\t<NetworkList />\n\t\t</div>\n\t\t<footer id=\"footer\">\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-touch\"\n\t\t\t\taria-label=\"Connect to network\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/connect\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"connect\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:class=\"['icon', 'connect', {active: isActive}]\"\n\t\t\t\t\t\t:aria-selected=\"isActive\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t/> </router-link\n\t\t\t></span>\n\t\t\t<span class=\"tooltipped tooltipped-n tooltipped-no-touch\" aria-label=\"Settings\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/settings\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"settings\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:class=\"['icon', 'settings', {active: isActive}]\"\n\t\t\t\t\t\t:aria-selected=\"isActive\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t></button> </router-link\n\t\t\t></span>\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-touch\"\n\t\t\t\t:aria-label=\"\n\t\t\t\t\tstore.state.serverConfiguration?.isUpdateAvailable\n\t\t\t\t\t\t? 'Help\\n(update available)'\n\t\t\t\t\t\t: 'Help'\n\t\t\t\t\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/help\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"help\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:aria-selected=\"route.name === 'Help'\"\n\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t'icon',\n\t\t\t\t\t\t\t'help',\n\t\t\t\t\t\t\t{notified: store.state.serverConfiguration?.isUpdateAvailable},\n\t\t\t\t\t\t\t{active: isActive},\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t></button> </router-link\n\t\t\t></span>\n\t\t</footer>\n\t</aside>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, nextTick, onMounted, onUnmounted, PropType, ref} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"../js/store\";\nimport NetworkList from \"./NetworkList.vue\";\n\nexport default defineComponent({\n\tname: \"Sidebar\",\n\tcomponents: {\n\t\tNetworkList,\n\t},\n\tprops: {\n\t\toverlay: {type: Object as PropType<HTMLElement | null>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst isDevelopment = process.env.NODE_ENV !== \"production\";\n\n\t\tconst store = useStore();\n\t\tconst route = useRoute();\n\n\t\tconst touchStartPos = ref<Touch | null>();\n\t\tconst touchCurPos = ref<Touch | null>();\n\t\tconst touchStartTime = ref<number>(0);\n\t\tconst menuWidth = ref<number>(0);\n\t\tconst menuIsMoving = ref<boolean>(false);\n\t\tconst menuIsAbsolute = ref<boolean>(false);\n\n\t\tconst sidebar = ref<HTMLElement | null>(null);\n\n\t\tconst toggle = (state: boolean) => {\n\t\t\tstore.commit(\"sidebarOpen\", state);\n\t\t};\n\n\t\tconst onTouchMove = (e: TouchEvent) => {\n\t\t\tconst touch = (touchCurPos.value = e.touches.item(0));\n\n\t\t\tif (\n\t\t\t\t!touch ||\n\t\t\t\t!touchStartPos.value ||\n\t\t\t\t!touchStartPos.value.screenX ||\n\t\t\t\t!touchStartPos.value.screenY\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet distX = touch.screenX - touchStartPos.value.screenX;\n\t\t\tconst distY = touch.screenY - touchStartPos.value.screenY;\n\n\t\t\tif (!menuIsMoving.value) {\n\t\t\t\t// tan(45) is 1. Gestures in 0-45 (< 1) are considered horizontal, so\n\t\t\t\t// menu must be open; gestures in 45-90 (>1) are considered vertical, so\n\t\t\t\t// chat windows must be scrolled.\n\t\t\t\tif (Math.abs(distY / distX) >= 1) {\n\t\t\t\t\t// eslint-disable-next-line no-use-before-define\n\t\t\t\t\tonTouchEnd();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst devicePixelRatio = window.devicePixelRatio || 2;\n\n\t\t\t\tif (Math.abs(distX) > devicePixelRatio) {\n\t\t\t\t\tstore.commit(\"sidebarDragging\", true);\n\t\t\t\t\tmenuIsMoving.value = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do not animate the menu on desktop view\n\t\t\tif (!menuIsAbsolute.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (store.state.sidebarOpen) {\n\t\t\t\tdistX += menuWidth.value;\n\t\t\t}\n\n\t\t\tif (distX > menuWidth.value) {\n\t\t\t\tdistX = menuWidth.value;\n\t\t\t} else if (distX < 0) {\n\t\t\t\tdistX = 0;\n\t\t\t}\n\n\t\t\tif (sidebar.value) {\n\t\t\t\tsidebar.value.style.transform = \"translate3d(\" + distX.toString() + \"px, 0, 0)\";\n\t\t\t}\n\n\t\t\tif (props.overlay) {\n\t\t\t\tprops.overlay.style.opacity = `${distX / menuWidth.value}`;\n\t\t\t}\n\t\t};\n\n\t\tconst onTouchEnd = () => {\n\t\t\tif (!touchStartPos.value?.screenX || !touchCurPos.value?.screenX) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst diff = touchCurPos.value.screenX - touchStartPos.value.screenX;\n\t\t\tconst absDiff = Math.abs(diff);\n\n\t\t\tif (\n\t\t\t\tabsDiff > menuWidth.value / 2 ||\n\t\t\t\t(Date.now() - touchStartTime.value < 180 && absDiff > 50)\n\t\t\t) {\n\t\t\t\ttoggle(diff > 0);\n\t\t\t}\n\n\t\t\tdocument.body.removeEventListener(\"touchmove\", onTouchMove);\n\t\t\tdocument.body.removeEventListener(\"touchend\", onTouchEnd);\n\n\t\t\tstore.commit(\"sidebarDragging\", false);\n\n\t\t\ttouchStartPos.value = null;\n\t\t\ttouchCurPos.value = null;\n\t\t\ttouchStartTime.value = 0;\n\t\t\tmenuIsMoving.value = false;\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (sidebar.value) {\n\t\t\t\t\tsidebar.value.style.transform = \"\";\n\t\t\t\t}\n\n\t\t\t\tif (props.overlay) {\n\t\t\t\t\tprops.overlay.style.opacity = \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tconst onTouchStart = (e: TouchEvent) => {\n\t\t\tif (!sidebar.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttouchStartPos.value = touchCurPos.value = e.touches.item(0);\n\n\t\t\tif (e.touches.length !== 1) {\n\t\t\t\tonTouchEnd();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst styles = window.getComputedStyle(sidebar.value);\n\n\t\t\tmenuWidth.value = parseFloat(styles.width);\n\t\t\tmenuIsAbsolute.value = styles.position === \"absolute\";\n\n\t\t\tif (\n\t\t\t\t!store.state.sidebarOpen ||\n\t\t\t\t(touchStartPos.value?.screenX && touchStartPos.value.screenX > menuWidth.value)\n\t\t\t) {\n\t\t\t\ttouchStartTime.value = Date.now();\n\n\t\t\t\tdocument.body.addEventListener(\"touchmove\", onTouchMove, {passive: true});\n\t\t\t\tdocument.body.addEventListener(\"touchend\", onTouchEnd, {passive: true});\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tdocument.body.addEventListener(\"touchstart\", onTouchStart, {passive: true});\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tdocument.body.removeEventListener(\"touchstart\", onTouchStart);\n\t\t});\n\n\t\tconst isPublic = () => document.body.classList.contains(\"public\");\n\n\t\treturn {\n\t\t\tisDevelopment,\n\t\t\tstore,\n\t\t\troute,\n\t\t\tsidebar,\n\t\t\ttoggle,\n\t\t\tonTouchStart,\n\t\t\tonTouchMove,\n\t\t\tonTouchEnd,\n\t\t\tisPublic,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\tv-if=\"store.state.networks.length === 0\"\n\t\tclass=\"empty\"\n\t\trole=\"navigation\"\n\t\taria-label=\"Network and Channel list\"\n\t>\n\t\tYou are not connected to any networks yet.\n\t</div>\n\t<div v-else ref=\"networklist\" role=\"navigation\" aria-label=\"Network and Channel list\">\n\t\t<div class=\"jump-to-input\">\n\t\t\t<input\n\t\t\t\tref=\"searchInput\"\n\t\t\t\t:value=\"searchText\"\n\t\t\t\tplaceholder=\"Jump to...\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tclass=\"search input mousetrap\"\n\t\t\t\taria-label=\"Search among the channel list\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\t@input=\"setSearchText\"\n\t\t\t\t@keydown.up=\"navigateResults($event, -1)\"\n\t\t\t\t@keydown.down=\"navigateResults($event, 1)\"\n\t\t\t\t@keydown.page-up=\"navigateResults($event, -10)\"\n\t\t\t\t@keydown.page-down=\"navigateResults($event, 10)\"\n\t\t\t\t@keydown.enter=\"selectResult\"\n\t\t\t\t@keydown.escape=\"deactivateSearch\"\n\t\t\t\t@focus=\"activateSearch\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-if=\"searchText\" class=\"jump-to-results\">\n\t\t\t<div v-if=\"results.length\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"item in results\"\n\t\t\t\t\t:key=\"item.channel.id\"\n\t\t\t\t\t@mouseenter=\"setActiveSearchItem(item.channel)\"\n\t\t\t\t\t@click.prevent=\"selectResult\"\n\t\t\t\t>\n\t\t\t\t\t<Channel\n\t\t\t\t\t\tv-if=\"item.channel.type !== 'lobby'\"\n\t\t\t\t\t\t:channel=\"item.channel\"\n\t\t\t\t\t\t:network=\"item.network\"\n\t\t\t\t\t\t:active=\"item.channel === activeSearchItem\"\n\t\t\t\t\t\t:is-filtering=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t\t<NetworkLobby\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:channel=\"item.channel\"\n\t\t\t\t\t\t:network=\"item.network\"\n\t\t\t\t\t\t:active=\"item.channel === activeSearchItem\"\n\t\t\t\t\t\t:is-filtering=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else class=\"no-results\">No results found.</div>\n\t\t</div>\n\t\t<Draggable\n\t\t\tv-else\n\t\t\t:list=\"store.state.networks\"\n\t\t\t:delay=\"LONG_TOUCH_DURATION\"\n\t\t\t:delay-on-touch-only=\"true\"\n\t\t\t:touch-start-threshold=\"10\"\n\t\t\thandle=\".channel-list-item[data-type='lobby']\"\n\t\t\tdraggable=\".network\"\n\t\t\tghost-class=\"ui-sortable-ghost\"\n\t\t\tdrag-class=\"ui-sortable-dragging\"\n\t\t\tgroup=\"networks\"\n\t\t\tclass=\"networks\"\n\t\t\titem-key=\"uuid\"\n\t\t\t@change=\"onNetworkSort\"\n\t\t\t@choose=\"onDraggableChoose\"\n\t\t\t@unchoose=\"onDraggableUnchoose\"\n\t\t>\n\t\t\t<template v-slot:item=\"{element: network}\">\n\t\t\t\t<div\n\t\t\t\t\t:id=\"'network-' + network.uuid\"\n\t\t\t\t\t:key=\"network.uuid\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\tcollapsed: network.isCollapsed,\n\t\t\t\t\t\t'not-connected': !network.status.connected,\n\t\t\t\t\t\t'not-secure': !network.status.secure,\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"network\"\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t@touchstart=\"onDraggableTouchStart\"\n\t\t\t\t\t@touchmove=\"onDraggableTouchMove\"\n\t\t\t\t\t@touchend=\"onDraggableTouchEnd\"\n\t\t\t\t\t@touchcancel=\"onDraggableTouchEnd\"\n\t\t\t\t>\n\t\t\t\t\t<NetworkLobby\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:is-join-channel-shown=\"network.isJoinChannelShown\"\n\t\t\t\t\t\t:active=\"\n\t\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\t\tnetwork.channels[0] === store.state.activeChannel.channel\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@toggle-join-channel=\"\n\t\t\t\t\t\t\tnetwork.isJoinChannelShown = !network.isJoinChannelShown\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t<JoinChannel\n\t\t\t\t\t\tv-if=\"network.isJoinChannelShown\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"network.channels[0]\"\n\t\t\t\t\t\t@toggle-join-channel=\"\n\t\t\t\t\t\t\tnetwork.isJoinChannelShown = !network.isJoinChannelShown\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Draggable\n\t\t\t\t\t\tdraggable=\".channel-list-item\"\n\t\t\t\t\t\tghost-class=\"ui-sortable-ghost\"\n\t\t\t\t\t\tdrag-class=\"ui-sortable-dragging\"\n\t\t\t\t\t\t:group=\"network.uuid\"\n\t\t\t\t\t\t:list=\"network.channels\"\n\t\t\t\t\t\t:delay=\"LONG_TOUCH_DURATION\"\n\t\t\t\t\t\t:delay-on-touch-only=\"true\"\n\t\t\t\t\t\t:touch-start-threshold=\"10\"\n\t\t\t\t\t\tclass=\"channels\"\n\t\t\t\t\t\titem-key=\"name\"\n\t\t\t\t\t\t@change=\"onChannelSort\"\n\t\t\t\t\t\t@choose=\"onDraggableChoose\"\n\t\t\t\t\t\t@unchoose=\"onDraggableUnchoose\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot:item=\"{element: channel, index}\">\n\t\t\t\t\t\t\t<Channel\n\t\t\t\t\t\t\t\tv-if=\"index > 0\"\n\t\t\t\t\t\t\t\t:key=\"channel.id\"\n\t\t\t\t\t\t\t\t:data-item=\"channel.id\"\n\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t:active=\"\n\t\t\t\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\t\t\t\tchannel === store.state.activeChannel.channel\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Draggable>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Draggable>\n\t</div>\n</template>\n\n<style>\n.jump-to-input {\n\tmargin: 8px;\n\tposition: relative;\n}\n\n.jump-to-input .input {\n\tmargin: 0;\n\twidth: 100%;\n\tborder: 0;\n\tcolor: #fff;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tpadding-right: 35px;\n\tappearance: none;\n}\n\n.jump-to-input .input::placeholder {\n\tcolor: rgba(255, 255, 255, 0.35);\n}\n\n.jump-to-input::before {\n\tcontent: \"\\f002\"; /* http://fontawesome.io/icon/search/ */\n\tcolor: rgba(255, 255, 255, 0.35);\n\tposition: absolute;\n\tright: 8px;\n\ttop: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\tline-height: 35px !important;\n}\n\n.jump-to-results {\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n\toverflow: auto;\n}\n\n.jump-to-results .no-results {\n\tmargin: 14px 8px;\n\ttext-align: center;\n}\n\n.jump-to-results .channel-list-item.active {\n\tcursor: pointer;\n}\n\n.jump-to-results .channel-list-item .add-channel,\n.jump-to-results .channel-list-item .close-tooltip {\n\tdisplay: none;\n}\n\n.jump-to-results .channel-list-item[data-type=\"lobby\"] {\n\tpadding: 8px 14px;\n}\n\n.jump-to-results .channel-list-item[data-type=\"lobby\"]::before {\n\tcontent: \"\\f233\";\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, watch, defineComponent, nextTick, onBeforeUnmount, onMounted, ref} from \"vue\";\n\nimport Mousetrap from \"mousetrap\";\nimport Draggable from \"./Draggable.vue\";\nimport {filter as fuzzyFilter} from \"fuzzy\";\nimport NetworkLobby from \"./NetworkLobby.vue\";\nimport Channel from \"./Channel.vue\";\nimport JoinChannel from \"./JoinChannel.vue\";\n\nimport socket from \"../js/socket\";\nimport collapseNetworkHelper from \"../js/helpers/collapseNetwork\";\nimport isIgnoredKeybind from \"../js/helpers/isIgnoredKeybind\";\nimport distance from \"../js/helpers/distance\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientChan, NetChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\nimport {switchToChannel} from \"../js/router\";\nimport Sortable from \"sortablejs\";\n\nexport default defineComponent({\n\tname: \"NetworkList\",\n\tcomponents: {\n\t\tJoinChannel,\n\t\tNetworkLobby,\n\t\tChannel,\n\t\tDraggable,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst searchText = ref(\"\");\n\t\tconst activeSearchItem = ref<ClientChan | null>();\n\t\t// Number of milliseconds a touch has to last to be considered long\n\t\tconst LONG_TOUCH_DURATION = 500;\n\n\t\tconst startDrag = ref<[number, number] | null>();\n\t\tconst searchInput = ref<HTMLInputElement | null>(null);\n\t\tconst networklist = ref<HTMLDivElement | null>(null);\n\n\t\tconst sidebarWasClosed = ref(false);\n\n\t\tconst moveItemInArray = <T>(array: T[], from: number, to: number) => {\n\t\t\tconst item = array.splice(from, 1)[0];\n\t\t\tarray.splice(to, 0, item);\n\t\t};\n\n\t\tconst items = computed(() => {\n\t\t\tconst newItems: NetChan[] = [];\n\n\t\t\tfor (const network of store.state.networks) {\n\t\t\t\tfor (const channel of network.channels) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\tchannel === store.state.activeChannel.channel\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewItems.push({network, channel});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newItems;\n\t\t});\n\n\t\tconst results = computed(() => {\n\t\t\tconst newResults = fuzzyFilter(searchText.value, items.value, {\n\t\t\t\textract: (item) => item.channel.name,\n\t\t\t}).map((item) => item.original);\n\n\t\t\treturn newResults;\n\t\t});\n\n\t\tconst collapseNetwork = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (store.state.activeChannel) {\n\t\t\t\tcollapseNetworkHelper(store.state.activeChannel.network, true);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst expandNetwork = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (store.state.activeChannel) {\n\t\t\t\tcollapseNetworkHelper(store.state.activeChannel.network, false);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst onNetworkSort = (e: Sortable.SortableEvent) => {\n\t\t\tconst {oldIndex, newIndex} = e;\n\n\t\t\tif (oldIndex === undefined || newIndex === undefined || oldIndex === newIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveItemInArray(store.state.networks, oldIndex, newIndex);\n\n\t\t\tsocket.emit(\"sort\", {\n\t\t\t\ttype: \"networks\",\n\t\t\t\torder: store.state.networks.map((n) => n.uuid),\n\t\t\t});\n\t\t};\n\n\t\tconst onChannelSort = (e: Sortable.SortableEvent) => {\n\t\t\tlet {oldIndex, newIndex} = e;\n\n\t\t\tif (oldIndex === undefined || newIndex === undefined || oldIndex === newIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Indexes are offset by one due to the lobby\n\t\t\toldIndex += 1;\n\t\t\tnewIndex += 1;\n\n\t\t\tconst unparsedId = e.item.getAttribute(\"data-item\");\n\n\t\t\tif (!unparsedId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst id = parseInt(unparsedId);\n\t\t\tconst netChan = store.getters.findChannel(id);\n\n\t\t\tif (!netChan) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveItemInArray(netChan.network.channels, oldIndex, newIndex);\n\n\t\t\tsocket.emit(\"sort\", {\n\t\t\t\ttype: \"channels\",\n\t\t\t\ttarget: netChan.network.uuid,\n\t\t\t\torder: netChan.network.channels.map((c) => c.id),\n\t\t\t});\n\t\t};\n\n\t\tconst isTouchEvent = (event: any): boolean => {\n\t\t\t// This is the same way Sortable.js detects a touch event. See\n\t\t\t// SortableJS/Sortable@daaefeda:/src/Sortable.js#L465\n\n\t\t\treturn !!(\n\t\t\t\t(event.touches && event.touches[0]) ||\n\t\t\t\t(event.pointerType && event.pointerType === \"touch\")\n\t\t\t);\n\t\t};\n\n\t\tconst onDraggableChoose = (event: any) => {\n\t\t\tconst original = event.originalEvent;\n\n\t\t\tif (isTouchEvent(original)) {\n\t\t\t\t// onDrag is only triggered when the user actually moves the\n\t\t\t\t// dragged object but onChoose is triggered as soon as the\n\t\t\t\t// item is eligible for dragging. This gives us an opportunity\n\t\t\t\t// to tell the user they've held the touch long enough.\n\t\t\t\tevent.item.classList.add(\"ui-sortable-dragging-touch-cue\");\n\n\t\t\t\tif (original instanceof TouchEvent && original.touches.length > 0) {\n\t\t\t\t\tstartDrag.value = [original.touches[0].clientX, original.touches[0].clientY];\n\t\t\t\t} else if (original instanceof PointerEvent) {\n\t\t\t\t\tstartDrag.value = [original.clientX, original.clientY];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableUnchoose = (event: any) => {\n\t\t\tevent.item.classList.remove(\"ui-sortable-dragging-touch-cue\");\n\t\t\tstartDrag.value = null;\n\t\t};\n\n\t\tconst onDraggableTouchStart = (event: TouchEvent) => {\n\t\t\tif (event.touches.length === 1) {\n\t\t\t\t// This prevents an iOS long touch default behavior: selecting\n\t\t\t\t// the nearest selectable text.\n\t\t\t\tdocument.body.classList.add(\"force-no-select\");\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableTouchMove = (event: TouchEvent) => {\n\t\t\tif (startDrag.value && event.touches.length > 0) {\n\t\t\t\tconst touch = event.touches[0];\n\t\t\t\tconst currentPosition = [touch.clientX, touch.clientY];\n\n\t\t\t\tif (distance(startDrag.value, currentPosition as [number, number]) > 10) {\n\t\t\t\t\t// Context menu is shown on Android after long touch.\n\t\t\t\t\t// Dismiss it now that we're sure the user is dragging.\n\t\t\t\t\teventbus.emit(\"contextmenu:cancel\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableTouchEnd = (event: TouchEvent) => {\n\t\t\tif (event.touches.length === 0) {\n\t\t\t\tdocument.body.classList.remove(\"force-no-select\");\n\t\t\t}\n\t\t};\n\n\t\tconst activateSearch = () => {\n\t\t\tif (searchInput.value === document.activeElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsidebarWasClosed.value = store.state.sidebarOpen ? false : true;\n\t\t\tstore.commit(\"sidebarOpen\", true);\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tsearchInput.value?.focus();\n\t\t\t});\n\t\t};\n\n\t\tconst deactivateSearch = () => {\n\t\t\tactiveSearchItem.value = null;\n\t\t\tsearchText.value = \"\";\n\t\t\tsearchInput.value?.blur();\n\n\t\t\tif (sidebarWasClosed.value) {\n\t\t\t\tstore.commit(\"sidebarOpen\", false);\n\t\t\t}\n\t\t};\n\n\t\tconst toggleSearch = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (searchInput.value === document.activeElement) {\n\t\t\t\tdeactivateSearch();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tactivateSearch();\n\t\t\treturn false;\n\t\t};\n\n\t\tconst setSearchText = (e: Event) => {\n\t\t\tsearchText.value = (e.target as HTMLInputElement).value;\n\t\t};\n\n\t\tconst setActiveSearchItem = (channel?: ClientChan) => {\n\t\t\tif (!results.value.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!channel) {\n\t\t\t\tchannel = results.value[0].channel;\n\t\t\t}\n\n\t\t\tactiveSearchItem.value = channel;\n\t\t};\n\n\t\tconst scrollToActive = () => {\n\t\t\t// Scroll the list if needed after the active class is applied\n\t\t\tvoid nextTick(() => {\n\t\t\t\tconst el = networklist.value?.querySelector(\".channel-list-item.active\");\n\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({block: \"nearest\", inline: \"nearest\"});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tconst selectResult = () => {\n\t\t\tif (!searchText.value || !results.value.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (activeSearchItem.value) {\n\t\t\t\tswitchToChannel(activeSearchItem.value);\n\t\t\t\tdeactivateSearch();\n\t\t\t\tscrollToActive();\n\t\t\t}\n\t\t};\n\n\t\tconst navigateResults = (event: Event, direction: number) => {\n\t\t\t// Prevent propagation to stop global keybind handler from capturing pagedown/pageup\n\t\t\t// and redirecting it to the message list container for scrolling\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!searchText.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst channels = results.value.map((r) => r.channel);\n\n\t\t\t// Bail out if there's no channels to select\n\t\t\tif (!channels.length) {\n\t\t\t\tactiveSearchItem.value = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet currentIndex = activeSearchItem.value\n\t\t\t\t? channels.indexOf(activeSearchItem.value)\n\t\t\t\t: -1;\n\n\t\t\t// If there's no active channel select the first or last one depending on direction\n\t\t\tif (!activeSearchItem.value || currentIndex === -1) {\n\t\t\t\tactiveSearchItem.value = direction ? channels[0] : channels[channels.length - 1];\n\t\t\t\tscrollToActive();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\t// Wrap around the list if necessary. Normaly each loop iterates once at most,\n\t\t\t// but might iterate more often if pgup or pgdown are used in a very short list\n\t\t\twhile (currentIndex < 0) {\n\t\t\t\tcurrentIndex += channels.length;\n\t\t\t}\n\n\t\t\twhile (currentIndex > channels.length - 1) {\n\t\t\t\tcurrentIndex -= channels.length;\n\t\t\t}\n\n\t\t\tactiveSearchItem.value = channels[currentIndex];\n\t\t\tscrollToActive();\n\t\t};\n\n\t\twatch(searchText, () => {\n\t\t\tsetActiveSearchItem();\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tMousetrap.bind(\"alt+shift+right\", expandNetwork);\n\t\t\tMousetrap.bind(\"alt+shift+left\", collapseNetwork);\n\t\t\tMousetrap.bind(\"alt+j\", toggleSearch);\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tMousetrap.unbind(\"alt+shift+right\");\n\t\t\tMousetrap.unbind(\"alt+shift+left\");\n\t\t\tMousetrap.unbind(\"alt+j\");\n\t\t});\n\n\t\tconst networkContainerRef = ref<HTMLDivElement>();\n\t\tconst channelRefs = ref<{[key: string]: HTMLDivElement}>({});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tnetworklist,\n\t\t\tsearchInput,\n\t\t\tsearchText,\n\t\t\tresults,\n\t\t\tactiveSearchItem,\n\t\t\tLONG_TOUCH_DURATION,\n\n\t\t\tactivateSearch,\n\t\t\tdeactivateSearch,\n\t\t\ttoggleSearch,\n\t\t\tsetSearchText,\n\t\t\tsetActiveSearchItem,\n\t\t\tscrollToActive,\n\t\t\tselectResult,\n\t\t\tnavigateResults,\n\t\t\tonChannelSort,\n\t\t\tonNetworkSort,\n\t\t\tonDraggableTouchStart,\n\t\t\tonDraggableTouchMove,\n\t\t\tonDraggableTouchEnd,\n\t\t\tonDraggableChoose,\n\t\t\tonDraggableUnchoose,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div ref=\"containerRef\" :class=\"$props.class\">\n\t\t<slot\n\t\t\tv-for=\"(item, index) of list\"\n\t\t\t:key=\"item[itemKey]\"\n\t\t\t:element=\"item\"\n\t\t\t:index=\"index\"\n\t\t\tname=\"item\"\n\t\t></slot>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref, PropType, watch, onUnmounted, onBeforeUnmount} from \"vue\";\nimport Sortable from \"sortablejs\";\n\nconst Props = {\n\tdelay: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t\trequired: false,\n\t},\n\tdelayOnTouchOnly: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t\trequired: false,\n\t},\n\ttouchStartThreshold: {\n\t\ttype: Number,\n\t\tdefault: 10,\n\t\trequired: false,\n\t},\n\thandle: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tdraggable: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tghostClass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tdragClass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tgroup: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tclass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\titemKey: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: true,\n\t},\n\tlist: {\n\t\ttype: Array as PropType<any[]>,\n\t\tdefault: [],\n\t\trequired: true,\n\t},\n\tfilter: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n};\n\nexport default defineComponent({\n\tname: \"Draggable\",\n\tprops: Props,\n\temits: [\"change\", \"choose\", \"unchoose\"],\n\tsetup(props, {emit}) {\n\t\tconst containerRef = ref<HTMLElement | null>(null);\n\t\tconst sortable = ref<Sortable | null>(null);\n\n\t\twatch(containerRef, (newDraggable) => {\n\t\t\tif (newDraggable) {\n\t\t\t\tsortable.value = new Sortable(newDraggable, {\n\t\t\t\t\t...props,\n\n\t\t\t\t\tonChoose(event) {\n\t\t\t\t\t\temit(\"choose\", event);\n\t\t\t\t\t},\n\n\t\t\t\t\tonUnchoose(event) {\n\t\t\t\t\t\temit(\"unchoose\", event);\n\t\t\t\t\t},\n\n\t\t\t\t\tonEnd(event) {\n\t\t\t\t\t\temit(\"change\", event);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tif (sortable.value) {\n\t\t\t\tsortable.value.destroy();\n\t\t\t\tcontainerRef.value = null;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tcontainerRef,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Draggable.vue?vue&type=template&id=09d4f527&ts=true\"\nimport script from \"./Draggable.vue?vue&type=script&lang=ts\"\nexport * from \"./Draggable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<ChannelWrapper v-bind=\"$props\" :channel=\"channel\">\n\t\t<button\n\t\t\tv-if=\"network.channels.length > 1\"\n\t\t\t:aria-controls=\"'network-' + network.uuid\"\n\t\t\t:aria-label=\"getExpandLabel(network)\"\n\t\t\t:aria-expanded=\"!network.isCollapsed\"\n\t\t\tclass=\"collapse-network\"\n\t\t\t@click.stop=\"onCollapseClick\"\n\t\t>\n\t\t\t<span class=\"collapse-network-icon\" />\n\t\t</button>\n\t\t<span v-else class=\"collapse-network\" />\n\t\t<div class=\"lobby-wrap\">\n\t\t\t<span :title=\"channel.name\" class=\"name\">{{ channel.name }}</span>\n\t\t\t<span\n\t\t\t\tv-if=\"network.status.connected && !network.status.secure\"\n\t\t\t\tclass=\"not-secure-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Insecure connection\"\n\t\t\t>\n\t\t\t\t<span class=\"not-secure-icon\" />\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if=\"!network.status.connected\"\n\t\t\t\tclass=\"not-connected-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Disconnected\"\n\t\t\t>\n\t\t\t\t<span class=\"not-connected-icon\" />\n\t\t\t</span>\n\t\t\t<span v-if=\"channel.unread\" :class=\"{highlight: channel.highlight}\" class=\"badge\">{{\n\t\t\t\tunreadCount\n\t\t\t}}</span>\n\t\t</div>\n\t\t<span\n\t\t\t:aria-label=\"joinChannelLabel\"\n\t\t\tclass=\"add-channel-tooltip tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t>\n\t\t\t<button\n\t\t\t\t:class=\"['add-channel', {opened: isJoinChannelShown}]\"\n\t\t\t\t:aria-controls=\"'join-channel-' + channel.id\"\n\t\t\t\t:aria-label=\"joinChannelLabel\"\n\t\t\t\t@click.stop=\"$emit('toggle-join-channel')\"\n\t\t\t/>\n\t\t</span>\n\t</ChannelWrapper>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport collapseNetwork from \"../js/helpers/collapseNetwork\";\nimport roundBadgeNumber from \"../js/helpers/roundBadgeNumber\";\nimport ChannelWrapper from \"./ChannelWrapper.vue\";\n\nimport type {ClientChan, ClientNetwork} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"Channel\",\n\tcomponents: {\n\t\tChannelWrapper,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tisJoinChannelShown: Boolean,\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\temits: [\"toggle-join-channel\"],\n\tsetup(props) {\n\t\tconst channel = computed(() => {\n\t\t\treturn props.network.channels[0];\n\t\t});\n\n\t\tconst joinChannelLabel = computed(() => {\n\t\t\treturn props.isJoinChannelShown ? \"Cancel\" : \"Join a channel\";\n\t\t});\n\n\t\tconst unreadCount = computed(() => {\n\t\t\treturn roundBadgeNumber(channel.value.unread);\n\t\t});\n\n\t\tconst onCollapseClick = () => {\n\t\t\tcollapseNetwork(props.network, !props.network.isCollapsed);\n\t\t};\n\n\t\tconst getExpandLabel = (network: ClientNetwork) => {\n\t\t\treturn network.isCollapsed ? \"Expand\" : \"Collapse\";\n\t\t};\n\n\t\treturn {\n\t\t\tchannel,\n\t\t\tjoinChannelLabel,\n\t\t\tunreadCount,\n\t\t\tonCollapseClick,\n\t\t\tgetExpandLabel,\n\t\t};\n\t},\n});\n</script>\n","import storage from \"../localStorage\";\n\nexport default (network, isCollapsed) => {\n\tconst stored = storage.get(\"thelounge.networks.collapsed\");\n\tconst networks = stored ? new Set(JSON.parse(stored)) : new Set();\n\n\tnetwork.isCollapsed = isCollapsed;\n\n\tif (isCollapsed) {\n\t\tnetworks.add(network.uuid);\n\t} else {\n\t\tnetworks.delete(network.uuid);\n\t}\n\n\tstorage.set(\"thelounge.networks.collapsed\", JSON.stringify([...networks]));\n};\n","export default (count: number) => {\n\tif (count < 1000) {\n\t\treturn count.toString();\n\t}\n\n\treturn (count / 1000).toFixed(2).slice(0, -1) + \"k\";\n};\n","<template>\n\t<!-- TODO: move closed style to it's own class -->\n\t<div\n\t\tv-if=\"isChannelVisible\"\n\t\tref=\"element\"\n\t\t:class=\"[\n\t\t\t'channel-list-item',\n\t\t\t{active: active},\n\t\t\t{'parted-channel': channel.type === 'channel' && channel.state === 0},\n\t\t\t{'has-draft': channel.pendingMessage},\n\t\t\t{'has-unread': channel.unread},\n\t\t\t{'has-highlight': channel.highlight},\n\t\t\t{\n\t\t\t\t'not-secure':\n\t\t\t\t\tchannel.type === 'lobby' && network.status.connected && !network.status.secure,\n\t\t\t},\n\t\t\t{'not-connected': channel.type === 'lobby' && !network.status.connected},\n\t\t\t{'is-muted': channel.muted},\n\t\t]\"\n\t\t:aria-label=\"getAriaLabel()\"\n\t\t:title=\"getAriaLabel()\"\n\t\t:data-name=\"channel.name\"\n\t\t:data-type=\"channel.type\"\n\t\t:aria-controls=\"'#chan-' + channel.id\"\n\t\t:aria-selected=\"active\"\n\t\t:style=\"channel.closed ? {transition: 'none', opacity: 0.4} : undefined\"\n\t\trole=\"tab\"\n\t\t@click=\"click\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t>\n\t\t<slot :network=\"network\" :channel=\"channel\" :active-channel=\"activeChannel\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport eventbus from \"../js/eventbus\";\nimport isChannelCollapsed from \"../js/helpers/isChannelCollapsed\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {switchToChannel} from \"../js/router\";\n\nexport default defineComponent({\n\tname: \"ChannelWrapper\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {\n\t\t\ttype: Object as PropType<ClientChan>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst activeChannel = computed(() => store.state.activeChannel);\n\t\tconst isChannelVisible = computed(\n\t\t\t() => props.isFiltering || !isChannelCollapsed(props.network, props.channel)\n\t\t);\n\n\t\tconst getAriaLabel = () => {\n\t\t\tconst extra: string[] = [];\n\t\t\tconst type = props.channel.type;\n\n\t\t\tif (props.channel.unread > 0) {\n\t\t\t\tif (props.channel.unread > 1) {\n\t\t\t\t\textra.push(`${props.channel.unread} unread messages`);\n\t\t\t\t} else {\n\t\t\t\t\textra.push(`${props.channel.unread} unread message`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (props.channel.highlight > 0) {\n\t\t\t\tif (props.channel.highlight > 1) {\n\t\t\t\t\textra.push(`${props.channel.highlight} mentions`);\n\t\t\t\t} else {\n\t\t\t\t\textra.push(`${props.channel.highlight} mention`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn `${type}: ${props.channel.name} ${extra.length ? `(${extra.join(\", \")})` : \"\"}`;\n\t\t};\n\n\t\tconst click = () => {\n\t\t\tif (props.isFiltering) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitchToChannel(props.channel);\n\t\t};\n\n\t\tconst openContextMenu = (event: MouseEvent) => {\n\t\t\teventbus.emit(\"contextmenu:channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t\tnetwork: props.network,\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tactiveChannel,\n\t\t\tisChannelVisible,\n\t\t\tgetAriaLabel,\n\t\t\tclick,\n\t\t\topenContextMenu,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ChannelWrapper.vue?vue&type=template&id=27b55c3c&ts=true\"\nimport script from \"./ChannelWrapper.vue?vue&type=script&lang=ts\"\nexport * from \"./ChannelWrapper.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkLobby.vue?vue&type=template&id=0ca1e50b&ts=true\"\nimport script from \"./NetworkLobby.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkLobby.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<!-- TODO: investigate -->\n\t<ChannelWrapper ref=\"wrapper\" v-bind=\"$props\">\n\t\t<span class=\"name\">{{ channel.name }}</span>\n\t\t<span\n\t\t\tv-if=\"channel.unread\"\n\t\t\t:class=\"{highlight: channel.highlight && !channel.muted}\"\n\t\t\tclass=\"badge\"\n\t\t\t>{{ unreadCount }}</span\n\t\t>\n\t\t<template v-if=\"channel.type === 'channel'\">\n\t\t\t<span\n\t\t\t\tv-if=\"channel.state === 0\"\n\t\t\t\tclass=\"parted-channel-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Not currently joined\"\n\t\t\t>\n\t\t\t\t<span class=\"parted-channel-icon\" />\n\t\t\t</span>\n\t\t\t<span class=\"close-tooltip tooltipped tooltipped-w\" aria-label=\"Leave\">\n\t\t\t\t<button class=\"close\" aria-label=\"Leave\" @click.stop=\"close\" />\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<span class=\"close-tooltip tooltipped tooltipped-w\" aria-label=\"Close\">\n\t\t\t\t<button class=\"close\" aria-label=\"Close\" @click.stop=\"close\" />\n\t\t\t</span>\n\t\t</template>\n\t</ChannelWrapper>\n</template>\n\n<script lang=\"ts\">\nimport {PropType, defineComponent, computed} from \"vue\";\nimport roundBadgeNumber from \"../js/helpers/roundBadgeNumber\";\nimport useCloseChannel from \"../js/hooks/use-close-channel\";\nimport {ClientChan, ClientNetwork} from \"../js/types\";\nimport ChannelWrapper from \"./ChannelWrapper.vue\";\n\nexport default defineComponent({\n\tname: \"Channel\",\n\tcomponents: {\n\t\tChannelWrapper,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {\n\t\t\ttype: Object as PropType<ClientChan>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst unreadCount = computed(() => roundBadgeNumber(props.channel.unread));\n\t\tconst close = useCloseChannel(props.channel);\n\n\t\treturn {\n\t\t\tunreadCount,\n\t\t\tclose,\n\t\t};\n\t},\n});\n</script>\n","import eventbus from \"../eventbus\";\nimport socket from \"../socket\";\nimport {ClientChan} from \"../types\";\n\nexport default function useCloseChannel(channel: ClientChan) {\n\treturn () => {\n\t\tif (channel.type === \"lobby\") {\n\t\t\teventbus.emit(\n\t\t\t\t\"confirm-dialog\",\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Remove network\",\n\t\t\t\t\ttext: `Are you sure you want to quit and remove ${channel.name}? This cannot be undone.`,\n\t\t\t\t\tbutton: \"Remove network\",\n\t\t\t\t},\n\t\t\t\t(result: boolean) => {\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tchannel.closed = true;\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: Number(channel.id),\n\t\t\t\t\t\ttext: \"/quit\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tchannel.closed = true;\n\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: Number(channel.id),\n\t\t\ttext: \"/close\",\n\t\t});\n\t};\n}\n","import { render } from \"./Channel.vue?vue&type=template&id=27e62c21&ts=true\"\nimport script from \"./Channel.vue?vue&type=script&lang=ts\"\nexport * from \"./Channel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form\n\t\t:id=\"'join-channel-' + channel.id\"\n\t\tclass=\"join-form\"\n\t\tmethod=\"post\"\n\t\taction=\"\"\n\t\tautocomplete=\"off\"\n\t\t@keydown.esc.prevent=\"$emit('toggle-join-channel')\"\n\t\t@submit.prevent=\"onSubmit\"\n\t>\n\t\t<input\n\t\t\tv-model=\"inputChannel\"\n\t\t\tv-focus\n\t\t\ttype=\"text\"\n\t\t\tclass=\"input\"\n\t\t\tname=\"channel\"\n\t\t\tplaceholder=\"Channel\"\n\t\t\tpattern=\"[^\\s]+\"\n\t\t\tmaxlength=\"200\"\n\t\t\ttitle=\"The channel name may not contain spaces\"\n\t\t\trequired\n\t\t/>\n\t\t<input\n\t\t\tv-model=\"inputPassword\"\n\t\t\ttype=\"password\"\n\t\t\tclass=\"input\"\n\t\t\tname=\"key\"\n\t\t\tplaceholder=\"Password (optional)\"\n\t\t\tpattern=\"[^\\s]+\"\n\t\t\tmaxlength=\"200\"\n\t\t\ttitle=\"The channel password may not contain spaces\"\n\t\t\tautocomplete=\"new-password\"\n\t\t/>\n\t\t<button type=\"submit\" class=\"btn btn-small\">Join</button>\n\t</form>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType, ref} from \"vue\";\nimport {switchToChannel} from \"../js/router\";\nimport socket from \"../js/socket\";\nimport {useStore} from \"../js/store\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"JoinChannel\",\n\tdirectives: {\n\t\tfocus: {\n\t\t\tmounted: (el: HTMLFormElement) => el.focus(),\n\t\t},\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\temits: [\"toggle-join-channel\"],\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\t\tconst inputChannel = ref(\"\");\n\t\tconst inputPassword = ref(\"\");\n\n\t\tconst onSubmit = () => {\n\t\t\tconst existingChannel = store.getters.findChannelOnCurrentNetwork(inputChannel.value);\n\n\t\t\tif (existingChannel) {\n\t\t\t\tswitchToChannel(existingChannel);\n\t\t\t} else {\n\t\t\t\tconst chanTypes = props.network.serverOptions.CHANTYPES;\n\t\t\t\tlet channel = inputChannel.value;\n\n\t\t\t\tif (chanTypes && chanTypes.length > 0 && !chanTypes.includes(channel[0])) {\n\t\t\t\t\tchannel = chanTypes[0] + channel;\n\t\t\t\t}\n\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttext: `/join ${channel} ${inputPassword.value}`,\n\t\t\t\t\ttarget: props.channel.id,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinputChannel.value = \"\";\n\t\t\tinputPassword.value = \"\";\n\t\t\temit(\"toggle-join-channel\");\n\t\t};\n\n\t\treturn {\n\t\t\tinputChannel,\n\t\t\tinputPassword,\n\t\t\tonSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./JoinChannel.vue?vue&type=template&id=310e4234&ts=true\"\nimport script from \"./JoinChannel.vue?vue&type=script&lang=ts\"\nexport * from \"./JoinChannel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkList.vue?vue&type=template&id=bbdaacae&ts=true\"\nimport script from \"./NetworkList.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkList.vue?vue&type=script&lang=ts\"\n\nimport \"./NetworkList.vue?vue&type=style&index=0&id=bbdaacae&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Sidebar.vue?vue&type=template&id=f5fb6afa&ts=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=ts\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div\n\t\tid=\"image-viewer\"\n\t\tref=\"viewer\"\n\t\t:class=\"{opened: link !== null}\"\n\t\t@wheel=\"onMouseWheel\"\n\t\t@touchstart.passive=\"onTouchStart\"\n\t\t@click=\"onClick\"\n\t>\n\t\t<template v-if=\"link !== null\">\n\t\t\t<button class=\"close-btn\" aria-label=\"Close\"></button>\n\n\t\t\t<button\n\t\t\t\tv-if=\"previousImage\"\n\t\t\t\tclass=\"previous-image-btn\"\n\t\t\t\taria-label=\"Previous image\"\n\t\t\t\t@click.stop=\"previous\"\n\t\t\t></button>\n\t\t\t<button\n\t\t\t\tv-if=\"nextImage\"\n\t\t\t\tclass=\"next-image-btn\"\n\t\t\t\taria-label=\"Next image\"\n\t\t\t\t@click.stop=\"next\"\n\t\t\t></button>\n\n\t\t\t<a class=\"open-btn\" :href=\"link.link\" target=\"_blank\" rel=\"noopener\"></a>\n\n\t\t\t<img\n\t\t\t\tref=\"image\"\n\t\t\t\t:src=\"link.thumb\"\n\t\t\t\talt=\"\"\n\t\t\t\t:style=\"computeImageStyles\"\n\t\t\t\t@load=\"onImageLoad\"\n\t\t\t\t@mousedown=\"onImageMouseDown\"\n\t\t\t\t@touchstart.passive=\"onImageTouchStart\"\n\t\t\t/>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport Mousetrap from \"mousetrap\";\nimport {computed, defineComponent, ref, watch} from \"vue\";\nimport {onBeforeRouteLeave, onBeforeRouteUpdate} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientChan, ClientMessage, ClientLinkPreview} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"ImageViewer\",\n\tsetup() {\n\t\tconst viewer = ref<HTMLDivElement>();\n\t\tconst image = ref<HTMLImageElement>();\n\n\t\tconst link = ref<ClientLinkPreview | null>(null);\n\t\tconst previousImage = ref<ClientLinkPreview | null>();\n\t\tconst nextImage = ref<ClientLinkPreview | null>();\n\t\tconst channel = ref<ClientChan | null>();\n\n\t\tconst position = ref<{\n\t\t\tx: number;\n\t\t\ty: number;\n\t\t}>({\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst transform = ref<{\n\t\t\tscale: number;\n\t\t\tx: number;\n\t\t\ty: number;\n\t\t}>({\n\t\t\tscale: 1,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst computeImageStyles = computed(() => {\n\t\t\t// Sub pixels may cause the image to blur in certain browsers\n\t\t\t// round it down to prevent that\n\t\t\tconst transformX = Math.floor(transform.value.x);\n\t\t\tconst transformY = Math.floor(transform.value.y);\n\n\t\t\treturn {\n\t\t\t\tleft: `${position.value.x}px`,\n\t\t\t\ttop: `${position.value.y}px`,\n\t\t\t\ttransform: `translate3d(${transformX}px, ${transformY}px, 0) scale3d(${transform.value.scale}, ${transform.value.scale}, 1)`,\n\t\t\t};\n\t\t});\n\n\t\tconst closeViewer = () => {\n\t\t\tif (link.value === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchannel.value = null;\n\t\t\tpreviousImage.value = null;\n\t\t\tnextImage.value = null;\n\t\t\tlink.value = null;\n\t\t};\n\n\t\tconst setPrevNextImages = () => {\n\t\t\tif (!channel.value || !link.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst links = channel.value.messages\n\t\t\t\t.map((msg) => msg.previews)\n\t\t\t\t.flat()\n\t\t\t\t.filter((preview) => preview.thumb);\n\n\t\t\tconst currentIndex = links.indexOf(link.value);\n\n\t\t\tpreviousImage.value = links[currentIndex - 1] || null;\n\t\t\tnextImage.value = links[currentIndex + 1] || null;\n\t\t};\n\n\t\tconst previous = () => {\n\t\t\tif (previousImage.value) {\n\t\t\t\tlink.value = previousImage.value;\n\t\t\t}\n\t\t};\n\n\t\tconst next = () => {\n\t\t\tif (nextImage.value) {\n\t\t\t\tlink.value = nextImage.value;\n\t\t\t}\n\t\t};\n\n\t\tconst prepareImage = () => {\n\t\t\tconst viewerEl = viewer.value;\n\t\t\tconst imageEl = image.value;\n\n\t\t\tif (!viewerEl || !imageEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst width = viewerEl.offsetWidth;\n\t\t\tconst height = viewerEl.offsetHeight;\n\t\t\tconst scale = Math.min(1, width / imageEl.width, height / imageEl.height);\n\n\t\t\tposition.value.x = Math.floor(-image.value!.naturalWidth / 2);\n\t\t\tposition.value.y = Math.floor(-image.value!.naturalHeight / 2);\n\t\t\ttransform.value.scale = Math.max(scale, 0.1);\n\t\t\ttransform.value.x = width / 2;\n\t\t\ttransform.value.y = height / 2;\n\t\t};\n\n\t\tconst onImageLoad = () => {\n\t\t\tprepareImage();\n\t\t};\n\n\t\tconst calculateZoomShift = (newScale: number, x: number, y: number, oldScale: number) => {\n\t\t\tif (!image.value || !viewer.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst imageWidth = image.value.width;\n\t\t\tconst centerX = viewer.value.offsetWidth / 2;\n\t\t\tconst centerY = viewer.value.offsetHeight / 2;\n\n\t\t\treturn {\n\t\t\t\tx:\n\t\t\t\t\tcenterX -\n\t\t\t\t\t((centerX - (y - (imageWidth * x) / 2)) / x) * newScale +\n\t\t\t\t\t(imageWidth * newScale) / 2,\n\t\t\t\ty:\n\t\t\t\t\tcenterY -\n\t\t\t\t\t((centerY - (oldScale - (imageWidth * x) / 2)) / x) * newScale +\n\t\t\t\t\t(imageWidth * newScale) / 2,\n\t\t\t};\n\t\t};\n\n\t\tconst correctPosition = () => {\n\t\t\tconst imageEl = image.value;\n\t\t\tconst viewerEl = viewer.value;\n\n\t\t\tif (!imageEl || !viewerEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst widthScaled = imageEl.width * transform.value.scale;\n\t\t\tconst heightScaled = imageEl.height * transform.value.scale;\n\t\t\tconst containerWidth = viewerEl.offsetWidth;\n\t\t\tconst containerHeight = viewerEl.offsetHeight;\n\n\t\t\tif (widthScaled < containerWidth) {\n\t\t\t\ttransform.value.x = containerWidth / 2;\n\t\t\t} else if (transform.value.x - widthScaled / 2 > 0) {\n\t\t\t\ttransform.value.x = widthScaled / 2;\n\t\t\t} else if (transform.value.x + widthScaled / 2 < containerWidth) {\n\t\t\t\ttransform.value.x = containerWidth - widthScaled / 2;\n\t\t\t}\n\n\t\t\tif (heightScaled < containerHeight) {\n\t\t\t\ttransform.value.y = containerHeight / 2;\n\t\t\t} else if (transform.value.y - heightScaled / 2 > 0) {\n\t\t\t\ttransform.value.y = heightScaled / 2;\n\t\t\t} else if (transform.value.y + heightScaled / 2 < containerHeight) {\n\t\t\t\ttransform.value.y = containerHeight - heightScaled / 2;\n\t\t\t}\n\t\t};\n\n\t\t// Reduce multiple touch points into a single x/y/scale\n\t\tconst reduceTouches = (touches: TouchList) => {\n\t\t\tlet totalX = 0;\n\t\t\tlet totalY = 0;\n\t\t\tlet totalScale = 0;\n\n\t\t\tfor (let i = 0; i < touches.length; i++) {\n\t\t\t\tconst x = touches[i].clientX;\n\t\t\t\tconst y = touches[i].clientY;\n\n\t\t\t\ttotalX += x;\n\t\t\t\ttotalY += y;\n\n\t\t\t\tfor (let i2 = 0; i2 < touches.length; i2++) {\n\t\t\t\t\tif (i !== i2) {\n\t\t\t\t\t\tconst x2 = touches[i2].clientX;\n\t\t\t\t\t\tconst y2 = touches[i2].clientY;\n\t\t\t\t\t\ttotalScale += Math.sqrt((x - x2) * (x - x2) + (y - y2) * (y - y2));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (totalScale === 0) {\n\t\t\t\ttotalScale = 1;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx: totalX / touches.length,\n\t\t\t\ty: totalY / touches.length,\n\t\t\t\tscale: totalScale / touches.length,\n\t\t\t};\n\t\t};\n\n\t\tconst onTouchStart = (e: TouchEvent) => {\n\t\t\t// prevent sidebar touchstart event, we don't want to interact with sidebar while in image viewer\n\t\t\te.stopImmediatePropagation();\n\t\t};\n\n\t\t// Touch image manipulation:\n\t\t// 1. Move around by dragging it with one finger\n\t\t// 2. Change image scale by using two fingers\n\t\tconst onImageTouchStart = (e: TouchEvent) => {\n\t\t\tconst img = image.value;\n\t\t\tlet touch = reduceTouches(e.touches);\n\t\t\tlet currentTouches = e.touches;\n\t\t\tlet touchEndFingers = 0;\n\n\t\t\tconst currentTransform = {\n\t\t\t\tx: touch.x,\n\t\t\t\ty: touch.y,\n\t\t\t\tscale: touch.scale,\n\t\t\t};\n\n\t\t\tconst startTransform = {\n\t\t\t\tx: transform.value.x,\n\t\t\t\ty: transform.value.y,\n\t\t\t\tscale: transform.value.scale,\n\t\t\t};\n\n\t\t\tconst touchMove = (moveEvent) => {\n\t\t\t\ttouch = reduceTouches(moveEvent.touches);\n\n\t\t\t\tif (currentTouches.length !== moveEvent.touches.length) {\n\t\t\t\t\tcurrentTransform.x = touch.x;\n\t\t\t\t\tcurrentTransform.y = touch.y;\n\t\t\t\t\tcurrentTransform.scale = touch.scale;\n\t\t\t\t\tstartTransform.x = transform.value.x;\n\t\t\t\t\tstartTransform.y = transform.value.y;\n\t\t\t\t\tstartTransform.scale = transform.value.scale;\n\t\t\t\t}\n\n\t\t\t\tconst deltaX = touch.x - currentTransform.x;\n\t\t\t\tconst deltaY = touch.y - currentTransform.y;\n\t\t\t\tconst deltaScale = touch.scale / currentTransform.scale;\n\t\t\t\tcurrentTouches = moveEvent.touches;\n\t\t\t\ttouchEndFingers = 0;\n\n\t\t\t\tconst newScale = Math.min(3, Math.max(0.1, startTransform.scale * deltaScale));\n\n\t\t\t\tconst fixedPosition = calculateZoomShift(\n\t\t\t\t\tnewScale,\n\t\t\t\t\tstartTransform.scale,\n\t\t\t\t\tstartTransform.x,\n\t\t\t\t\tstartTransform.y\n\t\t\t\t);\n\n\t\t\t\tif (!fixedPosition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttransform.value.x = fixedPosition.x + deltaX;\n\t\t\t\ttransform.value.y = fixedPosition.y + deltaY;\n\t\t\t\ttransform.value.scale = newScale;\n\t\t\t\tcorrectPosition();\n\t\t\t};\n\n\t\t\tconst touchEnd = (endEvent: TouchEvent) => {\n\t\t\t\tconst changedTouches = endEvent.changedTouches.length;\n\n\t\t\t\tif (currentTouches.length > changedTouches + touchEndFingers) {\n\t\t\t\t\ttouchEndFingers += changedTouches;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// todo: this is swipe to close, but it's not working very well due to unfinished delta calculation\n\t\t\t\t/* if (\n\t\t\t\t\ttransform.value.scale <= 1 &&\n\t\t\t\t\tendEvent.changedTouches[0].clientY - startTransform.y <= -70\n\t\t\t\t) {\n\t\t\t\t\treturn this.closeViewer();\n\t\t\t\t}*/\n\n\t\t\t\tcorrectPosition();\n\n\t\t\t\timg?.removeEventListener(\"touchmove\", touchMove);\n\t\t\t\timg?.removeEventListener(\"touchend\", touchEnd);\n\t\t\t};\n\n\t\t\timg?.addEventListener(\"touchmove\", touchMove, {passive: true});\n\t\t\timg?.addEventListener(\"touchend\", touchEnd, {passive: true});\n\t\t};\n\n\t\t// Image mouse manipulation:\n\t\t// 1. Mouse wheel scrolling will zoom in and out\n\t\t// 2. If image is zoomed in, simply dragging it will move it around\n\t\tconst onImageMouseDown = (e: MouseEvent) => {\n\t\t\t// todo: ignore if in touch event currently?\n\n\t\t\t// only left mouse\n\t\t\t// TODO: e.buttons?\n\t\t\tif (e.which !== 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tconst viewerEl = viewer.value;\n\t\t\tconst imageEl = image.value;\n\n\t\t\tif (!viewerEl || !imageEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst startX = e.clientX;\n\t\t\tconst startY = e.clientY;\n\t\t\tconst startTransformX = transform.value.x;\n\t\t\tconst startTransformY = transform.value.y;\n\t\t\tconst widthScaled = imageEl.width * transform.value.scale;\n\t\t\tconst heightScaled = imageEl.height * transform.value.scale;\n\t\t\tconst containerWidth = viewerEl.offsetWidth;\n\t\t\tconst containerHeight = viewerEl.offsetHeight;\n\t\t\tconst centerX = transform.value.x - widthScaled / 2;\n\t\t\tconst centerY = transform.value.y - heightScaled / 2;\n\t\t\tlet movedDistance = 0;\n\n\t\t\tconst mouseMove = (moveEvent: MouseEvent) => {\n\t\t\t\tmoveEvent.stopPropagation();\n\t\t\t\tmoveEvent.preventDefault();\n\n\t\t\t\tconst newX = moveEvent.clientX - startX;\n\t\t\t\tconst newY = moveEvent.clientY - startY;\n\n\t\t\t\tmovedDistance = Math.max(movedDistance, Math.abs(newX), Math.abs(newY));\n\n\t\t\t\tif (centerX < 0 || widthScaled + centerX > containerWidth) {\n\t\t\t\t\ttransform.value.x = startTransformX + newX;\n\t\t\t\t}\n\n\t\t\t\tif (centerY < 0 || heightScaled + centerY > containerHeight) {\n\t\t\t\t\ttransform.value.y = startTransformY + newY;\n\t\t\t\t}\n\n\t\t\t\tcorrectPosition();\n\t\t\t};\n\n\t\t\tconst mouseUp = (upEvent: MouseEvent) => {\n\t\t\t\tcorrectPosition();\n\n\t\t\t\tif (movedDistance < 2 && upEvent.button === 0) {\n\t\t\t\t\tcloseViewer();\n\t\t\t\t}\n\n\t\t\t\timage.value?.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\timage.value?.removeEventListener(\"mouseup\", mouseUp);\n\t\t\t};\n\n\t\t\timage.value?.addEventListener(\"mousemove\", mouseMove);\n\t\t\timage.value?.addEventListener(\"mouseup\", mouseUp);\n\t\t};\n\n\t\t// If image is zoomed in, holding ctrl while scrolling will move the image up and down\n\t\tconst onMouseWheel = (e: WheelEvent) => {\n\t\t\t// if image viewer is closing (css animation), you can still trigger mousewheel\n\t\t\t// TODO: Figure out a better fix for this\n\t\t\tif (link.value === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.preventDefault(); // TODO: Can this be passive?\n\n\t\t\tif (e.ctrlKey) {\n\t\t\t\ttransform.value.y += e.deltaY;\n\t\t\t} else {\n\t\t\t\tconst delta = e.deltaY > 0 ? 0.1 : -0.1;\n\t\t\t\tconst newScale = Math.min(3, Math.max(0.1, transform.value.scale + delta));\n\t\t\t\tconst fixedPosition = calculateZoomShift(\n\t\t\t\t\tnewScale,\n\t\t\t\t\ttransform.value.scale,\n\t\t\t\t\ttransform.value.x,\n\t\t\t\t\ttransform.value.y\n\t\t\t\t);\n\n\t\t\t\tif (!fixedPosition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttransform.value.scale = newScale;\n\t\t\t\ttransform.value.x = fixedPosition.x;\n\t\t\t\ttransform.value.y = fixedPosition.y;\n\t\t\t}\n\n\t\t\tcorrectPosition();\n\t\t};\n\n\t\tconst onClick = (e: Event) => {\n\t\t\t// If click triggers on the image, ignore it\n\t\t\tif (e.target === image.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcloseViewer();\n\t\t};\n\n\t\twatch(link, (newLink, oldLink) => {\n\t\t\t// TODO: history.pushState\n\t\t\tif (newLink === null) {\n\t\t\t\teventbus.off(\"escapekey\", closeViewer);\n\t\t\t\teventbus.off(\"resize\", correctPosition);\n\t\t\t\tMousetrap.unbind(\"left\");\n\t\t\t\tMousetrap.unbind(\"right\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetPrevNextImages();\n\n\t\t\tif (!oldLink) {\n\t\t\t\teventbus.on(\"escapekey\", closeViewer);\n\t\t\t\teventbus.on(\"resize\", correctPosition);\n\t\t\t\tMousetrap.bind(\"left\", previous);\n\t\t\t\tMousetrap.bind(\"right\", next);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tlink,\n\t\t\tchannel,\n\t\t\timage,\n\t\t\ttransform,\n\t\t\tcloseViewer,\n\t\t\tnext,\n\t\t\tprevious,\n\t\t\tonImageLoad,\n\t\t\tonImageMouseDown,\n\t\t\tonMouseWheel,\n\t\t\tonClick,\n\t\t\tonTouchStart,\n\t\t\tpreviousImage,\n\t\t\tnextImage,\n\t\t\tonImageTouchStart,\n\t\t\tcomputeImageStyles,\n\t\t\tviewer,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ImageViewer.vue?vue&type=template&id=76497373&ts=true\"\nimport script from \"./ImageViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageViewer.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import socket from \"../socket\";\nimport eventbus from \"../eventbus\";\nimport type {ClientChan, ClientNetwork, ClientUser} from \"../types\";\nimport {switchToChannel} from \"../router\";\nimport {TypedStore} from \"../store\";\nimport useCloseChannel from \"../hooks/use-close-channel\";\n\ntype BaseContextMenuItem = {\n\tlabel: string;\n\ttype: string;\n\tclass: string;\n};\n\ntype ContextMenuItemWithAction = BaseContextMenuItem & {\n\taction: () => void;\n};\n\ntype ContextMenuItemWithLink = BaseContextMenuItem & {\n\tlink?: string;\n};\n\ntype ContextMenuDividerItem = {\n\ttype: \"divider\";\n};\n\nexport type ContextMenuItem =\n\t| ContextMenuItemWithAction\n\t| ContextMenuItemWithLink\n\t| ContextMenuDividerItem;\n\nexport function generateChannelContextMenu(\n\tchannel: ClientChan,\n\tnetwork: ClientNetwork\n): ContextMenuItem[] {\n\tconst closeChannel = useCloseChannel(channel);\n\n\tconst typeMap = {\n\t\tlobby: \"network\",\n\t\tchannel: \"chan\",\n\t\tquery: \"query\",\n\t\tspecial: \"chan\",\n\t};\n\n\tconst closeMap = {\n\t\tlobby: \"Remove\",\n\t\tchannel: \"Leave\",\n\t\tquery: \"Close\",\n\t\tspecial: \"Close\",\n\t};\n\n\tlet items: ContextMenuItem[] = [\n\t\t{\n\t\t\tlabel: channel.name,\n\t\t\ttype: \"item\",\n\t\t\tclass: typeMap[channel.type],\n\t\t\tlink: `/chan-${channel.id}`,\n\t\t},\n\t\t{\n\t\t\ttype: \"divider\",\n\t\t},\n\t];\n\n\t// Add menu items for lobbies\n\tif (channel.type === \"lobby\") {\n\t\titems = [\n\t\t\t...items,\n\t\t\t{\n\t\t\t\tlabel: \"Edit this network\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"edit\",\n\t\t\t\tlink: `/edit-network/${network.uuid}`,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Join a channel\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"join\",\n\t\t\t\taction: () => (network.isJoinChannelShown = true),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"List all channels\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"list\",\n\t\t\t\taction: () =>\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/list\",\n\t\t\t\t\t}),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"List ignored users\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"list\",\n\t\t\t\taction: () =>\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/ignorelist\",\n\t\t\t\t\t}),\n\t\t\t},\n\t\t\tnetwork.status.connected\n\t\t\t\t? {\n\t\t\t\t\t\tlabel: \"Disconnect\",\n\t\t\t\t\t\ttype: \"item\",\n\t\t\t\t\t\tclass: \"disconnect\",\n\t\t\t\t\t\taction: () =>\n\t\t\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t\t\ttext: \"/disconnect\",\n\t\t\t\t\t\t\t}),\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tlabel: \"Connect\",\n\t\t\t\t\t\ttype: \"item\",\n\t\t\t\t\t\tclass: \"connect\",\n\t\t\t\t\t\taction: () =>\n\t\t\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t\t\ttext: \"/connect\",\n\t\t\t\t\t\t\t}),\n\t\t\t\t  },\n\t\t];\n\t}\n\n\t// Add menu items for channels\n\tif (channel.type === \"channel\") {\n\t\titems.push({\n\t\t\tlabel: \"Edit topic\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"edit\",\n\t\t\taction() {\n\t\t\t\tchannel.editTopic = true;\n\t\t\t\tswitchToChannel(channel);\n\t\t\t},\n\t\t});\n\t\titems.push({\n\t\t\tlabel: \"List banned users\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"list\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/banlist\",\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// Add menu items for queries\n\tif (channel.type === \"query\") {\n\t\titems.push(\n\t\t\t{\n\t\t\t\tlabel: \"User information\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-whois\",\n\t\t\t\taction() {\n\t\t\t\t\tswitchToChannel(channel);\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/whois \" + channel.name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Ignore user\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-ignore\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/ignore \" + channel.name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\n\tif (channel.type === \"channel\" || channel.type === \"query\") {\n\t\titems.push({\n\t\t\tlabel: \"Clear history\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"clear-history\",\n\t\t\taction() {\n\t\t\t\teventbus.emit(\n\t\t\t\t\t\"confirm-dialog\",\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Clear history\",\n\t\t\t\t\t\ttext: `Are you sure you want to clear history for ${channel.name}? This cannot be undone.`,\n\t\t\t\t\t\tbutton: \"Clear history\",\n\t\t\t\t\t},\n\t\t\t\t\t(result) => {\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsocket.emit(\"history:clear\", {\n\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\tconst humanFriendlyChanTypeMap: Record<string, string> = {\n\t\tlobby: \"network\",\n\t\tchannel: \"channel\",\n\t\tquery: \"conversation\",\n\t};\n\n\t// We don't allow the muting of ChanType.SPECIAL channels\n\tconst mutableChanTypes = Object.keys(humanFriendlyChanTypeMap);\n\n\tif (mutableChanTypes.includes(channel.type)) {\n\t\tconst chanType = humanFriendlyChanTypeMap[channel.type];\n\n\t\titems.push({\n\t\t\tlabel: channel.muted ? `Unmute ${chanType}` : `Mute ${chanType}`,\n\t\t\ttype: \"item\",\n\t\t\tclass: \"mute\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"mute:change\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\tsetMutedTo: !channel.muted,\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// Add close menu item\n\titems.push({\n\t\tlabel: closeMap[channel.type],\n\t\ttype: \"item\",\n\t\tclass: \"close\",\n\t\taction() {\n\t\t\tcloseChannel();\n\t\t},\n\t});\n\n\treturn items;\n}\n\nexport function generateInlineChannelContextMenu(\n\tstore: TypedStore,\n\tchan: string,\n\tnetwork: ClientNetwork\n): ContextMenuItem[] {\n\tconst join = () => {\n\t\tconst channel = network.channels.find((c) => c.name === chan);\n\n\t\tif (channel) {\n\t\t\tswitchToChannel(channel);\n\t\t}\n\n\t\tif (store.state.activeChannel) {\n\t\t\tsocket.emit(\"input\", {\n\t\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\t\ttext: \"/join \" + chan,\n\t\t\t});\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\"Unable to join channel: activeChannel is undefined\");\n\t\t}\n\t};\n\n\tconst channel = network.channels.find((c) => c.name === chan);\n\n\tif (channel) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: \"Go to channel\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"chan\",\n\t\t\t\tlink: `/chan-${channel.id}`,\n\t\t\t},\n\t\t];\n\t}\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Join channel\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"join\",\n\t\t\taction: join,\n\t\t},\n\t];\n}\n\nexport function generateUserContextMenu(\n\tstore: TypedStore,\n\tchannel: ClientChan,\n\tnetwork: ClientNetwork,\n\tuser: Pick<ClientUser, \"nick\" | \"modes\">\n): ContextMenuItem[] {\n\tconst currentChannelUser: ClientUser | Record<string, never> = channel\n\t\t? channel.users.find((u) => u.nick === network.nick) || {}\n\t\t: {};\n\n\tconst whois = () => {\n\t\tconst chan = network.channels.find((c) => c.name === user.nick);\n\n\t\tif (chan) {\n\t\t\tswitchToChannel(chan);\n\t\t}\n\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: channel.id,\n\t\t\ttext: \"/whois \" + user.nick,\n\t\t});\n\t};\n\n\tconst items: ContextMenuItem[] = [\n\t\t{\n\t\t\tlabel: user.nick,\n\t\t\ttype: \"item\",\n\t\t\tclass: \"user\",\n\t\t\taction: whois,\n\t\t},\n\t\t{\n\t\t\ttype: \"divider\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"User information\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-whois\",\n\t\t\taction: whois,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Ignore user\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-ignore\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/ignore \" + user.nick,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: \"Direct messages\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-query\",\n\t\t\taction() {\n\t\t\t\tconst chan = store.getters.findChannelOnCurrentNetwork(user.nick);\n\n\t\t\t\tif (chan) {\n\t\t\t\t\tswitchToChannel(chan);\n\t\t\t\t}\n\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/query \" + user.nick,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t];\n\n\t// Bail because we're in a query or we don't have a special mode.\n\tif (!currentChannelUser.modes || currentChannelUser.modes.length < 1) {\n\t\treturn items;\n\t}\n\n\t// Names of the standard modes we are able to change\n\tconst modeCharToName = {\n\t\t\"~\": \"owner\",\n\t\t\"&\": \"admin\",\n\t\t\"@\": \"operator\",\n\t\t\"%\": \"half-op\",\n\t\t\"+\": \"voice\",\n\t};\n\n\t// Labels for the mode changes.  For example .rev({mode: \"a\", symbol: \"&\"}) => 'Revoke admin (-a)'\n\tconst modeTextTemplate = {\n\t\trevoke(m: {symbol: string; mode: string}) {\n\t\t\tconst name = modeCharToName[m.symbol];\n\n\t\t\tif (typeof name !== \"string\") {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst res = name ? `Revoke ${name} (-${m.mode})` : `Mode -${m.mode}`;\n\t\t\treturn res;\n\t\t},\n\t\tgive(m: {symbol: string; mode: string}) {\n\t\t\tconst name = modeCharToName[m.symbol];\n\n\t\t\tif (typeof name !== \"string\") {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst res = name ? `Give ${name} (+${m.mode})` : `Mode +${m.mode}`;\n\t\t\treturn res;\n\t\t},\n\t};\n\n\tconst networkModeSymbols = network.serverOptions.PREFIX.symbols;\n\n\t/**\n\t * Determine whether the prefix of mode p1 has access to perform actions on p2.\n\t *\n\t * EXAMPLE:\n\t *    compare('@', '@') => true\n\t *    compare('&', '@') => true\n\t *    compare('+', '~') => false\n\t * @param {string} p1 The mode performing an action\n\t * @param {string} p2 The target mode\n\t *\n\t * @return {boolean} whether p1 can perform an action on p2\n\t */\n\tfunction compare(p1: string, p2: string): boolean {\n\t\t// The modes ~ and @ can perform actions on their own mode.  The others on modes below.\n\t\treturn \"~@\".indexOf(p1) > -1\n\t\t\t? networkModeSymbols.indexOf(p1) <= networkModeSymbols.indexOf(p2)\n\t\t\t: networkModeSymbols.indexOf(p1) < networkModeSymbols.indexOf(p2);\n\t}\n\n\tnetwork.serverOptions.PREFIX.prefix.forEach((mode) => {\n\t\tif (!compare(currentChannelUser.modes[0], mode.symbol)) {\n\t\t\t// Our highest mode is below the current mode.  Bail.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!user.modes.includes(mode.symbol)) {\n\t\t\t// The target doesn't already have this mode, therefore we can set it.\n\t\t\titems.push({\n\t\t\t\tlabel: modeTextTemplate.give(mode),\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-set-mode\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/mode +\" + mode.mode + \" \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\titems.push({\n\t\t\t\tlabel: modeTextTemplate.revoke(mode),\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-revoke-mode\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/mode -\" + mode.mode + \" \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n\n\t// Determine if we are half-op or op depending on the network modes so we can kick.\n\tif (!compare(networkModeSymbols.indexOf(\"%\") > -1 ? \"%\" : \"@\", currentChannelUser.modes[0])) {\n\t\t// Check if the target user has no mode or a mode lower than ours.\n\t\tif (user.modes.length === 0 || compare(currentChannelUser.modes[0], user.modes[0])) {\n\t\t\titems.push({\n\t\t\t\tlabel: \"Kick\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-kick\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/kick \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\treturn items;\n}\n","<template>\n\t<div\n\t\tv-if=\"isOpen\"\n\t\tid=\"context-menu-container\"\n\t\t:class=\"{passthrough}\"\n\t\t@click=\"containerClick\"\n\t\t@contextmenu.prevent=\"containerClick\"\n\t\t@keydown.exact.up.prevent=\"navigateMenu(-1)\"\n\t\t@keydown.exact.down.prevent=\"navigateMenu(1)\"\n\t\t@keydown.exact.tab.prevent=\"navigateMenu(1)\"\n\t\t@keydown.shift.tab.prevent=\"navigateMenu(-1)\"\n\t>\n\t\t<ul\n\t\t\tid=\"context-menu\"\n\t\t\tref=\"contextMenu\"\n\t\t\trole=\"menu\"\n\t\t\t:style=\"{\n\t\t\t\ttop: style.top + 'px',\n\t\t\t\tleft: style.left + 'px',\n\t\t\t}\"\n\t\t\ttabindex=\"-1\"\n\t\t\t@mouseleave=\"activeItem = -1\"\n\t\t\t@keydown.enter.prevent=\"clickActiveItem\"\n\t\t>\n\t\t\t<!-- TODO: type -->\n\t\t\t<template v-for=\"(item, id) of (items as any)\" :key=\"item.name\">\n\t\t\t\t<li\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'context-menu-' + item.type,\n\t\t\t\t\t\titem.class ? 'context-menu-' + item.class : null,\n\t\t\t\t\t\t{active: id === activeItem},\n\t\t\t\t\t]\"\n\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t@mouseenter=\"hoverItem(id)\"\n\t\t\t\t\t@click=\"clickItem(item)\"\n\t\t\t\t>\n\t\t\t\t\t{{ item.label }}\n\t\t\t\t</li>\n\t\t\t</template>\n\t\t</ul>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {\n\tgenerateUserContextMenu,\n\tgenerateChannelContextMenu,\n\tgenerateInlineChannelContextMenu,\n\tContextMenuItem,\n} from \"../js/helpers/contextMenu\";\nimport eventbus from \"../js/eventbus\";\nimport {defineComponent, nextTick, onMounted, onUnmounted, PropType, ref} from \"vue\";\nimport {ClientChan, ClientMessage, ClientNetwork, ClientUser} from \"../js/types\";\nimport {useStore} from \"../js/store\";\nimport {useRouter} from \"vue-router\";\n\nexport default defineComponent({\n\tname: \"ContextMenu\",\n\tprops: {\n\t\tmessage: {\n\t\t\trequired: false,\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst router = useRouter();\n\n\t\tconst isOpen = ref(false);\n\t\tconst passthrough = ref(false);\n\n\t\tconst contextMenu = ref<HTMLUListElement | null>();\n\t\tconst previousActiveElement = ref<HTMLElement | null>();\n\t\tconst items = ref<ContextMenuItem[]>([]);\n\t\tconst activeItem = ref(-1);\n\t\tconst style = ref({\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t});\n\n\t\tconst close = () => {\n\t\t\tif (!isOpen.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisOpen.value = false;\n\t\t\titems.value = [];\n\n\t\t\tif (previousActiveElement.value) {\n\t\t\t\tpreviousActiveElement.value.focus();\n\t\t\t\tpreviousActiveElement.value = null;\n\t\t\t}\n\t\t};\n\n\t\tconst enablePointerEvents = () => {\n\t\t\tpassthrough.value = false;\n\t\t\tdocument.body.removeEventListener(\"pointerup\", enablePointerEvents);\n\t\t};\n\n\t\tconst containerClick = (event: MouseEvent) => {\n\t\t\tif (event.currentTarget === event.target) {\n\t\t\t\tclose();\n\t\t\t}\n\t\t};\n\n\t\tconst positionContextMenu = (event: MouseEvent) => {\n\t\t\tconst element = event.target as HTMLElement;\n\n\t\t\tif (!contextMenu.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuWidth = contextMenu.value?.offsetWidth;\n\t\t\tconst menuHeight = contextMenu.value?.offsetHeight;\n\n\t\t\tif (element && element.classList.contains(\"menu\")) {\n\t\t\t\treturn {\n\t\t\t\t\tleft: element.getBoundingClientRect().left - (menuWidth - element.offsetWidth),\n\t\t\t\t\ttop: element.getBoundingClientRect().top + element.offsetHeight,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst offset = {left: event.pageX, top: event.pageY};\n\n\t\t\tif (window.innerWidth - offset.left < menuWidth) {\n\t\t\t\toffset.left = window.innerWidth - menuWidth;\n\t\t\t}\n\n\t\t\tif (window.innerHeight - offset.top < menuHeight) {\n\t\t\t\toffset.top = window.innerHeight - menuHeight;\n\t\t\t}\n\n\t\t\treturn offset;\n\t\t};\n\n\t\tconst hoverItem = (id: number) => {\n\t\t\tactiveItem.value = id;\n\t\t};\n\n\t\tconst clickItem = (item: ContextMenuItem) => {\n\t\t\tclose();\n\n\t\t\tif (\"action\" in item && item.action) {\n\t\t\t\titem.action();\n\t\t\t} else if (\"link\" in item && item.link) {\n\t\t\t\trouter.push(item.link).catch(() => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(\"Failed to navigate to\", item.link);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst clickActiveItem = () => {\n\t\t\tif (items.value[activeItem.value]) {\n\t\t\t\tclickItem(items.value[activeItem.value]);\n\t\t\t}\n\t\t};\n\n\t\tconst open = (event: MouseEvent, newItems: ContextMenuItem[]) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tpreviousActiveElement.value = document.activeElement as HTMLElement;\n\t\t\titems.value = newItems;\n\t\t\tactiveItem.value = 0;\n\t\t\tisOpen.value = true;\n\n\t\t\t// Position the menu and set the focus on the first item after it's size has updated\n\t\t\tnextTick(() => {\n\t\t\t\tconst pos = positionContextMenu(event);\n\n\t\t\t\tif (!pos) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstyle.value.left = pos.left;\n\t\t\t\tstyle.value.top = pos.top;\n\t\t\t\tcontextMenu.value?.focus();\n\t\t\t}).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\t\t};\n\n\t\tconst openChannelContextMenu = (data: {\n\t\t\tevent: MouseEvent;\n\t\t\tchannel: ClientChan;\n\t\t\tnetwork: ClientNetwork;\n\t\t}) => {\n\t\t\tif (data.event.type === \"contextmenu\") {\n\t\t\t\t// Pass through all pointer events to allow the network list's\n\t\t\t\t// dragging events to continue triggering.\n\t\t\t\tpassthrough.value = true;\n\t\t\t\tdocument.body.addEventListener(\"pointerup\", enablePointerEvents, {\n\t\t\t\t\tpassive: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst newItems = generateChannelContextMenu(data.channel, data.network);\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst openInlineChannelContextMenu = (data: {channel: string; event: MouseEvent}) => {\n\t\t\tconst {network} = store.state.activeChannel;\n\t\t\tconst newItems = generateInlineChannelContextMenu(store, data.channel, network);\n\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst openUserContextMenu = (data: {\n\t\t\tuser: Pick<ClientUser, \"nick\" | \"modes\">;\n\t\t\tevent: MouseEvent;\n\t\t}) => {\n\t\t\tconst {network, channel} = store.state.activeChannel;\n\n\t\t\tconst newItems = generateUserContextMenu(\n\t\t\t\tstore,\n\t\t\t\tchannel,\n\t\t\t\tnetwork,\n\t\t\t\tchannel.users.find((u) => u.nick === data.user.nick) || {\n\t\t\t\t\tnick: data.user.nick,\n\t\t\t\t\tmodes: [],\n\t\t\t\t}\n\t\t\t);\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst navigateMenu = (direction: number) => {\n\t\t\tlet currentIndex = activeItem.value;\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\tconst nextItem = items.value[currentIndex];\n\n\t\t\t// If the next item we would select is a divider, skip over it\n\t\t\tif (nextItem && \"type\" in nextItem && nextItem.type === \"divider\") {\n\t\t\t\tcurrentIndex += direction;\n\t\t\t}\n\n\t\t\tif (currentIndex < 0) {\n\t\t\t\tcurrentIndex += items.value.length;\n\t\t\t}\n\n\t\t\tif (currentIndex > items.value.length - 1) {\n\t\t\t\tcurrentIndex -= items.value.length;\n\t\t\t}\n\n\t\t\tactiveItem.value = currentIndex;\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", close);\n\t\t\teventbus.on(\"contextmenu:cancel\", close);\n\t\t\teventbus.on(\"contextmenu:user\", openUserContextMenu);\n\t\t\teventbus.on(\"contextmenu:channel\", openChannelContextMenu);\n\t\t\teventbus.on(\"contextmenu:inline-channel\", openInlineChannelContextMenu);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", close);\n\t\t\teventbus.off(\"contextmenu:cancel\", close);\n\t\t\teventbus.off(\"contextmenu:user\", openUserContextMenu);\n\t\t\teventbus.off(\"contextmenu:channel\", openChannelContextMenu);\n\t\t\teventbus.off(\"contextmenu:inline-channel\", openInlineChannelContextMenu);\n\n\t\t\tclose();\n\t\t});\n\n\t\treturn {\n\t\t\tisOpen,\n\t\t\titems,\n\t\t\tactiveItem,\n\t\t\tstyle,\n\t\t\tcontextMenu,\n\t\t\tpassthrough,\n\t\t\tclose,\n\t\t\tcontainerClick,\n\t\t\tnavigateMenu,\n\t\t\thoverItem,\n\t\t\tclickItem,\n\t\t\tclickActiveItem,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ContextMenu.vue?vue&type=template&id=7e7c47de&ts=true\"\nimport script from \"./ContextMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./ContextMenu.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"confirm-dialog-overlay\" :class=\"{opened: !!data}\">\n\t\t<div v-if=\"data !== null\" id=\"confirm-dialog\">\n\t\t\t<div class=\"confirm-text\">\n\t\t\t\t<div class=\"confirm-text-title\">{{ data?.title }}</div>\n\t\t\t\t<p>{{ data?.text }}</p>\n\t\t\t</div>\n\t\t\t<div class=\"confirm-buttons\">\n\t\t\t\t<button class=\"btn btn-cancel\" @click=\"close(false)\">Cancel</button>\n\t\t\t\t<button class=\"btn btn-danger\" @click=\"close(true)\">{{ data?.button }}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n#confirm-dialog {\n\tbackground: var(--body-bg-color);\n\tcolor: #fff;\n\tmargin: 10px;\n\tborder-radius: 5px;\n\tmax-width: 500px;\n}\n\n#confirm-dialog .confirm-text {\n\tpadding: 15px;\n\tuser-select: text;\n}\n\n#confirm-dialog .confirm-text-title {\n\tfont-size: 20px;\n\tfont-weight: 700;\n\tmargin-bottom: 10px;\n}\n\n#confirm-dialog .confirm-buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tpadding: 15px;\n\tbackground: rgba(0, 0, 0, 0.3);\n}\n\n#confirm-dialog .confirm-buttons .btn {\n\tmargin-bottom: 0;\n\tmargin-left: 10px;\n}\n\n#confirm-dialog .confirm-buttons .btn-cancel {\n\tborder-color: transparent;\n}\n</style>\n\n<script lang=\"ts\">\nimport eventbus from \"../js/eventbus\";\nimport {defineComponent, onMounted, onUnmounted, ref} from \"vue\";\n\ntype ConfirmDialogData = {\n\ttitle: string;\n\ttext: string;\n\tbutton: string;\n};\n\ntype ConfirmDialogCallback = {\n\t(confirmed: boolean): void;\n};\n\nexport default defineComponent({\n\tname: \"ConfirmDialog\",\n\tsetup() {\n\t\tconst data = ref<ConfirmDialogData>();\n\t\tconst callback = ref<ConfirmDialogCallback>();\n\n\t\tconst open = (incoming: ConfirmDialogData, cb: ConfirmDialogCallback) => {\n\t\t\tdata.value = incoming;\n\t\t\tcallback.value = cb;\n\t\t};\n\n\t\tconst close = (result: boolean) => {\n\t\t\tdata.value = undefined;\n\n\t\t\tif (callback.value) {\n\t\t\t\tcallback.value(!!result);\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", close);\n\t\t\teventbus.on(\"confirm-dialog\", open);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", close);\n\t\t\teventbus.off(\"confirm-dialog\", open);\n\t\t});\n\n\t\treturn {\n\t\t\tdata,\n\t\t\tclose,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ConfirmDialog.vue?vue&type=template&id=8ac89b86&ts=true\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ConfirmDialog.vue?vue&type=style&index=0&id=8ac89b86&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div\n\t\tv-if=\"isOpen\"\n\t\tid=\"mentions-popup-container\"\n\t\t@click=\"containerClick\"\n\t\t@contextmenu=\"containerClick\"\n\t>\n\t\t<div class=\"mentions-popup\">\n\t\t\t<div class=\"mentions-popup-title\">\n\t\t\t\tRecent mentions\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"resolvedMessages.length\"\n\t\t\t\t\tclass=\"btn dismiss-all-mentions\"\n\t\t\t\t\t@click=\"dismissAllMentions()\"\n\t\t\t\t>\n\t\t\t\t\tDismiss all\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<template v-if=\"resolvedMessages.length === 0\">\n\t\t\t\t<p v-if=\"isLoading\">Loading</p>\n\t\t\t\t<p v-else>You have no recent mentions.</p>\n\t\t\t</template>\n\t\t\t<template v-for=\"message in resolvedMessages\" v-else :key=\"message.msgId\">\n\t\t\t\t<div :class=\"['msg', message.type]\">\n\t\t\t\t\t<div class=\"mentions-info\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span class=\"from\">\n\t\t\t\t\t\t\t\t<Username :user=\"(message.from as any)\" />\n\t\t\t\t\t\t\t\t<template v-if=\"message.channel\">\n\t\t\t\t\t\t\t\t\tin {{ message.channel.channel.name }} on\n\t\t\t\t\t\t\t\t\t{{ message.channel.network.name }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else> in unknown channel </template> </span\n\t\t\t\t\t\t\t>{{ ` ` }}\n\t\t\t\t\t\t\t<span :title=\"message.localetime\" class=\"time\">\n\t\t\t\t\t\t\t\t{{ messageTime(message.time.toString()) }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"close-tooltip tooltipped tooltipped-w\"\n\t\t\t\t\t\t\t\taria-label=\"Dismiss this mention\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"msg-dismiss\"\n\t\t\t\t\t\t\t\t\taria-label=\"Dismiss this mention\"\n\t\t\t\t\t\t\t\t\t@click=\"dismissMention(message)\"\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"content\" dir=\"auto\">\n\t\t\t\t\t\t<ParsedMessage :message=\"(message as any)\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n#mentions-popup-container {\n\tz-index: 8;\n}\n\n.mentions-popup {\n\tbackground-color: var(--window-bg-color);\n\tposition: absolute;\n\twidth: 400px;\n\tright: 80px;\n\ttop: 55px;\n\tmax-height: 400px;\n\toverflow-y: auto;\n\tz-index: 2;\n\tpadding: 10px;\n}\n\n.mentions-popup > .mentions-popup-title {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-bottom: 10px;\n\tfont-size: 20px;\n}\n\n.mentions-popup .mentions-info {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.mentions-popup .msg {\n\tmargin-bottom: 15px;\n\tuser-select: text;\n}\n\n.mentions-popup .msg:last-child {\n\tmargin-bottom: 0;\n}\n\n.mentions-popup .msg .content {\n\tbackground-color: var(--highlight-bg-color);\n\tborder-radius: 5px;\n\tpadding: 6px;\n\tmargin-top: 2px;\n\tword-wrap: break-word;\n\tword-break: break-word; /* Webkit-specific */\n}\n\n.mentions-popup .msg-dismiss::before {\n\tfont-size: 20px;\n\tfont-weight: normal;\n\tdisplay: inline-block;\n\tline-height: 16px;\n\ttext-align: center;\n\tcontent: \"\";\n}\n\n.mentions-popup .msg-dismiss:hover {\n\tcolor: var(--link-color);\n}\n\n.mentions-popup .dismiss-all-mentions {\n\tmargin: 0;\n\tpadding: 4px 6px;\n}\n\n@media (min-height: 500px) {\n\t.mentions-popup {\n\t\tmax-height: 60vh;\n\t}\n}\n\n@media (max-width: 768px) {\n\t.mentions-popup {\n\t\tborder-radius: 0;\n\t\tborder: 0;\n\t\tbox-shadow: none;\n\t\twidth: 100%;\n\t\tmax-height: none;\n\t\tright: 0;\n\t\tleft: 0;\n\t\tbottom: 0;\n\t\ttop: 45px; /* header height */\n\t}\n}\n</style>\n\n<script lang=\"ts\">\nimport Username from \"./Username.vue\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport socket from \"../js/socket\";\nimport eventbus from \"../js/eventbus\";\nimport localetime from \"../js/helpers/localetime\";\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\nimport {computed, watch, defineComponent, ref, onMounted, onUnmounted} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientMention} from \"../js/types\";\n\ndayjs.extend(relativeTime);\n\nexport default defineComponent({\n\tname: \"Mentions\",\n\tcomponents: {\n\t\tUsername,\n\t\tParsedMessage,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst isOpen = ref(false);\n\t\tconst isLoading = ref(false);\n\t\tconst resolvedMessages = computed(() => {\n\t\t\tconst messages = store.state.mentions.slice().reverse();\n\n\t\t\tfor (const message of messages) {\n\t\t\t\tmessage.localetime = localetime(message.time);\n\t\t\t\tmessage.channel = store.getters.findChannel(message.chanId);\n\t\t\t}\n\n\t\t\treturn messages.filter((message) => !message.channel?.channel.muted);\n\t\t});\n\n\t\twatch(\n\t\t\t() => store.state.mentions,\n\t\t\t() => {\n\t\t\t\tisLoading.value = false;\n\t\t\t}\n\t\t);\n\n\t\tconst messageTime = (time: string) => {\n\t\t\treturn dayjs(time).fromNow();\n\t\t};\n\n\t\tconst dismissMention = (message: ClientMention) => {\n\t\t\tstore.state.mentions.splice(\n\t\t\t\tstore.state.mentions.findIndex((m) => m.msgId === message.msgId),\n\t\t\t\t1\n\t\t\t);\n\n\t\t\tsocket.emit(\"mentions:dismiss\", message.msgId);\n\t\t};\n\n\t\tconst dismissAllMentions = () => {\n\t\t\tstore.state.mentions = [];\n\t\t\tsocket.emit(\"mentions:dismiss_all\");\n\t\t};\n\n\t\tconst containerClick = (event: Event) => {\n\t\t\tif (event.currentTarget === event.target) {\n\t\t\t\tisOpen.value = false;\n\t\t\t}\n\t\t};\n\n\t\tconst togglePopup = () => {\n\t\t\tisOpen.value = !isOpen.value;\n\n\t\t\tif (isOpen.value) {\n\t\t\t\tisLoading.value = true;\n\t\t\t\tsocket.emit(\"mentions:get\");\n\t\t\t}\n\t\t};\n\n\t\tconst closePopup = () => {\n\t\t\tisOpen.value = false;\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"mentions:toggle\", togglePopup);\n\t\t\teventbus.on(\"escapekey\", closePopup);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"mentions:toggle\", togglePopup);\n\t\t\teventbus.off(\"escapekey\", closePopup);\n\t\t});\n\n\t\treturn {\n\t\t\tisOpen,\n\t\t\tisLoading,\n\t\t\tresolvedMessages,\n\t\t\tmessageTime,\n\t\t\tdismissMention,\n\t\t\tdismissAllMentions,\n\t\t\tcontainerClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Mentions.vue?vue&type=template&id=66358ddb&ts=true\"\nimport script from \"./Mentions.vue?vue&type=script&lang=ts\"\nexport * from \"./Mentions.vue?vue&type=script&lang=ts\"\n\nimport \"./Mentions.vue?vue&type=style&index=0&id=66358ddb&lang=css\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=6141956a&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage v-if=\"message.self\" :network=\"network\" :message=\"message\" />\n\t\t<template v-else>\n\t\t\t<Username :user=\"message.from\" />\n\t\t\tis away\n\t\t\t<i class=\"away-message\">(<ParsedMessage :network=\"network\" :message=\"message\" />)</i>\n\t\t</template>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeAway\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./away.vue?vue&type=template&id=37f2356a&ts=true\"\nimport script from \"./away.vue?vue&type=script&lang=ts\"\nexport * from \"./away.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage v-if=\"message.self\" :network=\"network\" :message=\"message\" />\n\t\t<template v-else>\n\t\t\t<Username :user=\"message.from\" />\n\t\t\tis back\n\t\t</template>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeBack\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./back.vue?vue&type=template&id=0565b0a1&ts=true\"\nimport script from \"./back.vue?vue&type=script&lang=ts\"\nexport * from \"./back.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\thas changed\n\t\t<span v-if=\"message.new_ident\"\n\t\t\t>username to <b>{{ message.new_ident }}</b></span\n\t\t>\n\t\t<span v-if=\"message.new_host\"\n\t\t\t>hostname to\n\t\t\t<i class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"message.new_host\" /></i\n\t\t></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeChangeHost\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./chghost.vue?vue&type=template&id=043797b3&ts=true\"\nimport script from \"./chghost.vue?vue&type=script&lang=ts\"\nexport * from \"./chghost.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t{{ `&#32;` }}<span class=\"ctcp-message\"><ParsedMessage :text=\"message.ctcpMessage\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeCTCP\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./ctcp.vue?vue&type=template&id=ab415664&ts=true\"\nimport script from \"./ctcp.vue?vue&type=script&lang=ts\"\nexport * from \"./ctcp.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tsent a <abbr title=\"Client-to-client protocol\">CTCP</abbr> request:\n\t\t<span class=\"ctcp-message\"><ParsedMessage :text=\"message.ctcpMessage\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeRequestCTCP\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./ctcp_request.vue?vue&type=template&id=c34ff826&ts=true\"\nimport script from \"./ctcp_request.vue?vue&type=script&lang=ts\"\nexport * from \"./ctcp_request.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage :network=\"network\" :message=\"message\" :text=\"errorMessage\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageTypeError\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst errorMessage = computed(() => {\n\t\t\tswitch (props.message.error) {\n\t\t\t\tcase \"bad_channel_key\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Bad channel key.`;\n\t\t\t\tcase \"banned_from_channel\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - You have been banned from the channel.`;\n\t\t\t\tcase \"cannot_send_to_channel\":\n\t\t\t\t\treturn `Cannot send to channel ${props.message.channel}`;\n\t\t\t\tcase \"channel_is_full\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Channel is full.`;\n\t\t\t\tcase \"chanop_privs_needed\":\n\t\t\t\t\treturn \"Cannot perform action: You're not a channel operator.\";\n\t\t\t\tcase \"invite_only_channel\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Channel is invite only.`;\n\t\t\t\tcase \"no_such_nick\":\n\t\t\t\t\treturn `User ${props.message.nick} hasn't logged in or does not exist.`;\n\t\t\t\tcase \"not_on_channel\":\n\t\t\t\t\treturn \"Cannot perform action: You're not on the channel.\";\n\t\t\t\tcase \"password_mismatch\":\n\t\t\t\t\treturn \"Password mismatch.\";\n\t\t\t\tcase \"too_many_channels\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - You've already reached the maximum number of channels allowed.`;\n\t\t\t\tcase \"unknown_command\":\n\t\t\t\t\treturn `Unknown command: ${props.message.command}`;\n\t\t\t\tcase \"user_not_in_channel\":\n\t\t\t\t\treturn `User ${props.message.nick} is not on the channel.`;\n\t\t\t\tcase \"user_on_channel\":\n\t\t\t\t\treturn `User ${props.message.nick} is already on the channel.`;\n\t\t\t\tdefault:\n\t\t\t\t\tif (props.message.reason) {\n\t\t\t\t\t\treturn `${props.message.reason} (${props.message.error})`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn props.message.error;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\terrorMessage,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./error.vue?vue&type=template&id=169919be&ts=true\"\nimport script from \"./error.vue?vue&type=script&lang=ts\"\nexport * from \"./error.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tinvited\n\t\t<span v-if=\"message.invitedYou\">you</span>\n\t\t<Username v-else :user=\"message.target\" />\n\t\tto <ParsedMessage :network=\"network\" :text=\"message.channel\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeInvite\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./invite.vue?vue&type=template&id=fd8bd00a&ts=true\"\nimport script from \"./invite.vue?vue&type=script&lang=ts\"\nexport * from \"./invite.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\">&#32;(<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i>\n\t\t<template v-if=\"message.account\">\n\t\t\t<i class=\"account\">&#32;[{{ message.account }}]</i>\n\t\t</template>\n\t\t<template v-if=\"message.gecos\">\n\t\t\t<i class=\"realname\">&#32;({{ message.gecos }})</i>\n\t\t</template>\n\t\thas joined the channel\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeJoin\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./join.vue?vue&type=template&id=c3614ec6&ts=true\"\nimport script from \"./join.vue?vue&type=script&lang=ts\"\nexport * from \"./join.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\thas kicked\n\t\t<Username :user=\"message.target\" />\n\t\t<i v-if=\"message.text\" class=\"part-reason\"\n\t\t\t>&#32;(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeKick\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./kick.vue?vue&type=template&id=7faf3aa9&ts=true\"\nimport script from \"./kick.vue?vue&type=script&lang=ts\"\nexport * from \"./kick.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tsets mode\n\t\t<ParsedMessage :message=\"message\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeMode\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode.vue?vue&type=template&id=3559c152&ts=true\"\nimport script from \"./mode.vue?vue&type=script&lang=ts\"\nexport * from \"./mode.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tChannel mode is <b>{{ message.text }}</b>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageChannelMode\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode_channel.vue?vue&type=template&id=3108ddfa&ts=true\"\nimport script from \"./mode_channel.vue?vue&type=script&lang=ts\"\nexport * from \"./mode_channel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tYour user mode is <b>{{ message.raw_modes }}</b>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageChannelMode\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode_user.vue?vue&type=template&id=0ca28805&ts=true\"\nimport script from \"./mode_user.vue?vue&type=script&lang=ts\"\nexport * from \"./mode_user.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<span class=\"text\"><ParsedMessage :network=\"network\" :text=\"cleanText\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeMonospaceBlock\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst cleanText = computed(() => {\n\t\t\tlet lines = props.message.text.split(\"\\n\");\n\n\t\t\t// If all non-empty lines of the MOTD start with a hyphen (which is common\n\t\t\t// across MOTDs), remove all the leading hyphens.\n\t\t\tif (lines.every((line) => line === \"\" || line[0] === \"-\")) {\n\t\t\t\tlines = lines.map((line) => line.substring(2));\n\t\t\t}\n\n\t\t\t// Remove empty lines around the MOTD (but not within it)\n\t\t\treturn lines\n\t\t\t\t.map((line) => line.replace(/\\s*$/, \"\"))\n\t\t\t\t.join(\"\\n\")\n\t\t\t\t.replace(/^[\\r\\n]+|[\\r\\n]+$/g, \"\");\n\t\t});\n\n\t\treturn {\n\t\t\tcleanText,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./monospace_block.vue?vue&type=template&id=b335516c&ts=true\"\nimport script from \"./monospace_block.vue?vue&type=script&lang=ts\"\nexport * from \"./monospace_block.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tis now known as\n\t\t<Username :user=\"{nick: message.new_nick, mode: message.from.mode}\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeNick\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./nick.vue?vue&type=template&id=1bd5b554&ts=true\"\nimport script from \"./nick.vue?vue&type=script&lang=ts\"\nexport * from \"./nick.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\"> (<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i> has\n\t\tleft the channel\n\t\t<i v-if=\"message.text\" class=\"part-reason\"\n\t\t\t>(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypePart\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./part.vue?vue&type=template&id=5211b675&ts=true\"\nimport script from \"./part.vue?vue&type=script&lang=ts\"\nexport * from \"./part.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\"> (<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i> has\n\t\tquit\n\t\t<i v-if=\"message.text\" class=\"quit-reason\"\n\t\t\t>(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientMessage, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeQuit\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./quit.vue?vue&type=template&id=4ba7f0ef&ts=true\"\nimport script from \"./quit.vue?vue&type=script&lang=ts\"\nexport * from \"./quit.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">{{ message.text }}</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageTypeRaw\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./raw.vue?vue&type=template&id=5174cd16&ts=true\"\nimport script from \"./raw.vue?vue&type=script&lang=ts\"\nexport * from \"./raw.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<template v-if=\"message.from && message.from.nick\"\n\t\t\t><Username :user=\"message.from\" /> has changed the topic to:\n\t\t</template>\n\t\t<template v-else>The topic is: </template>\n\t\t<span v-if=\"message.text\" class=\"new-topic\"\n\t\t\t><ParsedMessage :network=\"network\" :message=\"message\"\n\t\t/></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientMessage, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeTopic\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./topic.vue?vue&type=template&id=fd1370ea&ts=true\"\nimport script from \"./topic.vue?vue&type=script&lang=ts\"\nexport * from \"./topic.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tTopic set by\n\t\t<Username :user=\"message.from\" />\n\t\ton {{ messageTimeLocale }}\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport localetime from \"../../js/helpers/localetime\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeTopicSetBy\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst messageTimeLocale = computed(() => localetime(props.message.when));\n\n\t\treturn {\n\t\t\tmessageTimeLocale,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./topic_set_by.vue?vue&type=template&id=1224346e&ts=true\"\nimport script from \"./topic_set_by.vue?vue&type=script&lang=ts\"\nexport * from \"./topic_set_by.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<p>\n\t\t\t<Username :user=\"{nick: message.whois.nick}\" />\n\t\t\t<span v-if=\"message.whois.whowas\"> is offline, last information:</span>\n\t\t</p>\n\n\t\t<dl class=\"whois\">\n\t\t\t<template v-if=\"message.whois.account\">\n\t\t\t\t<dt>Logged in as:</dt>\n\t\t\t\t<dd>{{ message.whois.account }}</dd>\n\t\t\t</template>\n\n\t\t\t<dt>Host mask:</dt>\n\t\t\t<dd class=\"hostmask\">\n\t\t\t\t<ParsedMessage\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:text=\"message.whois.ident + '@' + message.whois.hostname\"\n\t\t\t\t/>\n\t\t\t</dd>\n\n\t\t\t<template v-if=\"message.whois.actual_hostname\">\n\t\t\t\t<dt>Actual host:</dt>\n\t\t\t\t<dd class=\"hostmask\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t:href=\"'https://ipinfo.io/' + message.whois.actual_ip\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t>{{ message.whois.actual_ip }}</a\n\t\t\t\t\t>\n\t\t\t\t\t<i v-if=\"message.whois.actual_hostname != message.whois.actual_ip\">\n\t\t\t\t\t\t({{ message.whois.actual_hostname }})</i\n\t\t\t\t\t>\n\t\t\t\t</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.real_name\">\n\t\t\t\t<dt>Real name:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.real_name\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.registered_nick\">\n\t\t\t\t<dt>Registered nick:</dt>\n\t\t\t\t<dd>{{ message.whois.registered_nick }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.channels\">\n\t\t\t\t<dt>Channels:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.channels\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.modes\">\n\t\t\t\t<dt>Modes:</dt>\n\t\t\t\t<dd>{{ message.whois.modes }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.special\">\n\t\t\t\t<template v-for=\"special in message.whois.special\" :key=\"special\">\n\t\t\t\t\t<dt>Special:</dt>\n\t\t\t\t\t<dd>{{ special }}</dd>\n\t\t\t\t</template>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.operator\">\n\t\t\t\t<dt>Operator:</dt>\n\t\t\t\t<dd>{{ message.whois.operator }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.helpop\">\n\t\t\t\t<dt>Available for help:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.bot\">\n\t\t\t\t<dt>Is a bot:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.away\">\n\t\t\t\t<dt>Away:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.away\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.secure\">\n\t\t\t\t<dt>Secure connection:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.certfp\">\n\t\t\t\t<dt>Certificate:</dt>\n\t\t\t\t<dd>{{ message.whois.certfp }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.server\">\n\t\t\t\t<dt>Connected to:</dt>\n\t\t\t\t<dd>\n\t\t\t\t\t{{ message.whois.server }} <i>({{ message.whois.server_info }})</i>\n\t\t\t\t</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.logonTime\">\n\t\t\t\t<dt>Connected at:</dt>\n\t\t\t\t<dd>{{ localetime(message.whois.logonTime) }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.idle\">\n\t\t\t\t<dt>Idle since:</dt>\n\t\t\t\t<dd>{{ localetime(message.whois.idleTime) }}</dd>\n\t\t\t</template>\n\t\t</dl>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeWhois\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime: (date: Date) => localetime(date),\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./whois.vue?vue&type=template&id=2a3c4c38&ts=true\"\nimport script from \"./whois.vue?vue&type=script&lang=ts\"\nexport * from \"./whois.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Styling control codes\nconst BOLD = \"\\x02\";\nconst COLOR = \"\\x03\";\nconst HEX_COLOR = \"\\x04\";\nconst RESET = \"\\x0f\";\nconst REVERSE = \"\\x16\";\nconst ITALIC = \"\\x1d\";\nconst UNDERLINE = \"\\x1f\";\nconst STRIKETHROUGH = \"\\x1e\";\nconst MONOSPACE = \"\\x11\";\n\nexport type ParsedStyle = {\n\tbold?: boolean;\n\ttextColor?: string;\n\tbgColor?: string;\n\thexColor?: string;\n\thexBgColor?: string;\n\titalic?: boolean;\n\tunderline?: boolean;\n\tstrikethrough?: boolean;\n\tmonospace?: boolean;\n\ttext: string;\n\tstart: number;\n\tend: number;\n};\n\n// Color code matcher, with format `XX,YY` where both `XX` and `YY` are\n// integers, `XX` is the text color and `YY` is an optional background color.\nconst colorRx = /^(\\d{1,2})(?:,(\\d{1,2}))?/;\n\n// 6-char Hex color code matcher\nconst hexColorRx = /^([0-9a-f]{6})(?:,([0-9a-f]{6}))?/i;\n\n// Represents all other control codes that to be ignored/filtered from the text\n// This regex allows line feed character\nconst controlCodesRx = /[\\u0000-\\u0009\\u000B-\\u001F]/g;\n\n// Converts a given text into an array of objects, each of them representing a\n// similarly styled section of the text. Each object carries the `text`, style\n// information (`bold`, `textColor`, `bgcolor`, `italic`,\n// `underline`, `strikethrough`, `monospace`), and `start`/`end` cursors.\nfunction parseStyle(text: string) {\n\tconst result: ParsedStyle[] = [];\n\tlet start = 0;\n\tlet position = 0;\n\n\t// At any given time, these carry style information since last time a styling\n\t// control code was met.\n\tlet colorCodes,\n\t\tbold,\n\t\ttextColor,\n\t\tbgColor,\n\t\thexColor,\n\t\thexBgColor,\n\t\titalic,\n\t\tunderline,\n\t\tstrikethrough,\n\t\tmonospace;\n\n\tconst resetStyle = () => {\n\t\tbold = false;\n\t\ttextColor = undefined;\n\t\tbgColor = undefined;\n\t\thexColor = undefined;\n\t\thexBgColor = undefined;\n\t\titalic = false;\n\t\tunderline = false;\n\t\tstrikethrough = false;\n\t\tmonospace = false;\n\t};\n\n\tresetStyle();\n\n\t// When called, this \"closes\" the current fragment by adding an entry to the\n\t// `result` array using the styling information set last time a control code\n\t// was met.\n\tconst emitFragment = () => {\n\t\t// Uses the text fragment starting from the last control code position up to\n\t\t// the current position\n\t\tconst textPart = text.slice(start, position);\n\n\t\t// Filters out all non-style related control codes present in this text\n\t\tconst processedText = textPart.replace(controlCodesRx, \" \");\n\n\t\tif (processedText.length) {\n\t\t\t// Current fragment starts where the previous one ends, or at 0 if none\n\t\t\tconst fragmentStart = result.length ? result[result.length - 1].end : 0;\n\n\t\t\tresult.push({\n\t\t\t\tbold,\n\t\t\t\ttextColor,\n\t\t\t\tbgColor,\n\t\t\t\thexColor,\n\t\t\t\thexBgColor,\n\t\t\t\titalic,\n\t\t\t\tunderline,\n\t\t\t\tstrikethrough,\n\t\t\t\tmonospace,\n\t\t\t\ttext: processedText,\n\t\t\t\tstart: fragmentStart,\n\t\t\t\tend: fragmentStart + processedText.length,\n\t\t\t});\n\t\t}\n\n\t\t// Now that a fragment has been \"closed\", the next one will start after that\n\t\tstart = position + 1;\n\t};\n\n\t// This loop goes through each character of the given text one by one by\n\t// bumping the `position` cursor. Every time a new special \"styling\" character\n\t// is met, an object gets created (with `emitFragment()`)information on text\n\t// encountered since the previous styling character.\n\twhile (position < text.length) {\n\t\tswitch (text[position]) {\n\t\t\tcase RESET:\n\t\t\t\temitFragment();\n\t\t\t\tresetStyle();\n\t\t\t\tbreak;\n\n\t\t\t// Meeting a BOLD character means that the ongoing text is either going to\n\t\t\t// be in bold or that the previous one was in bold and the following one\n\t\t\t// must be reset.\n\t\t\t// This same behavior applies to COLOR, REVERSE, ITALIC, and UNDERLINE.\n\t\t\tcase BOLD:\n\t\t\t\temitFragment();\n\t\t\t\tbold = !bold;\n\t\t\t\tbreak;\n\n\t\t\tcase COLOR:\n\t\t\t\temitFragment();\n\n\t\t\t\t// Go one step further to find the corresponding color\n\t\t\t\tcolorCodes = text.slice(position + 1).match(colorRx);\n\n\t\t\t\tif (colorCodes) {\n\t\t\t\t\ttextColor = Number(colorCodes[1]);\n\n\t\t\t\t\tif (colorCodes[2]) {\n\t\t\t\t\t\tbgColor = Number(colorCodes[2]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Color code length is > 1, so bump the current position cursor by as\n\t\t\t\t\t// much (and reset the start cursor for the current text block as well)\n\t\t\t\t\tposition += colorCodes[0].length;\n\t\t\t\t\tstart = position + 1;\n\t\t\t\t} else {\n\t\t\t\t\t// If no color codes were found, toggles back to no colors (like BOLD).\n\t\t\t\t\ttextColor = undefined;\n\t\t\t\t\tbgColor = undefined;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase HEX_COLOR:\n\t\t\t\temitFragment();\n\n\t\t\t\tcolorCodes = text.slice(position + 1).match(hexColorRx);\n\n\t\t\t\tif (colorCodes) {\n\t\t\t\t\thexColor = colorCodes[1].toUpperCase();\n\n\t\t\t\t\tif (colorCodes[2]) {\n\t\t\t\t\t\thexBgColor = colorCodes[2].toUpperCase();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Color code length is > 1, so bump the current position cursor by as\n\t\t\t\t\t// much (and reset the start cursor for the current text block as well)\n\t\t\t\t\tposition += colorCodes[0].length;\n\t\t\t\t\tstart = position + 1;\n\t\t\t\t} else {\n\t\t\t\t\t// If no color codes were found, toggles back to no colors (like BOLD).\n\t\t\t\t\thexColor = undefined;\n\t\t\t\t\thexBgColor = undefined;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase REVERSE: {\n\t\t\t\temitFragment();\n\t\t\t\tconst tmp = bgColor;\n\t\t\t\tbgColor = textColor;\n\t\t\t\ttextColor = tmp;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase ITALIC:\n\t\t\t\temitFragment();\n\t\t\t\titalic = !italic;\n\t\t\t\tbreak;\n\n\t\t\tcase UNDERLINE:\n\t\t\t\temitFragment();\n\t\t\t\tunderline = !underline;\n\t\t\t\tbreak;\n\n\t\t\tcase STRIKETHROUGH:\n\t\t\t\temitFragment();\n\t\t\t\tstrikethrough = !strikethrough;\n\t\t\t\tbreak;\n\n\t\t\tcase MONOSPACE:\n\t\t\t\temitFragment();\n\t\t\t\tmonospace = !monospace;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Evaluate the next character at the next iteration\n\t\tposition += 1;\n\t}\n\n\t// The entire text has been parsed, so we finalize the current text fragment.\n\temitFragment();\n\n\treturn result;\n}\n\nconst properties = [\n\t\"bold\",\n\t\"textColor\",\n\t\"bgColor\",\n\t\"hexColor\",\n\t\"hexBgColor\",\n\t\"italic\",\n\t\"underline\",\n\t\"strikethrough\",\n\t\"monospace\",\n];\n\nfunction prepare(text: string) {\n\treturn (\n\t\tparseStyle(text)\n\t\t\t// This optimizes fragments by combining them together when all their values\n\t\t\t// for the properties defined above are equal.\n\t\t\t.reduce((prev: ParsedStyle[], curr) => {\n\t\t\t\tif (prev.length) {\n\t\t\t\t\tconst lastEntry = prev[prev.length - 1];\n\n\t\t\t\t\tif (properties.every((key) => curr[key] === lastEntry[key])) {\n\t\t\t\t\t\tlastEntry.text += curr.text;\n\t\t\t\t\t\tlastEntry.end += curr.text.length;\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn prev.concat([curr]);\n\t\t\t}, [])\n\t);\n}\n\nexport default prepare;\n","// Escapes the RegExp special characters \"^\", \"$\", \"\", \".\", \"*\", \"+\", \"?\", \"(\",\n// \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in string.\n// See https://lodash.com/docs/#escapeRegExp\nimport escapeRegExp from \"lodash/escapeRegExp\";\nimport {Part} from \"./merge\";\n\nexport type ChannelPart = Part & {\n\tchannel: string;\n};\n\n// escapes a regex in a way that's compatible to shove it in\n// a regex char set (meaning it also escapes -)\nfunction escapeRegExpCharSet(raw: string): string {\n\tconst escaped: string = escapeRegExp(raw);\n\treturn escaped.replace(\"-\", \"\\\\-\");\n}\n\n// Given an array of channel prefixes (such as \"#\" and \"&\") and an array of user\n// modes (such as \"@\" and \"+\"), this function extracts channels and nicks from a\n// text.\n// It returns an array of objects for each channel found with their start index,\n// end index and channel name.\nfunction findChannels(text: string, channelPrefixes: string[], userModes: string[]) {\n\t// `userModePattern` is necessary to ignore user modes in /whois responses.\n\t// For example, a voiced user in #thelounge will have a /whois response of:\n\t// > foo is on the following channels: +#thelounge\n\t// We need to explicitly ignore user modes to parse such channels correctly.\n\tconst userModePattern = userModes.map(escapeRegExpCharSet).join(\"\");\n\tconst channelPrefixPattern = channelPrefixes.map(escapeRegExpCharSet).join(\"\");\n\tconst channelPattern = `(?:^|\\\\s)[${userModePattern}]*([${channelPrefixPattern}][^ \\u0007]+)`;\n\tconst channelRegExp = new RegExp(channelPattern, \"g\");\n\n\tconst result: ChannelPart[] = [];\n\tlet match: RegExpExecArray | null;\n\n\tdo {\n\t\t// With global (\"g\") regexes, calling `exec` multiple times will find\n\t\t// successive matches in the same string.\n\t\tmatch = channelRegExp.exec(text);\n\n\t\tif (match) {\n\t\t\tresult.push({\n\t\t\t\tstart: match.index + match[0].length - match[1].length,\n\t\t\t\tend: match.index + match[0].length,\n\t\t\t\tchannel: match[1],\n\t\t\t});\n\t\t}\n\t} while (match);\n\n\treturn result;\n}\n\nexport default findChannels;\n","import LinkifyIt, {Match} from \"linkify-it\";\nimport tlds from \"tlds\";\n\nexport type LinkPart = {\n\tstart: number;\n\tend: number;\n\tlink: string;\n};\n\nconst linkify = LinkifyIt().tlds(tlds).tlds(\"onion\", true);\n\n// Known schemes to detect in text\nconst commonSchemes = [\n\t\"sftp\",\n\t\"smb\",\n\t\"file\",\n\t\"irc\",\n\t\"ircs\",\n\t\"svn\",\n\t\"git\",\n\t\"steam\",\n\t\"mumble\",\n\t\"ts3server\",\n\t\"svn+ssh\",\n\t\"ssh\",\n\t\"gopher\",\n\t\"gemini\",\n];\n\nfor (const schema of commonSchemes) {\n\tlinkify.add(schema + \":\", \"http:\");\n}\n\nlinkify.add(\"web+\", {\n\tvalidate(text: string, pos: number, self: LinkifyIt.LinkifyIt) {\n\t\tconst webSchemaRe = /^[a-z]+:/gi;\n\n\t\tif (!webSchemaRe.test(text.slice(pos))) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst linkEnd = self.testSchemaAt(text, \"http:\", pos + webSchemaRe.lastIndex);\n\n\t\tif (linkEnd === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn webSchemaRe.lastIndex + linkEnd;\n\t},\n\tnormalize(match) {\n\t\tmatch.schema = match.text.slice(0, match.text.indexOf(\":\") + 1);\n\t},\n});\n\n// we must rewrite protocol less urls to http, else if TL is hosted\n// on https, this would incorrectly use https for the remote link.\n// See https://github.com/thelounge/thelounge/issues/2525\n//\n// We take the validation logic from linkify and just add our own\n// normalizer.\nlinkify.add(\"//\", {\n\tvalidate: (linkify as any).__schemas__[\"//\"].validate,\n\tnormalize(match) {\n\t\tmatch.schema = \"\"; // this counts as not having a schema\n\t\tmatch.url = \"http:\" + match.url;\n\t},\n});\n\nexport function findLinks(text: string) {\n\tconst matches = linkify.match(text);\n\n\tif (!matches) {\n\t\treturn [];\n\t}\n\n\treturn matches.map(makeLinkPart);\n}\n\nexport function findLinksWithSchema(text: string) {\n\tconst matches = linkify.match(text);\n\n\tif (!matches) {\n\t\treturn [];\n\t}\n\n\treturn matches.filter((url) => !!url.schema).map(makeLinkPart);\n}\n\nfunction makeLinkPart(url: Match): LinkPart {\n\treturn {\n\t\tstart: url.index,\n\t\tend: url.lastIndex,\n\t\tlink: url.url,\n\t};\n}\n","import emojiRegExp from \"emoji-regex\";\nimport {Part} from \"./merge\";\n\nconst regExp = emojiRegExp();\n\nexport type EmojiPart = Part & {\n\temoji: string;\n};\n\nfunction findEmoji(text: string) {\n\tconst result: EmojiPart[] = [];\n\tlet match: RegExpExecArray | null;\n\n\twhile ((match = regExp.exec(text))) {\n\t\tresult.push({\n\t\t\tstart: match.index,\n\t\t\tend: match.index + match[0].length,\n\t\t\temoji: match[0],\n\t\t});\n\t}\n\n\treturn result;\n}\n\nexport default findEmoji;\n","import {Part} from \"./merge\";\n\nconst nickRegExp = /([\\w[\\]\\\\`^{|}-]+)/g;\n\nexport type NamePart = Part & {\n\tnick: string;\n};\n\nfunction findNames(text: string, nicks: string[]): NamePart[] {\n\tconst result: NamePart[] = [];\n\n\t// Return early if we don't have any nicknames to find\n\tif (nicks.length === 0) {\n\t\treturn result;\n\t}\n\n\tlet match: RegExpExecArray | null;\n\n\twhile ((match = nickRegExp.exec(text))) {\n\t\tif (nicks.indexOf(match[1]) > -1) {\n\t\t\tresult.push({\n\t\t\t\tstart: match.index,\n\t\t\t\tend: match.index + match[1].length,\n\t\t\t\tnick: match[1],\n\t\t\t});\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport default findNames;\n","// Return true if any section of \"a\" or \"b\" parts (defined by their start/end\n\nimport {Part} from \"./merge\";\n\n// markers) intersect each other, false otherwise.\nfunction anyIntersection(a: Part, b: Part) {\n\treturn (\n\t\t(a.start <= b.start && b.start < a.end) ||\n\t\t(a.start < b.end && b.end <= a.end) ||\n\t\t(b.start <= a.start && a.start < b.end) ||\n\t\t(b.start < a.end && a.end <= b.end)\n\t);\n}\n\nexport default anyIntersection;\n","import anyIntersection from \"./anyIntersection\";\nimport fill from \"./fill\";\nimport {ChannelPart} from \"./findChannels\";\nimport {EmojiPart} from \"./findEmoji\";\nimport {LinkPart} from \"../../../../shared/linkify\";\nimport {NamePart} from \"./findNames\";\n\nexport type Part = {\n\tstart: number;\n\tend: number;\n};\n\ntype TextPart = Part & {\n\ttext: string;\n};\n\ntype Fragment = {\n\tstart: number;\n\tend: number;\n\ttext: string;\n};\n\ntype PartWithFragments = Part & {\n\tfragments: Fragment[];\n};\n\n// Merge text part information within a styling fragment\nfunction assign(textPart: Part, fragment: Fragment) {\n\tconst fragStart = fragment.start;\n\tconst start = Math.max(fragment.start, textPart.start);\n\tconst end = Math.min(fragment.end, textPart.end);\n\tconst text = fragment.text.slice(start - fragStart, end - fragStart);\n\n\treturn Object.assign({}, fragment, {start, end, text});\n}\n\nfunction sortParts(a: Part, b: Part) {\n\treturn a.start - b.start || b.end - a.end;\n}\n\nexport type MergedParts = (TextPart | NamePart | EmojiPart | ChannelPart | LinkPart)[];\n\n// Merge the style fragments within the text parts, taking into account\n// boundaries and text sections that have not matched to links or channels.\n// For example, given a string \"foobar\" where \"foo\" and \"bar\" have been\n// identified as parts (channels, links, etc.) and \"fo\", \"ob\" and \"ar\" have 3\n// different styles, the first resulting part will contain fragments \"fo\" and\n// \"o\", and the second resulting part will contain \"b\" and \"ar\". \"o\" and \"b\"\n// fragments will contain duplicate styling attributes.\nfunction merge(\n\tparts: MergedParts,\n\tstyleFragments: Fragment[],\n\tcleanText: string\n): PartWithFragments[] {\n\t// Remove overlapping parts\n\tparts = parts.sort(sortParts).reduce<MergedParts>((prev, curr) => {\n\t\tconst intersection = prev.some((p) => anyIntersection(p, curr));\n\n\t\tif (intersection) {\n\t\t\treturn prev;\n\t\t}\n\n\t\treturn prev.concat([curr]);\n\t}, []);\n\n\t// Every section of the original text that has not been captured in a \"part\"\n\t// is filled with \"text\" parts, dummy objects with start/end but no extra\n\t// metadata.\n\n\tconst filled = fill(parts, cleanText) as TextPart[];\n\tconst allParts: MergedParts = [...parts, ...filled].sort(sortParts); // Sort all parts identified based on their position in the original text\n\n\t// Distribute the style fragments within the text parts\n\treturn allParts.map((part: any) => {\n\t\tpart.fragments = styleFragments\n\t\t\t.filter((fragment) => anyIntersection(part, fragment))\n\t\t\t.map((fragment) => assign(part, fragment));\n\n\t\treturn part as PartWithFragments;\n\t});\n}\n\nexport default merge;\n","<template>\n\t<button\n\t\tv-if=\"link.type !== 'loading'\"\n\t\t:class=\"['toggle-button', 'toggle-preview', {opened: link.shown}]\"\n\t\t:aria-label=\"ariaLabel\"\n\t\t@click=\"onClick\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientMessage, ClientLinkPreview} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"LinkPreviewToggle\",\n\tprops: {\n\t\tlink: {type: Object as PropType<ClientLinkPreview>, required: true},\n\t\tmessage: {type: Object as PropType<ClientMessage>, required: true},\n\t},\n\temits: [\"toggle-link-preview\"],\n\tsetup(props, {emit}) {\n\t\tconst ariaLabel = computed(() => {\n\t\t\treturn props.link.shown ? \"Collapse preview\" : \"Expand preview\";\n\t\t});\n\n\t\tconst onClick = () => {\n\t\t\tprops.link.shown = !props.link.shown;\n\t\t\temit(\"toggle-link-preview\", props.link, props.message);\n\t\t};\n\n\t\treturn {\n\t\t\tariaLabel,\n\t\t\tonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreviewToggle.vue?vue&type=template&id=1ba6c5b8&ts=true\"\nimport script from \"./LinkPreviewToggle.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreviewToggle.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"preview-size\">({{ previewSize }})</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport friendlysize from \"../js/helpers/friendlysize\";\n\nexport default defineComponent({\n\tname: \"LinkPreviewFileSize\",\n\tprops: {\n\t\tsize: {type: Number, required: true},\n\t},\n\tsetup(props) {\n\t\tconst previewSize = friendlysize(props.size);\n\n\t\treturn {\n\t\t\tpreviewSize,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreviewFileSize.vue?vue&type=template&id=19e7dc56&ts=true\"\nimport script from \"./LinkPreviewFileSize.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreviewFileSize.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span\n\t\tclass=\"inline-channel\"\n\t\tdir=\"auto\"\n\t\trole=\"button\"\n\t\ttabindex=\"0\"\n\t\t@click.prevent=\"openContextMenu\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t\t><slot></slot\n\t></span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport eventbus from \"../js/eventbus\";\n\nexport default defineComponent({\n\tname: \"InlineChannel\",\n\tprops: {\n\t\tchannel: String,\n\t},\n\tsetup(props) {\n\t\tconst openContextMenu = (event) => {\n\t\t\teventbus.emit(\"contextmenu:inline-channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\topenContextMenu,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./InlineChannel.vue?vue&type=template&id=e318f974&ts=true\"\nimport script from \"./InlineChannel.vue?vue&type=script&lang=ts\"\nexport * from \"./InlineChannel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// TODO: type\n// @ts-nocheck\n\nimport {h as createElement, VNode} from \"vue\";\nimport parseStyle from \"./ircmessageparser/parseStyle\";\nimport findChannels from \"./ircmessageparser/findChannels\";\nimport {findLinks} from \"../../../shared/linkify\";\nimport findEmoji from \"./ircmessageparser/findEmoji\";\nimport findNames from \"./ircmessageparser/findNames\";\nimport merge, {MergedParts} from \"./ircmessageparser/merge\";\nimport emojiMap from \"./fullnamemap.json\";\nimport LinkPreviewToggle from \"../../components/LinkPreviewToggle.vue\";\nimport LinkPreviewFileSize from \"../../components/LinkPreviewFileSize.vue\";\nimport InlineChannel from \"../../components/InlineChannel.vue\";\nimport Username from \"../../components/Username.vue\";\nimport {ClientMessage, ClientNetwork} from \"../types\";\n\nconst emojiModifiersRegex = /[\\u{1f3fb}-\\u{1f3ff}]|\\u{fe0f}/gu;\n\ntype Fragment = {\n\tclass?: string[];\n\ttext?: string;\n};\n\ntype StyledFragment = Fragment & {\n\ttextColor?: string;\n\tbgColor?: string;\n\thexColor?: string;\n\thexBgColor?: string;\n\n\tbold?: boolean;\n\titalic?: boolean;\n\tunderline?: boolean;\n\tmonospace?: boolean;\n\tstrikethrough?: boolean;\n};\n\n// Create an HTML `span` with styling information for a given fragment\nfunction createFragment(fragment: StyledFragment): VNode | string | undefined {\n\tconst classes: string[] = [];\n\n\tif (fragment.bold) {\n\t\tclasses.push(\"irc-bold\");\n\t}\n\n\tif (fragment.textColor !== undefined) {\n\t\tclasses.push(\"irc-fg\" + fragment.textColor);\n\t}\n\n\tif (fragment.bgColor !== undefined) {\n\t\tclasses.push(\"irc-bg\" + fragment.bgColor);\n\t}\n\n\tif (fragment.italic) {\n\t\tclasses.push(\"irc-italic\");\n\t}\n\n\tif (fragment.underline) {\n\t\tclasses.push(\"irc-underline\");\n\t}\n\n\tif (fragment.strikethrough) {\n\t\tclasses.push(\"irc-strikethrough\");\n\t}\n\n\tif (fragment.monospace) {\n\t\tclasses.push(\"irc-monospace\");\n\t}\n\n\tconst data: {\n\t\tclass?: string[];\n\t\tstyle?: Record<string, string>;\n\t} = {\n\t\tclass: undefined,\n\t\tstyle: undefined,\n\t};\n\n\tlet hasData = false;\n\n\tif (classes.length > 0) {\n\t\thasData = true;\n\t\tdata.class = classes;\n\t}\n\n\tif (fragment.hexColor) {\n\t\thasData = true;\n\t\tdata.style = {\n\t\t\tcolor: `#${fragment.hexColor}`,\n\t\t};\n\n\t\tif (fragment.hexBgColor) {\n\t\t\tdata.style[\"background-color\"] = `#${fragment.hexBgColor}`;\n\t\t}\n\t}\n\n\treturn hasData ? createElement(\"span\", data, fragment.text) : fragment.text;\n}\n\n// Transform an IRC message potentially filled with styling control codes, URLs,\n// nicknames, and channels into a string of HTML elements to display on the client.\nfunction parse(text: string, message?: ClientMessage, network?: ClientNetwork) {\n\t// Extract the styling information and get the plain text version from it\n\tconst styleFragments = parseStyle(text);\n\tconst cleanText = styleFragments.map((fragment) => fragment.text).join(\"\");\n\n\t// On the plain text, find channels and URLs, returned as \"parts\". Parts are\n\t// arrays of objects containing start and end markers, as well as metadata\n\t// depending on what was found (channel or link).\n\tconst channelPrefixes = network ? network.serverOptions.CHANTYPES : [\"#\", \"&\"];\n\tconst userModes = network\n\t\t? network.serverOptions.PREFIX?.prefix?.map((pref) => pref.symbol)\n\t\t: [\"!\", \"@\", \"%\", \"+\"];\n\tconst channelParts = findChannels(cleanText, channelPrefixes, userModes);\n\tconst linkParts = findLinks(cleanText);\n\tconst emojiParts = findEmoji(cleanText);\n\tconst nameParts = findNames(cleanText, message ? message.users || [] : []);\n\n\tconst parts = (channelParts as MergedParts)\n\t\t.concat(linkParts)\n\t\t.concat(emojiParts)\n\t\t.concat(nameParts);\n\n\t// Merge the styling information with the channels / URLs / nicks / text objects and\n\t// generate HTML strings with the resulting fragments\n\treturn merge(parts, styleFragments, cleanText).map((textPart) => {\n\t\tconst fragments = textPart.fragments.map((fragment) => createFragment(fragment));\n\n\t\t// Wrap these potentially styled fragments with links and channel buttons\n\t\tif (textPart.link) {\n\t\t\tconst preview =\n\t\t\t\tmessage &&\n\t\t\t\tmessage.previews &&\n\t\t\t\tmessage.previews.find((p) => p.link === textPart.link);\n\t\t\tconst link = createElement(\n\t\t\t\t\"a\",\n\t\t\t\t{\n\t\t\t\t\thref: textPart.link,\n\t\t\t\t\tdir: preview ? null : \"auto\",\n\t\t\t\t\ttarget: \"_blank\",\n\t\t\t\t\trel: \"noopener\",\n\t\t\t\t},\n\t\t\t\tfragments\n\t\t\t);\n\n\t\t\tif (!preview) {\n\t\t\t\treturn link;\n\t\t\t}\n\n\t\t\tconst linkEls = [link];\n\n\t\t\tif (preview.size > 0) {\n\t\t\t\tlinkEls.push(\n\t\t\t\t\tcreateElement(LinkPreviewFileSize, {\n\t\t\t\t\t\tsize: preview.size,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlinkEls.push(\n\t\t\t\tcreateElement(LinkPreviewToggle, {\n\t\t\t\t\tlink: preview,\n\t\t\t\t\tmessage: message,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\t// We wrap the link, size, and the toggle button into <span dir=\"auto\">\n\t\t\t// to correctly keep the left-to-right order of these elements\n\t\t\treturn createElement(\n\t\t\t\t\"span\",\n\t\t\t\t{\n\t\t\t\t\tdir: \"auto\",\n\t\t\t\t},\n\t\t\t\tlinkEls\n\t\t\t);\n\t\t} else if (textPart.channel) {\n\t\t\treturn createElement(\n\t\t\t\tInlineChannel,\n\t\t\t\t{\n\t\t\t\t\tchannel: textPart.channel,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: () => fragments,\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (textPart.emoji) {\n\t\t\tconst emojiWithoutModifiers = textPart.emoji.replace(emojiModifiersRegex, \"\");\n\t\t\tconst title = emojiMap[emojiWithoutModifiers]\n\t\t\t\t? // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t  `Emoji: ${emojiMap[emojiWithoutModifiers]}`\n\t\t\t\t: null;\n\n\t\t\treturn createElement(\n\t\t\t\t\"span\",\n\t\t\t\t{\n\t\t\t\t\tclass: [\"emoji\"],\n\t\t\t\t\trole: \"img\",\n\t\t\t\t\t\"aria-label\": title,\n\t\t\t\t\ttitle: title,\n\t\t\t\t},\n\t\t\t\tfragments\n\t\t\t);\n\t\t} else if (textPart.nick) {\n\t\t\treturn createElement(\n\t\t\t\tUsername,\n\t\t\t\t{\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tnick: textPart.nick,\n\t\t\t\t\t},\n\t\t\t\t\tdir: \"auto\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: () => fragments,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn fragments;\n\t});\n}\n\nexport default parse;\n","// Create plain text entries corresponding to areas of the text that match no\n// existing entries. Returns an empty array if all parts of the text have been\n\nimport {Part} from \"./merge\";\n\n// parsed into recognizable entries already.\nfunction fill(existingEntries: Part[], text: string) {\n\tlet position = 0;\n\n\t// Fill inner parts of the text. For example, if text is `foobarbaz` and both\n\t// `foo` and `baz` have matched into an entry, this will return a dummy entry\n\t// corresponding to `bar`.\n\tconst result = existingEntries.reduce<Part[]>((acc, textSegment) => {\n\t\tif (textSegment.start > position) {\n\t\t\tacc.push({\n\t\t\t\tstart: position,\n\t\t\t\tend: textSegment.start,\n\t\t\t});\n\t\t}\n\n\t\tposition = textSegment.end;\n\t\treturn acc;\n\t}, []);\n\n\t// Complete the unmatched end of the text with a dummy entry\n\tif (position < text.length) {\n\t\tresult.push({\n\t\t\tstart: position,\n\t\t\tend: text.length,\n\t\t});\n\t}\n\n\treturn result;\n}\n\nexport default fill;\n","import script from \"./ParsedMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ParsedMessage.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script lang=\"ts\">\nimport {defineComponent, PropType, h} from \"vue\";\nimport parse from \"../js/helpers/parse\";\nimport type {ClientMessage, ClientNetwork} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"ParsedMessage\",\n\tfunctional: true,\n\tprops: {\n\t\ttext: String,\n\t\tmessage: {type: Object as PropType<ClientMessage | string>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: false},\n\t},\n\trender(context) {\n\t\treturn parse(\n\t\t\ttypeof context.text !== \"undefined\" ? context.text : context.message.text,\n\t\t\tcontext.message,\n\t\t\tcontext.network\n\t\t);\n\t},\n});\n</script>\n","<template>\n\t<span\n\t\t:class=\"['user', {[nickColor]: store.state.settings.coloredNicks}, {active: active}]\"\n\t\t:data-name=\"user.nick\"\n\t\trole=\"button\"\n\t\tv-on=\"onHover ? {mouseenter: hover} : {}\"\n\t\t@click.prevent=\"openContextMenu\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t\t><slot>{{ mode }}{{ user.nick }}</slot></span\n\t>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {UserInMessage} from \"../../server/models/msg\";\nimport eventbus from \"../js/eventbus\";\nimport colorClass from \"../js/helpers/colorClass\";\nimport type {ClientChan, ClientNetwork, ClientUser} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\ntype UsernameUser = Partial<UserInMessage> & {\n\tmode?: string;\n\tnick: string;\n};\n\nexport default defineComponent({\n\tname: \"Username\",\n\tprops: {\n\t\tuser: {\n\t\t\t// TODO: UserInMessage shouldn't be necessary here.\n\t\t\ttype: Object as PropType<UsernameUser | UserInMessage>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tonHover: {\n\t\t\ttype: Function as PropType<(user: UserInMessage) => void>,\n\t\t\trequired: false,\n\t\t},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: false},\n\t},\n\tsetup(props) {\n\t\tconst mode = computed(() => {\n\t\t\t// Message objects have a singular mode, but user objects have modes array\n\t\t\tif (props.user.modes) {\n\t\t\t\treturn props.user.modes[0];\n\t\t\t}\n\n\t\t\treturn props.user.mode;\n\t\t});\n\n\t\t// TODO: Nick must be ! because our user prop union includes UserInMessage\n\t\tconst nickColor = computed(() => colorClass(props.user.nick!));\n\n\t\tconst hover = () => {\n\t\t\tif (props.onHover) {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\t\treturn props.onHover(props.user as UserInMessage);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tconst openContextMenu = (event: Event) => {\n\t\t\teventbus.emit(\"contextmenu:user\", {\n\t\t\t\tevent: event,\n\t\t\t\tuser: props.user,\n\t\t\t\tnetwork: props.network,\n\t\t\t\tchannel: props.channel,\n\t\t\t});\n\t\t};\n\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tmode,\n\t\t\tnickColor,\n\t\t\thover,\n\t\t\topenContextMenu,\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","// Generates a string from \"color-1\" to \"color-32\" based on an input string\nexport default (str: string) => {\n\tlet hash = 0;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\thash += str.charCodeAt(i);\n\t}\n\n\t/*\n\t\tModulo 32 lets us be case insensitive for ascii\n\t\tdue to A being ascii 65 (100 0001)\n\t\t while a being ascii 97 (110 0001)\n\t*/\n\treturn \"color-\" + (1 + (hash % 32)).toString();\n};\n","import { render } from \"./Username.vue?vue&type=template&id=6d9d5328&ts=true\"\nimport script from \"./Username.vue?vue&type=script&lang=ts\"\nexport * from \"./Username.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/thelounge/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t744: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkthelounge\"] = self[\"webpackChunkthelounge\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [772], () => (__webpack_require__(43)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Auth","storage","location","input","store","messageIds","message","toggled","preview","previews","shown","push","document","body","classList","contains","length","socket","target","channel","commands","require","reduce","acc","path","command","substring","default","args","channels","chanTypes","network","serverOptions","CHANTYPES","channelList","split","c","includes","join","chan","text","switchToChannel","type","router","name","params","query","q","catch","console","error","colorCodeMap","timeFormats","msgDefault","msgWithSeconds","msg12h","msg12hWithSeconds","mobileViewportPixels","events","Map","on","handler","has","get","set","off","filter","item","emit","evt","slice","x1","y1","x2","y2","Math","hypot","sizes","size","i","floor","log","parseFloat","pow","toFixed","isCollapsed","highlight","event","tagName","value","time","dayjs","format","key","window","localStorage","setItem","getItem","remove","removeItem","clear","reload","class","role","_createElementVNode","src","alt","width","height","for","defineComponent","setup","isVisible","ref","onClick","_createElementBlock","_renderSlot","_ctx","components","RevealPassword","inFlight","errorShown","username","password","onAuthFailed","onMounted","onBeforeUnmount","onSubmit","preventDefault","values","user","method","action","_hoisted_2","_hoisted_3","_hoisted_4","$event","autocapitalize","autocorrect","autocomplete","required","autofocus","_hoisted_6","_createVNode","_component_RevealPassword","slotProps","disabled","_hoisted_9","useStore","commit","SidebarToggle","props","handleSubmit","Function","defaults","Boolean","config","state","serverConfiguration","previousUsername","displayPasswordField","publicPassword","watch","newValue","nextTick","focus","commandsInput","resizeCommandsInput","style","ceil","scrollHeight","tls","isSecureChecked","ports","newPort","port","usernameInput","setSaslAuth","sasl","onNickChanged","usernameRef","formData","FormData","data","forEach","_component_SidebarToggle","uuid","_Fragment","_toDisplayString","lockNetwork","public","_hoisted_39","_hoisted_41","maxlength","_hoisted_43","placeholder","_hoisted_5","_hoisted_7","host","_hoisted_11","min","max","_hoisted_13","_hoisted_16","hasSTSPolicy","rejectUnauthorized","_hoisted_24","_hoisted_26","proxyEnabled","_hoisted_31","proxyHost","_hoisted_33","proxyPort","_hoisted_35","proxyUsername","_hoisted_37","proxyPassword","_hoisted_45","_hoisted_47","nick","pattern","onInput","useHexIp","_hoisted_49","_hoisted_51","realname","_hoisted_53","leaveMessage","_hoisted_55","_hoisted_58","_hoisted_60","_hoisted_65","_hoisted_67","checked","onChange","_hoisted_79","saslAccount","_hoisted_81","saslPassword","_hoisted_87","NetworkForm","queryParams","assign","parsedParams","Array","isArray","prototype","hasOwnProperty","call","match","Number","String","parseOverrideParams","_createBlock","_component_NetworkForm","className","to","route","useRoute","_component_router_link","custom","navigate","isExactActive","active","onKeypress","SettingTabItem","_component_SettingTabItem","Navigation","dispatch","sync","_component_Navigation","_component_router_view","href","rel","_hoisted_30","_hoisted_34","_hoisted_38","_hoisted_42","_hoisted_56","_hoisted_66","checkNow","versionData","versionStatus","_hoisted_1","latest","version","prerelease","url","_hoisted_8","_hoisted_12","versionDataExpired","_hoisted_14","VersionChecker","isApple","navigator","platform","isTouch","maxTouchPoints","_component_VersionChecker","gitCommit","_hoisted_18","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_32","_hoisted_36","_hoisted_40","_hoisted_44","_hoisted_61","_hoisted_48","_hoisted_54","_hoisted_62","_hoisted_72","_hoisted_78","_hoisted_71","_hoisted_89","_hoisted_95","_hoisted_82","_hoisted_88","_hoisted_96","_hoisted_106","_hoisted_112","_hoisted_99","_hoisted_105","_hoisted_113","_hoisted_121","_hoisted_125","_hoisted_116","_hoisted_120","_hoisted_126","_hoisted_134","_hoisted_138","_hoisted_129","_hoisted_133","_hoisted_139","_hoisted_149","_hoisted_155","_hoisted_142","_hoisted_148","_hoisted_156","_hoisted_166","_hoisted_172","_hoisted_159","_hoisted_165","_hoisted_173","_hoisted_181","_hoisted_185","_hoisted_176","_hoisted_180","_hoisted_186","_hoisted_194","_hoisted_198","_hoisted_189","_hoisted_193","_hoisted_199","_hoisted_207","_hoisted_211","_hoisted_202","_hoisted_206","_hoisted_212","_hoisted_220","_hoisted_224","_hoisted_215","_hoisted_219","_hoisted_225","_hoisted_233","_hoisted_237","_hoisted_228","_hoisted_232","_hoisted_238","_hoisted_246","_hoisted_250","_hoisted_241","_hoisted_245","_hoisted_251","_hoisted_252","_hoisted_253","_hoisted_261","_hoisted_265","_hoisted_256","_hoisted_260","_hoisted_266","_hoisted_274","_hoisted_278","_hoisted_269","_hoisted_273","_hoisted_279","_hoisted_287","_hoisted_291","_hoisted_282","_hoisted_286","_hoisted_292","_hoisted_300","_hoisted_304","_hoisted_295","_hoisted_299","_hoisted_305","_hoisted_313","_hoisted_317","_hoisted_308","_hoisted_312","_hoisted_318","_hoisted_326","_hoisted_330","_hoisted_321","_hoisted_325","_hoisted_331","_hoisted_339","_hoisted_343","_hoisted_334","_hoisted_338","_hoisted_344","_hoisted_345","settings","searchEnabled","_hoisted_387","_hoisted_388","changelog","patchChangelog","querySelectorAll","link","setAttribute","querySelector","add","onUpdated","current","innerHTML","_hoisted_10","networkData","setNetworkData","getters","findNetwork","tabindex","dir","keepScrollPosition","showMoreButton","isContentShown","imageViewer","inject","imageViewerKey","onBeforeRouteUpdate","from","next","closeViewer","content","container","moreButtonLabel","computed","imageMaxSize","maxSize","friendlysize","handleResize","offsetWidth","onPreviewReady","sourceLoaded","onPreviewUpdate","updateShownState","defaultState","media","links","eventbus","onUnmounted","onThumbnailClick","onThumbnailError","thumb","onMoreClick","opened","decoding","onError","onAbort","onLoad","title","head","preload","controls","onCanplay","mediaType","_hoisted_17","_hoisted_21","_hoisted_23","requireViews","MessageTypes","ParsedMessage","LinkPreview","Username","isPreviousSource","focused","timeFormat","use12hClock","showSeconds","constants","messageTime","messageTimeLocale","localetime","messageComponent","isAction","self","_renderList","param","_resolveDynamicComponent","_component_Username","_component_ParsedMessage","_component_LinkPreview","showInActive","statusmsgGroup","searchOpened","searchInput","useRouter","searchInputField","onSearchPage","closeSearch","toggleSearch","blur","searchMessages","err","onBlur","onKeyup","onMousedown","calendar","localeDate","hoursPassed","Date","now","parse","toString","dayChange","friendlyDate","sameDay","lastDay","lastWeek","sameElse","Message","DateMarker","MessageSearchForm","chat","loadMoreButton","offset","moreResultsAvailable","oldScrollTop","oldChatHeight","messages","results","messageSearchResults","chanId","parseInt","findChannel","setActiveChannel","clearSearchState","doSearch","networkUuid","channelName","searchTerm","jumpToBottom","async","el","scrollTop","currentChatHeight","shouldDisplayDateMarker","previousMessage","getDay","onShowMoreClick","jump","_component_MessageSearchForm","messageSearchPendingQuery","isConnected","_component_DateMarker","_component_Message","condensedText","obj","condensedTypes","modeChangesCount","char","part","quit","strings","pop","onCollapseClick","closed","unreadMarkerShown","MessageCondensed","historyObserver","skipNextScrollEvent","isWaitingForNextTick","scrolledToBottom","lastMessage","historyLoading","lastId","condensed","statusMessages","onLoadButtonObserved","entries","entry","isIntersecting","IntersectionObserver","root","condensedMessages","lastCondensedContainer","firstUnread","heightOld","handleScroll","offsetHeight","addEventListener","passive","observe","unobserve","deep","pendingMessage","onBeforeUpdate","removeEventListener","disconnect","onCopy","InstallTrigger","selection","getSelection","anchorNode","focusNode","range","getRangeAt","documentFragment","cloneContents","div","createElement","appendChild","selectAllChildren","setTimeout","removeChild","removeAllRanges","addRange","clipboard","oldDate","newDate","getDate","getMonth","getFullYear","shouldDisplayUnreadMarker","currentMessage","onLinkPreviewToggle","msgId","moreHistoryAvailable","_component_MessageCondensed","onToggleLinkPreview","emojiSearchTerms","emojiMap","emojiStrategy","search","term","callback","fuzzyGrep","replace","template","string","original","index","nicksStrategy","completeNicks","val","replaceNick","chanStrategy","word","words","completeChans","commandStrategy","cmds","getCommands","foregroundColorStrategy","toLowerCase","fuzzy","pre","post","rendered","backgroundColorStrategy","pair","concat","position","test","array","isFuzzy","users","sort","a","b","u","me","otherUser","rawNicks","w","indexOf","formattingHotkeys","bracketWraps","_","uploadInput","autocompletionRef","setInputSize","getComputedStyle","lineHeight","blurInput","hide","tabCount","lastMatch","currentMatches","detail","Mousetrap","bind","selectionStart","newMatch","remainder","substr","selectionEnd","dispatchEvent","CustomEvent","strategies","editor","TextareaEditor","textcomplete","Textcomplete","dropdown","placement","destroy","autocompletion","inputTrap","modifier","wrapCursor","isAutoCompleting","onRow","undefined","totalRows","inputHistoryPosition","inputHistory","fileUpload","upload","onUploadInputChange","files","openFileUpload","click","getInputPlaceholder","splice","cmd","shift","setPendingMessage","enterkeyhint","multiple","modes","userSearchInput","activeUser","userlist","filteredUsers","fuzzyFilter","extract","groupedUsers","groups","result","mode","scrollToActiveUser","scrollIntoView","block","inline","setUserSearchInput","getModeClass","selectUser","rect","getBoundingClientRect","ev","MouseEvent","view","bubbles","cancelable","clientX","left","clientY","top","hoverUser","removeHoverUser","navigateUserList","direction","stopImmediatePropagation","abort","currentIndex","onMouseleave","onKeydown","date","localeTime","ban","hostmask","banned_by","banned_at","invite","invited_by","invited_at","num_users","topic","when","MessageList","ChatInput","ChatUserList","emits","messageList","topicInput","specialComponent","special","ListBans","ListInvites","ListChannels","ListIgnored","channelChanged","usersOutdated","editTopic","newTopic","hideUserVisibleError","saveTopic","openContextMenu","openMentions","lang","motd","empty","onDblclick","_component_ChatUserList","_component_MessageList","currentUserVisibleError","_component_ChatInput","Chat","activeChannel","chanInStore","unread","_component_Chat","onChannelChanged","prefetch","_hoisted_19","coloredNicks","nickPostfix","theme","themes","displayName","userStyles","installPromptEvent","canRegisterProtocol","hasInstallPromptEvent","registerProtocolHandler","nativeInstallPrompt","prompt","onForceSyncClick","registerProtocol","uri","origin","pathname","uploadCanvas","syncSettings","serverHasSettings","_hoisted_15","_hoisted_20","awayMessage","session","lastUse","signOut","token","agent","ip","Session","passwordChangeStatus","old_password","new_password","verify_password","currentSession","sessions","find","activeSessions","otherSessions","passwordErrors","missing_fields","password_mismatch","password_incorrect","update_failed","changePassword","response","success","ldapEnabled","_component_Session","_hoisted_22","isIOS","userAgent","playNotification","Audio","play","onPushButtonClick","webpush","pushNotificationState","desktopNotifications","desktopNotificationState","notification","notifyAllMessages","highlights","highlightExceptions","createRouter","history","createWebHashHistory","routes","component","SignIn","beforeEnter","Connect","Settings","children","GeneralSettings","AppearanceSettings","AccountSettings","NotificationSettings","Help","Changelog","NetworkEdit","RoutedChat","SearchResults","routeName","currentRoute","beforeEach","appLoaded","matched","afterEach","innerWidth","serviceWorker","channelTarget","io","transports","JSON","dataset","autoConnect","reconnection","defaultSettingConfig","apply","defaultConfig","auto","advanced","Notification","permission","requestPermission","getElementById","serverTheme","themeEl","themeUrl","HTMLLinkElement","hrefAttr","attributes","getNamedItem","newTheme","metaSelector","HTMLMetaElement","themeColor","element","newConfig","settingName","normalizeConfig","createState","loadFromLocalStorage","storedSettings","assignStoredSettings","defaultSettings","newSettings","appName","DesktopNotificationState","detectDesktopNotificationState","Granted","isSecureContext","Blocked","NoHttps","Unsupported","storePattern","networks","mentions","hasServiceWorker","sidebarOpen","sidebarDragging","userlistOpen","mutations","netChan","refreshDesktopNotificationState","payload","removeNetwork","networkId","findIndex","n","sortNetworks","sortFn","toggleSidebar","toggleUserlist","addMessageSearchResults","actions","partChannel","msg","findChannelOnCurrentNetwork","findChannelOnNetwork","highlightCount","muted","initChannel","m","reverse","totalMessages","Symbol","createStore","settingsStore","namespaced","syncAll","force","applyAll","update","settingConfig","stringify","createSettingsStore","baseUseStore","registerModule","instance","xhr","fileQueue","tokenKeepAlive","overlay","uploadProgressbar","onDragEnter","this","dragEnter","onDragOver","dragOver","onDragLeave","dragLeave","onDrop","drop","onPaste","paste","init","uploadNextFileInQueue","mounted","unmounted","dataTransfer","types","relatedTarget","items","kind","getAsFile","triggerUpload","clipboardData","handleResponse","wasQueueEmpty","maxFileSize","fileUploadMaxFileSize","file","requestToken","setProgress","toggle","setInterval","startsWith","renderImage","newFile","performUpload","fileReader","FileReader","onabort","onerror","onload","img","Image","canvas","ctx","getContext","drawImage","toBlob","blob","File","readAsDataURL","XMLHttpRequest","percent","loaded","total","onreadystatechange","readyState","DONE","responseText","statusText","status","append","open","send","clearInterval","insertUploadUrl","fullURL","URL","textbox","HTMLTextAreaElement","initStart","headToCursor","cursorToTail","textBeforeTail","updateCursor","initialize","handleDisconnect","updateLoadingMessage","requestIdleCallback","timeout","loading","textContent","attempt","lastServerHash","showSignIn","g_TheLoungeRemoveLoading","reloadPage","mergeChannelData","oldChannels","newChannels","currentChannel","serverHash","doFastAuth","openChannel","hasConfig","newNetworks","stored","collapsedNetworks","Set","currentNetwork","isJoinChannelShown","mergeNetworkData","handledQuery","URLSearchParams","cleanParams","cleanUri","hash","replaceState","stringUri","protocol","hostname","parseIrcUri","fromEntries","handleQueryParams","shouldOpen","unshift","receivingChannel","isActiveChannel","targetId","hasFocus","exception","cleanIrcMessage","timestamp","ready","then","registration","postMessage","tag","badge","icon","close","notifyMessage","messageLimit","getTime","idx","updateUserList","previewIndex","connected","secure","isCurrentNetworkBeingRemoved","order","currentTheme","t","defaultTheme","returnValue","packages","expiresAt","expires","pendingQuery","navigateWindow","flatChannels","isChannelCollapsed","jumpToChannel","targetChannel","isIgnoredKeybind","onTwoFingerSwipe","touches","performance","center","screenX","screenY","last","centersAreEqual","hist","previous","distance","abs","tangent","getCardinalDirection","getSwipe","listenForTwoFingerSwipes","cardinalDirection","net","flat","outer_loop","ignoredKeys","altKey","which","ctrlKey","metaKey","favicon","faviconNormal","getAttribute","faviconAlerted","other","VueApp","createApp","App","use","mount","nav","setAppBadge","clearAppBadge","errorHandler","togglePushSubscription","pushManager","getSubscription","existingSubscription","unsubscribe","successful","subscribe","applicationServerKey","userVisibleOnly","subscription","toJSON","hasSubscriptionOnServer","register","matchFormatting","trim","Props","delay","delayOnTouchOnly","touchStartThreshold","handle","draggable","ghostClass","dragClass","group","itemKey","list","containerRef","sortable","newDraggable","Sortable","onChoose","onUnchoose","onEnd","delete","count","isFiltering","isChannelVisible","getAriaLabel","extra","transition","opacity","onContextmenu","ChannelWrapper","joinChannelLabel","unreadCount","roundBadgeNumber","collapseNetwork","getExpandLabel","_component_ChannelWrapper","useCloseChannel","button","directives","inputChannel","inputPassword","existingChannel","JoinChannel","NetworkLobby","Channel","Draggable","searchText","activeSearchItem","startDrag","networklist","sidebarWasClosed","moveItemInArray","newItems","collapseNetworkHelper","expandNetwork","activateSearch","activeElement","deactivateSearch","setActiveSearchItem","scrollToActive","LONG_TOUCH_DURATION","setSearchText","selectResult","navigateResults","r","onChannelSort","oldIndex","newIndex","unparsedId","onNetworkSort","onDraggableTouchStart","onDraggableTouchMove","touch","currentPosition","onDraggableTouchEnd","onDraggableChoose","originalEvent","pointerType","isTouchEvent","TouchEvent","PointerEvent","onDraggableUnchoose","onFocus","onMouseenter","_component_Channel","_component_NetworkLobby","_component_Draggable","onTouchstart","onTouchmove","onTouchend","onTouchcancel","onToggleJoinChannel","_component_JoinChannel","NetworkList","touchStartPos","touchCurPos","touchStartTime","menuWidth","menuIsMoving","menuIsAbsolute","sidebar","onTouchMove","distX","distY","onTouchEnd","devicePixelRatio","transform","diff","absDiff","onTouchStart","styles","isDevelopment","process","isPublic","_component_NetworkList","isActive","isUpdateAvailable","viewer","image","previousImage","nextImage","x","y","scale","computeImageStyles","transformX","transformY","calculateZoomShift","newScale","oldScale","imageWidth","centerX","centerY","correctPosition","imageEl","viewerEl","widthScaled","heightScaled","containerWidth","containerHeight","reduceTouches","totalX","totalY","totalScale","i2","sqrt","newLink","oldLink","setPrevNextImages","onImageLoad","naturalWidth","naturalHeight","prepareImage","onImageMouseDown","stopPropagation","startX","startY","startTransformX","startTransformY","movedDistance","mouseMove","moveEvent","newX","newY","mouseUp","upEvent","onMouseWheel","deltaY","delta","fixedPosition","onImageTouchStart","currentTouches","touchEndFingers","currentTransform","startTransform","touchMove","deltaX","deltaScale","touchEnd","endEvent","changedTouches","onWheel","generateChannelContextMenu","closeChannel","label","lobby","humanFriendlyChanTypeMap","chanType","setMutedTo","generateInlineChannelContextMenu","generateUserContextMenu","currentChannelUser","whois","modeCharToName","modeTextTemplate","revoke","symbol","give","networkModeSymbols","PREFIX","symbols","compare","p1","p2","prefix","isOpen","passthrough","contextMenu","previousActiveElement","activeItem","enablePointerEvents","clickItem","pos","menuHeight","pageX","pageY","innerHeight","positionContextMenu","openChannelContextMenu","openInlineChannelContextMenu","openUserContextMenu","containerClick","currentTarget","navigateMenu","nextItem","hoverItem","clickActiveItem","incoming","cb","relativeTime","isLoading","resolvedMessages","togglePopup","closePopup","fromNow","dismissMention","dismissAllMentions","contextMenuKey","confirmDialogKey","Sidebar","ImageViewer","ContextMenu","ConfirmDialog","Mentions","loungeWindow","confirmDialog","provide","viewportClasses","notified","debouncedResize","dayChangeTimeout","escapeKey","toggleUserList","toggleMentions","msUntilNextDay","today","viewportWidth","isUserlistOpen","prepareOpenStates","throttle","emitDayChange","clearTimeout","_component_Sidebar","_component_Mentions","_component_ImageViewer","_component_ContextMenu","_component_ConfirmDialog","new_ident","new_host","ctcpMessage","errorMessage","reason","invitedYou","account","gecos","raw_modes","cleanText","lines","every","line","new_nick","whowas","ident","actual_hostname","actual_ip","real_name","registered_nick","operator","helpop","bot","away","certfp","server","server_info","logonTime","idle","idleTime","colorRx","hexColorRx","controlCodesRx","properties","escapeRegExpCharSet","raw","escapeRegExp","linkify","LinkifyIt","tlds","commonSchemes","schema","makeLinkPart","start","end","lastIndex","validate","webSchemaRe","linkEnd","testSchemaAt","normalize","__schemas__","regExp","emojiRegExp","nickRegExp","sortParts","ariaLabel","previewSize","emojiModifiersRegex","styleFragments","colorCodes","bold","textColor","bgColor","hexColor","hexBgColor","italic","underline","strikethrough","monospace","resetStyle","emitFragment","processedText","fragmentStart","toUpperCase","tmp","parseStyle","prev","curr","lastEntry","fragment","channelParts","channelPrefixes","userModes","userModePattern","channelPrefixPattern","channelRegExp","RegExp","exec","findChannels","pref","linkParts","matches","findLinks","emojiParts","emoji","findEmoji","nameParts","nicks","findNames","parts","filled","existingEntries","textSegment","fill","some","p","anyIntersection","fragments","textPart","fragStart","merge","classes","hasData","color","createFragment","linkEls","LinkPreviewFileSize","LinkPreviewToggle","InlineChannel","emojiWithoutModifiers","functional","render","context","onHover","nickColor","str","charCodeAt","colorClass","hover","_toHandlers","mouseenter","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","prop","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}